---
---
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
  <head>
    <title>cicada.org</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <style type="text/css">
    <!--
      body {
        color: #f8f8f0;
        background-color: #1b1d1e;
      }
      .bold {
        /* bold */
        font-weight: bold;
      }
      .cicada-nymph-comment {
        /* cicada-nymph-comment-face */
        color: #FF8888;
      }
      .cicada-nymph-end {
        /* cicada-nymph-end-face */
        color: #00ffff;
        font-weight: bold;
      }
      .cicada-nymph-important-variable {
        /* cicada-nymph-important-variable-face */
        color: #fd971f;
        font-weight: bold;
      }
      .cicada-nymph-lexicographer {
        /* cicada-nymph-lexicographer-face */
        color: #ae81ff;
        font-weight: bold;
      }
      .cicada-nymph-number {
        /* cicada-nymph-number-face */
        color: #fd971f;
        font-weight: bold;
      }
      .cicada-nymph-sentence-reader {
        /* cicada-nymph-sentence-reader-face */
        color: #ffff00;
        font-weight: bold;
      }
      .cicada-nymph-string {
        /* cicada-nymph-string-face */
        color: #e6db74;
      }
      .cicada-nymph-syntax-key-word {
        /* cicada-nymph-syntax-key-word-face */
        color: #f92672;
        font-weight: bold;
      }
      .cicada-nymph-variable {
        /* cicada-nymph-variable-face */
        color: #fd971f;
      }
      .cicada-nymph-word-to-define {
        /* cicada-nymph-word-to-define-face */
        color: #ef5939;
        font-weight: bold;
      }
      .org-block-begin-line {
        /* org-block-begin-line */
        color: #FF8888;
      }
      .org-block-end-line {
        /* org-block-end-line */
        color: #FF8888;
      }
      .org-document-info {
        /* org-document-info */
        color: #afeeee;
      }
      .org-document-info-keyword {
        /* org-document-info-keyword */
        color: #b3b3b3;
      }
      .org-document-title {
        /* org-document-title */
        color: #afeeee;
        font-weight: bold;
      }
      .org-done {
        /* org-done */
        color: #98fb98;
        font-weight: bold;
      }
      .org-level-1 {
        /* org-level-1 */
        color: #a6e22e;
      }
      .org-level-2 {
        /* org-level-2 */
        color: #fd971f;
      }
      .org-level-3 {
        /* org-level-3 */
        color: #f92672;
        font-weight: bold;
      }
      .org-table {
        /* org-table */
        color: #87cefa;
      }
      .org-todo {
        /* org-todo */
        color: #ffc0cb;
        font-weight: bold;
      }

      a {
        color: inherit;
        background-color: inherit;
        font: inherit;
        text-decoration: inherit;
      }
      a:hover {
        text-decoration: underline;
      }
    -->
    </style>
{% include in-org-head.html %}
  </head>
  <body>
    {% include before-pre.html %}
<pre>
<span class="org-document-info-keyword">#+TITLE:</span>  <span class="org-document-title">&#34796;&#35486; / cicada
</span><span class="org-document-info-keyword">#+AUTHOR:</span> <span class="org-document-info">&#35613;&#23431;&#24646; / XIE Yuheng
</span><span class="org-document-info-keyword">#+EMAIL:</span>  <span class="org-document-info">xyheme@gmail.com
</span>
<span class="org-level-1">* </span><span class="org-done">todo</span>
<span class="org-level-2">** name-hash-table</span>
   * better factoring
   * better naming
<span class="org-level-2">** title-name-table</span>
<span class="org-level-2">** data-giver</span>
<span class="org-level-1">* ===================================</span>
<span class="org-level-1">* </span><span class="org-todo">note</span>
<span class="org-level-2">** notation</span>
   * use ","
<span class="org-level-2">** data section in cicada-nymph</span>
<span class="org-level-2">** style</span>
   * to use global-variable more
     may will make code be better
     for stack operations are less
   * another way is to design good macro for operations
<span class="org-level-1">* -----------------------------------</span>
<span class="org-level-1">* name-hash-table</span>
<span class="org-level-2">** </span><span class="org-todo">note</span><span class="org-level-2"> naming &amp; factoring</span>
   * open addressing
     for we do not need to delete
   * math
     * hash
     * probe
   * memory
     * insert
     * search
   * function
     * map
     * reverse
<span class="org-level-2">** memory allocation</span>
   * the following are some prime number
     ready to be used
     * 1000003   about 976 k
     * 1000033
     * 1000333
     * 100003    about 97 k
     * 100333
     * 997
     * 499
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle cicada.cn
</span>   <span class="cicada-nymph-number">100333</span>
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*name-hash-table,size*</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>

   <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">4</span> mul
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*name-hash-table,unit*</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>

   <span class="cicada-nymph-variable">*name-hash-table,size*</span>
   <span class="cicada-nymph-variable">*name-hash-table,unit*</span> mul
   allocate-memory
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*name-hash-table*</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>

   <span class="cicada-nymph-number">0</span>
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*name-hash-table,counter*</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** hash</span>
   * prime table size
   * linear probing
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle cicada.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-hash-table,hash</span>
     <span class="cicada-nymph-comment">&lt;&lt; number, counter -- index &gt;&gt;</span>
     add <span class="cicada-nymph-variable">*name-hash-table,size*</span> mod
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** string-&gt;finite-carry-sum</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle cicada.cn
</span>   <span class="cicada-nymph-number">16</span>
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*max-carry-position*</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">string-&gt;finite-carry-sum,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; carry-sum, string[address, length], counter -- carry-sum &gt;&gt;</span>
     over zero? <span class="cicada-nymph-syntax-key-word">if</span>
       drop drop2
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-variable">*max-carry-position*</span> greater-than? <span class="cicada-nymph-syntax-key-word">if</span>
       drop <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-comment">&lt;&lt; re-start from 0 &gt;&gt;</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     xx|over|x
     string-head,char over
     <span class="cicada-nymph-number">2</span> swap power
     mul
     x|swap|xxxx add xxx|swap|x
     add1 xx|swap|x
     string-tail,char x|swap|xx
     <span class="cicada-nymph-end">&lt;&gt;</span> string-&gt;finite-carry-sum,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">string-&gt;finite-carry-sum</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- carry-sum &gt;&gt;</span>
     <span class="cicada-nymph-number">0</span> xx|swap|x <span class="cicada-nymph-comment">&lt;&lt; carry-sum &gt;&gt;</span>
     <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-comment">&lt;&lt; counter &gt;&gt;</span>
     string-&gt;finite-carry-sum,loop
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** name</span>
<span class="org-level-3">*** </span><span class="org-todo">note</span>
    * a name is an index into name-hash-table
    * an entry can be viewed
      1. as a point
      2. as an orbit
    * in a name entry we have the following fields
      <span class="org-table">|-------------------------------+-------------------------|</span>
      <span class="org-table">|                               | note                    |</span>
      <span class="org-table">|-------------------------------+-------------------------|</span>
      <span class="org-table">| primitive-string              | 0 denotes               |</span>
      <span class="org-table">| [address]                     | name not used           |</span>
      <span class="org-table">|-------------------------------+-------------------------|</span>
      <span class="org-table">| title                         | 0 denotes               |</span>
      <span class="org-table">| [index into name-title-table] | name not used as title  |</span>
      <span class="org-table">|-------------------------------+-------------------------|</span>
      <span class="org-table">| orbit-length                  | as an orbit             |</span>
      <span class="org-table">| [number]                      | its length gets updated |</span>
      <span class="org-table">|-------------------------------+-------------------------|</span>
      <span class="org-table">| orbiton                       | as a point              |</span>
      <span class="org-table">| [address]                     | it is on an orbit       |</span>
      <span class="org-table">|-------------------------------+-------------------------|</span>
<span class="org-level-3">*** name-&gt;address</span>
<span class="org-block-begin-line">    #+begin_src cicada-nymph :tangle cicada.cn
</span>    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-&gt;address</span>
      <span class="cicada-nymph-comment">&lt;&lt; name -- address &gt;&gt;</span>
      <span class="cicada-nymph-variable">*name-hash-table,unit*</span> mul
      <span class="cicada-nymph-variable">*name-hash-table*</span> add
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">    #+end_src
</span><span class="org-level-3">*** name,used?</span>
<span class="org-block-begin-line">    #+begin_src cicada-nymph :tangle cicada.cn
</span>    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,used?</span>
      <span class="cicada-nymph-comment">&lt;&lt; name -- bool &gt;&gt;</span>
      name-&gt;address
      fetch zero? false?
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">    #+end_src
</span><span class="org-level-3">*** name,used-as-title?</span>
<span class="org-block-begin-line">    #+begin_src cicada-nymph :tangle cicada.cn
</span>    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,used-as-title?</span>
      <span class="cicada-nymph-comment">&lt;&lt; name -- bool &gt;&gt;</span>
      name-&gt;address
      <span class="cicada-nymph-variable">*jo-size*</span> add
      fetch zero?
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">    #+end_src
</span><span class="org-level-3">*** name,fetch-string</span>
<span class="org-block-begin-line">    #+begin_src cicada-nymph :tangle cicada.cn
</span>    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,fetch-string</span>
      <span class="cicada-nymph-comment">&lt;&lt; name -- string[address, length] &gt;&gt;</span>
      name-&gt;address
      fetch
      address-&gt;primitive-string
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">    #+end_src
</span><span class="org-level-3">*** name,fetch-title-index</span>
<span class="org-block-begin-line">    #+begin_src cicada-nymph :tangle cicada.cn
</span>    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,fetch-title-index</span>
      <span class="cicada-nymph-comment">&lt;&lt; name -- index &gt;&gt;</span>
      name-&gt;address
      <span class="cicada-nymph-variable">*jo-size*</span> add
      fetch
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">    #+end_src
</span><span class="org-level-3">*** name,fetch-orbit-length</span>
<span class="org-block-begin-line">    #+begin_src cicada-nymph :tangle cicada.cn
</span>    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,fetch-orbit-length</span>
      <span class="cicada-nymph-comment">&lt;&lt; name -- length &gt;&gt;</span>
      name-&gt;address
      <span class="cicada-nymph-variable">*jo-size*</span> add
      <span class="cicada-nymph-variable">*jo-size*</span> add
      fetch
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">    #+end_src
</span><span class="org-level-3">*** name,fetch-orbiton</span>
<span class="org-block-begin-line">    #+begin_src cicada-nymph :tangle cicada.cn
</span>    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,fetch-orbiton</span>
      <span class="cicada-nymph-comment">&lt;&lt; name -- address &gt;&gt;</span>
      name-&gt;address
      <span class="cicada-nymph-variable">*jo-size*</span> add
      <span class="cicada-nymph-variable">*jo-size*</span> add
      <span class="cicada-nymph-variable">*jo-size*</span> add
      fetch
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">    #+end_src
</span><span class="org-level-3">*** name,save-string</span>
    * note that
      primitive-string-heap is used
<span class="org-block-begin-line">    #+begin_src cicada-nymph :tangle cicada.cn
</span>    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,save-string</span>
      <span class="cicada-nymph-comment">&lt;&lt; string[address, length], name -- &gt;&gt;</span>
      <span class="cicada-nymph-variable">*current-free-address,primitive-string-heap*</span>
      xx|swap|xx
      save-into,primitive-string-heap
      swap
      name-&gt;address
      save
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">    #+end_src
</span><span class="org-level-3">*** name,save-title-index</span>
<span class="org-block-begin-line">    #+begin_src cicada-nymph :tangle cicada.cn
</span>    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,save-title-index</span>
      <span class="cicada-nymph-comment">&lt;&lt; index, name -- &gt;&gt;</span>
      name-&gt;address
      <span class="cicada-nymph-variable">*jo-size*</span> add
      save
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">    #+end_src
</span><span class="org-level-3">*** name,save-orbit-length</span>
<span class="org-block-begin-line">    #+begin_src cicada-nymph :tangle cicada.cn
</span>    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,save-orbit-length</span>
      <span class="cicada-nymph-comment">&lt;&lt; index, name -- &gt;&gt;</span>
      name-&gt;address
      <span class="cicada-nymph-variable">*jo-size*</span> add
      <span class="cicada-nymph-variable">*jo-size*</span> add
      save
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">    #+end_src
</span><span class="org-level-3">*** name,save-orbiton</span>
<span class="org-block-begin-line">    #+begin_src cicada-nymph :tangle cicada.cn
</span>    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,save-orbiton</span>
      <span class="cicada-nymph-comment">&lt;&lt; index, name -- &gt;&gt;</span>
      name-&gt;address
      <span class="cicada-nymph-variable">*jo-size*</span> add
      <span class="cicada-nymph-variable">*jo-size*</span> add
      <span class="cicada-nymph-variable">*jo-size*</span> add
      save
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">    #+end_src
</span><span class="org-level-3">*** name,no-collision?</span>
<span class="org-block-begin-line">    #+begin_src cicada-nymph :tangle cicada.cn
</span>    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,no-collision?</span>
      <span class="cicada-nymph-comment">&lt;&lt; name -- bool &gt;&gt;</span>
      dup name,fetch-orbiton
      equal?
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">    #+end_src
</span><span class="org-level-2">** search</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle cicada.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-hash-table,search,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length], number, counter
        -- name, true
        -- name, false &gt;&gt;</span>
     xx|tuck|xx name-hash-table,hash
     xx|tuck|x
     <span class="cicada-nymph-comment">&lt;&lt; number, counter, name, string[address, length], name &gt;&gt;</span>
     name,used? false? <span class="cicada-nymph-syntax-key-word">if</span>
       drop2 xx|swap|x drop2
       <span class="cicada-nymph-important-variable">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-comment">&lt;&lt; number, counter, name, string[address, length] &gt;&gt;</span>
     x|over|xx name,fetch-string
     xx|over|xx string-equal? <span class="cicada-nymph-syntax-key-word">if</span>
       drop2 xx|swap|x drop2
       <span class="cicada-nymph-important-variable">true</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-comment">&lt;&lt; number, counter, name, string[address, length] &gt;&gt;</span>
     x|over|xx name,fetch-orbit-length
     x|over|xxxx equal? <span class="cicada-nymph-syntax-key-word">if</span>
       drop2 xx|swap|x drop2
       <span class="cicada-nymph-important-variable">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-comment">&lt;&lt; number, counter, name, string[address, length] &gt;&gt;</span>
     x|swap|xx drop
     xx|swap|xx add1
     <span class="cicada-nymph-end">&lt;&gt;</span> name-hash-table,search,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-hash-table,search</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length]
        -- name, true
        -- false &gt;&gt;</span>
     dup2 string-&gt;finite-carry-sum
     <span class="cicada-nymph-number">0</span> name-hash-table,search,loop
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** insert</span>
   * I found that (insert) can not re-use (search)
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle cicada.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-hash-table,insert,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length], number, counter
        -- name, true
        -- name, false &gt;&gt;</span>
     xx|tuck|xx name-hash-table,hash
     xx|tuck|x
     <span class="cicada-nymph-comment">&lt;&lt; number, counter, name, string[address, length], name &gt;&gt;</span>
     name,used? false? <span class="cicada-nymph-syntax-key-word">if</span>
       x|over|xx name,save-string
         xx|tuck|x <span class="cicada-nymph-comment">&lt;&lt; name as return value &gt;&gt;</span>
       <span class="cicada-nymph-comment">&lt;&lt; name, number, counter, name &gt;&gt;</span>
       x|over|xx <span class="cicada-nymph-number">0</span> name-hash-table,hash
       swap name,save-orbiton
       <span class="cicada-nymph-comment">&lt;&lt; name, number, counter &gt;&gt;</span>
       swap <span class="cicada-nymph-number">0</span> name-hash-table,hash
       name,save-orbit-length
       <span class="cicada-nymph-number">1</span> <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*name-hash-table,counter*</span> add-save
       <span class="cicada-nymph-important-variable">true</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-comment">&lt;&lt; number, counter, name, string[address, length] &gt;&gt;</span>
     x|over|xx name,fetch-string
     xx|over|xx string-equal? <span class="cicada-nymph-syntax-key-word">if</span>
       drop2 xx|swap|x drop2
       <span class="cicada-nymph-important-variable">true</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-comment">&lt;&lt; number, counter, name, string[address, length] &gt;&gt;</span>
     x|over|xxx <span class="cicada-nymph-variable">*name-hash-table,size*</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
       drop2 xx|swap|x drop2
       <span class="cicada-nymph-important-variable">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-comment">&lt;&lt; number, counter, name, string[address, length] &gt;&gt;</span>
     x|swap|xx drop
     xx|swap|xx add1
     <span class="cicada-nymph-end">&lt;&gt;</span> name-hash-table,insert,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-hash-table,insert</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length]
        -- name, true
        -- name, false &gt;&gt;</span>
     dup2 string-&gt;finite-carry-sum
     <span class="cicada-nymph-number">0</span> name-hash-table,insert,loop
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** string-&gt;name &amp; name-&gt;string</span>
   * error handling here
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle cicada.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">string-&gt;name</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- name &gt;&gt;</span>
     name-hash-table,insert
     false? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-string">"* (string-&gt;name) *name-hash-table* IS FULL!"</span> .s
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-&gt;string</span>
     <span class="cicada-nymph-comment">&lt;&lt; name -- string[address, length]] &gt;&gt;</span>
     name,fetch-string
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
   * set <span class="bold">*name-hash-table,size*</span> to a small number [for example 13]
     then use the following function
     and (name-hash-table,report) to do test
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle cicada.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-hash-table,test</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"a-000"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"a-111"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"a-222"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"a-333"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"a-444"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"a-555"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"a-666"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"a-777"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"a-888"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"a-999"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"b-000"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"b-111"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"b-222"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"b-333"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"b-444"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"b-555"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"b-666"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"b-777"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"b-888"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"b-999"</span> string-&gt;name . cr
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-todo">note</span><span class="org-level-2"> about report</span>
   * report point orbit by orbit
     in the following format
   * {index} string # orbit-lenght
     * {index} string
     * {index} string
     * {index} string
   * if used as title
     add a (AS TITLE) as postfix
<span class="org-level-2">** report</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle cicada.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-hash-table,report,orbit</span>
     <span class="cicada-nymph-comment">&lt;&lt; name, counter -- &gt;&gt;</span>
     over name,fetch-orbit-length
     over less-than? <span class="cicada-nymph-syntax-key-word">if</span>
       drop2
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     over name,fetch-string string-&gt;finite-carry-sum
     over name-hash-table,hash
     dup name,fetch-orbiton
     <span class="cicada-nymph-comment">&lt;&lt; name, counter, new-name, orbiton &gt;&gt;</span>
     x|over|xxx name,fetch-string string-&gt;finite-carry-sum
     <span class="cicada-nymph-number">0</span> name-hash-table,hash
     equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-string">"  {"</span> write-string
       dup write-nature-number
       <span class="cicada-nymph-string">"} "</span> write-string
       name,fetch-string write-string
       cr
     <span class="cicada-nymph-syntax-key-word">else</span>
       drop
     <span class="cicada-nymph-syntax-key-word">then</span>
     add1 <span class="cicada-nymph-end">&lt;&gt;</span> name-hash-table,report,orbit
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-hash-table,report,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; name -- &gt;&gt;</span>
     dup <span class="cicada-nymph-variable">*name-hash-table,size*</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
       drop
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     dup name,used? <span class="cicada-nymph-syntax-key-word">if</span>
     dup name,no-collision? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-comment">&lt;&lt; * {index} string # orbit-lenght &gt;&gt;</span>
       <span class="cicada-nymph-string">"* {"</span> write-string
       dup write-nature-number
       <span class="cicada-nymph-string">"} "</span> write-string
       dup name,fetch-string write-string
       <span class="cicada-nymph-string">" # "</span> write-string
       dup name,fetch-orbit-length
       write-nature-number
       cr
       dup <span class="cicada-nymph-number">1</span> name-hash-table,report,orbit
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     add1 <span class="cicada-nymph-end">&lt;&gt;</span> name-hash-table,report,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-hash-table,report</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-number">0</span> name-hash-table,report,loop
     <span class="cicada-nymph-string">"* TOTALLY : "</span> write-string
     <span class="cicada-nymph-variable">*name-hash-table,counter*</span> write-nature-number
     cr
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* </span><span class="org-todo">&gt;&lt;</span><span class="org-level-1"> title-name-table</span>
<span class="org-level-1">* -----------------------------------</span>
<span class="org-level-1">* </span><span class="org-todo">&gt;&lt;</span><span class="org-level-1"> return-stack</span>
<span class="org-level-1">* </span><span class="org-todo">&gt;&lt;</span><span class="org-level-1"> argument-stack</span>
<span class="org-level-1">* </span><span class="org-todo">&gt;&lt;</span><span class="org-level-1"> frame-stack</span>
<span class="org-level-1">* -----------------------------------</span>
<span class="org-level-1">* </span><span class="org-done">test</span>
<span class="org-block-begin-line">  #+begin_src cicada-nymph
</span>  cicada
  name-hash-table,test
  name-hash-table,report
<span class="org-block-end-line">  #+end_src
</span><span class="org-level-1">* ===================================</span>
</pre>
  </body>
</html>
