---
---
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
  <head>
    <title>core.cn</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <style type="text/css">
    <!--
      body {
        color: #f8f8f0;
        background-color: #1b1d1e;
      }
      .cicada-nymph-XdataX {
        /* cicada-nymph-<data>-face */
        color: #ffffff;
        font-weight: bold;
      }
      .cicada-nymph-allocate {
        /* cicada-nymph-allocate-face */
        color: #AE7C3B;
        font-weight: bold;
      }
      .cicada-nymph-await {
        /* cicada-nymph-await-face */
        color: #1ef15f;
        font-weight: bold;
      }
      .cicada-nymph-bool {
        /* cicada-nymph-bool-face */
        color: #fd971f;
        font-weight: bold;
      }
      .cicada-nymph-comment {
        /* cicada-nymph-comment-face */
        color: #FF8888;
      }
      .cicada-nymph-constant {
        /* cicada-nymph-constant-face */
        color: #fd971f;
        font-weight: bold;
      }
      .cicada-nymph-define-function {
        /* cicada-nymph-define-function-face */
        color: #ae81ff;
        font-weight: bold;
      }
      .cicada-nymph-define-variable {
        /* cicada-nymph-define-variable-face */
        color: #a1ab3a;
        font-weight: bold;
      }
      .cicada-nymph-end {
        /* cicada-nymph-end-face */
        color: #00ffff;
        font-weight: bold;
      }
      .cicada-nymph-fetch-local-variable-1 {
        /* cicada-nymph-fetch-local-variable-1-face */
        color: #83EA83;
        font-weight: bold;
      }
      .cicada-nymph-fetch-local-variable-2 {
        /* cicada-nymph-fetch-local-variable-2-face */
        color: #5CDD5C;
        font-weight: bold;
      }
      .cicada-nymph-function-to-define {
        /* cicada-nymph-function-to-define-face */
        color: #ef5939;
        font-weight: bold;
      }
      .cicada-nymph-number {
        /* cicada-nymph-number-face */
        color: #fd971f;
        font-weight: bold;
      }
      .cicada-nymph-number-light {
        /* cicada-nymph-number-light-face */
        color: #ffff00;
      }
      .cicada-nymph-quote {
        /* cicada-nymph-quote-face */
        color: #fd971f;
        font-weight: bold;
      }
      .cicada-nymph-save-local-variable-1 {
        /* cicada-nymph-save-local-variable-1-face */
        color: #FF4C4C;
        font-weight: bold;
      }
      .cicada-nymph-save-local-variable-2 {
        /* cicada-nymph-save-local-variable-2-face */
        color: #dc322f;
        font-weight: bold;
      }
      .cicada-nymph-sentence-reader {
        /* cicada-nymph-sentence-reader-face */
        color: #ffff00;
        font-weight: bold;
      }
      .cicada-nymph-square-brackets {
        /* cicada-nymph-square-brackets-face */
        color: #93a8c6;
      }
      .cicada-nymph-string {
        /* cicada-nymph-string-face */
        color: #e6db74;
      }
      .cicada-nymph-syntax-key-word {
        /* cicada-nymph-syntax-key-word-face */
        color: #f92672;
        font-weight: bold;
      }
      .cicada-nymph-title {
        /* cicada-nymph-title-face */
        color: #ffffff;
        font-weight: bold;
      }
      .cicada-nymph-variable {
        /* cicada-nymph-variable-face */
        color: #fd971f;
        font-weight: bold;
      }

      a {
        color: inherit;
        background-color: inherit;
        font: inherit;
        text-decoration: inherit;
      }
      a:hover {
        text-decoration: underline;
      }
    -->
    </style>
{% include in-org-head.html %}
  </head>
  <body>
<pre>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">.l</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-number">10</span> write-byte
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">.i</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  write-integer
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">.b</span>
  <span class="cicada-nymph-comment">&lt;&lt; byte -- &gt;&gt;</span>
  write-byte
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">word:if?</span>
  <span class="cicada-nymph-comment">&lt;&lt; word[address, length] -- bool &gt;&gt;</span>
  <span class="cicada-nymph-string">"if"</span> string-equal?
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">word:else?</span>
  <span class="cicada-nymph-comment">&lt;&lt; word[address, length] -- bool &gt;&gt;</span>
  <span class="cicada-nymph-string">"else"</span> string-equal?
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">word:then?</span>
  <span class="cicada-nymph-comment">&lt;&lt; word[address, length] -- bool &gt;&gt;</span>
  <span class="cicada-nymph-string">"then"</span> string-equal?
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">syntax,if,make-jojo</span>
  &lt;&lt; jo, string<span class="cicada-nymph-square-brackets">[</span>address, length<span class="cicada-nymph-square-brackets">]</span>, word:if --
     address, jo, string<span class="cicada-nymph-square-brackets">[</span>address, length<span class="cicada-nymph-square-brackets">]</span> &gt;&gt;
  drop2
  <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">instruction</span>,false?branch
    <span class="cicada-nymph-title">jojo-area</span>,stay
  <span class="cicada-nymph-variable">*jojo-area,current-free-address*</span> xxx|swap|x
  <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-title">jojo-area</span>,stay
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">syntax,else,make-jojo</span>
  <span class="cicada-nymph-comment">&lt;&lt; address, jo, string[address, length], word:else --
     address, jo, string[address, length] &gt;&gt;</span>
  drop2
  <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">instruction</span>,branch
     <span class="cicada-nymph-title">jojo-area</span>,stay
  x|swap|xxx
  <span class="cicada-nymph-variable">*jojo-area,current-free-address*</span> xxxx|swap|x
  <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-title">jojo-area</span>,stay
  <span class="cicada-nymph-comment">&lt;&lt; address, string[address, length], address &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jojo-area,current-free-address*</span>
  over sub <span class="cicada-nymph-variable">*jo-size*</span> div
  swap set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">syntax,then,make-jojo</span>
  <span class="cicada-nymph-comment">&lt;&lt; address, jo, string[address, length], word:then --
     jo, string[address, length] &gt;&gt;</span>
  drop2
  x|swap|xxx
  <span class="cicada-nymph-variable">*jojo-area,current-free-address*</span>
  over sub <span class="cicada-nymph-variable">*jo-size*</span> div
  swap set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">word:loop?</span>
  <span class="cicada-nymph-comment">&lt;&lt; word[address, length] -- bool &gt;&gt;</span>
  <span class="cicada-nymph-string">"loop"</span> string-equal?
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">syntax,loop,make-jojo</span>
  <span class="cicada-nymph-comment">&lt;&lt; jo, string[address, length], word:loop --
     jo, string[address, length] &gt;&gt;</span>
  drop2
  <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-end">tail-call</span>
    <span class="cicada-nymph-title">jojo-area</span>,stay
  x|over|xx
    <span class="cicada-nymph-title">jojo-area</span>,stay
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">word:recur?</span>
  <span class="cicada-nymph-comment">&lt;&lt; word[address, length] -- bool &gt;&gt;</span>
  <span class="cicada-nymph-string">"recur"</span> string-equal?
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">syntax,recur,make-jojo</span>
  <span class="cicada-nymph-comment">&lt;&lt; jo, string[address, length], word:recur --
     jo, string[address, length] &gt;&gt;</span>
  drop2
  x|over|xx
    <span class="cicada-nymph-title">jojo-area</span>,stay
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">more,rule-set,make-jojo</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*rule-set,make-jojo*</span>
  dup <span class="cicada-nymph-syntax-key-word">jo</span> word:if?    <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">syntax</span>,if,make-jojo    <span class="cicada-nymph-title">rule</span>,add
  dup <span class="cicada-nymph-syntax-key-word">jo</span> word:else?  <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">syntax</span>,else,make-jojo  <span class="cicada-nymph-title">rule</span>,add
  dup <span class="cicada-nymph-syntax-key-word">jo</span> word:then?  <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">syntax</span>,then,make-jojo  <span class="cicada-nymph-title">rule</span>,add
  dup <span class="cicada-nymph-syntax-key-word">jo</span> word:loop?  <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">syntax</span>,loop,make-jojo  <span class="cicada-nymph-title">rule</span>,add
      <span class="cicada-nymph-syntax-key-word">jo</span> word:recur? <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">syntax</span>,recur,make-jojo <span class="cicada-nymph-title">rule</span>,add
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>
<span class="cicada-nymph-title">more</span>,rule-set,make-jojo

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">allocate-memory</span>
  <span class="cicada-nymph-comment">&lt;&lt; size -- address &gt;&gt;</span>
  dup <span class="cicada-nymph-variable">*un-initialized-memory,current-free-address*</span> clear-memory
  <span class="cicada-nymph-variable">*un-initialized-memory,current-free-address*</span> swap <span class="cicada-nymph-comment">&lt;&lt; address as return value &gt;&gt;</span>
  <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*un-initialized-memory,current-free-address*</span> add-set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-number">100333</span>
<span class="cicada-nymph-comment">&lt;&lt; drop 13 &gt;&gt;</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*name-hash-table,size*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">5</span> mul
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*name-hash-table,unit*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-variable">*name-hash-table,size*</span>
<span class="cicada-nymph-variable">*name-hash-table,unit*</span> mul <span class="cicada-nymph-allocate">allocate-memory</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*name-hash-table*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-number">0</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*name-hash-table,counter*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-variable">*name-hash-table,size*</span> <span class="cicada-nymph-number">32</span> mul
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*name-hash-table,string-area,size*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-variable">*name-hash-table,string-area,size*</span>
<span class="cicada-nymph-allocate">allocate-memory</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*name-hash-table,string-area*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-variable">*name-hash-table,string-area*</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*name-hash-table,string-area,current-free-address*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name-hash-table,string-area,stay</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- &gt;&gt;</span>
  tuck
  <span class="cicada-nymph-variable">*name-hash-table,string-area,current-free-address*</span>
  string-&gt;buffer!
  <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*name-hash-table,string-area,current-free-address*</span>
  add-set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">make-string,for-name</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- string-copy[address, length] &gt;&gt;</span>
  <span class="cicada-nymph-variable">*name-hash-table,string-area,current-free-address*</span>
  xx|swap|x
  tuck
  <span class="cicada-nymph-title">name-hash-table</span>,string-area,stay
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name-&gt;address</span>
  <span class="cicada-nymph-comment">&lt;&lt; name -- address &gt;&gt;</span>
  <span class="cicada-nymph-variable">*name-hash-table,unit*</span> mul
  <span class="cicada-nymph-variable">*name-hash-table*</span> add
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name,used?</span>
  <span class="cicada-nymph-comment">&lt;&lt; name -- bool &gt;&gt;</span>
  name-&gt;address
  get zero? false?
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name,used-as-jo?</span>
  <span class="cicada-nymph-comment">&lt;&lt; name -- bool &gt;&gt;</span>
  name-&gt;address
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">4</span> mul add
  get zero? not
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name-&gt;string</span>
  <span class="cicada-nymph-comment">&lt;&lt; name -- string[address, length] &gt;&gt;</span>
  name-&gt;address
  <span class="cicada-nymph-number">2</span> n-get
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name,get-orbit-length</span>
  <span class="cicada-nymph-comment">&lt;&lt; name -- orbit-length &gt;&gt;</span>
  name-&gt;address
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">2</span> mul add
  get
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name,get-orbiton</span>
  <span class="cicada-nymph-comment">&lt;&lt; name -- orbiton &gt;&gt;</span>
  name-&gt;address
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">3</span> mul add
  get
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name,get-jo</span>
  <span class="cicada-nymph-comment">&lt;&lt; name -- jo &gt;&gt;</span>
  name-&gt;address
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">4</span> mul add
  get
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name,set-string</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length], name -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:name</span>
  <span class="cicada-nymph-title">make-string</span>,for-name
  <span class="cicada-nymph-fetch-local-variable-1">:name</span> name-&gt;address
  <span class="cicada-nymph-number">2</span> n-set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name,set-orbit-length</span>
  <span class="cicada-nymph-comment">&lt;&lt; orbit-length, name -- &gt;&gt;</span>
  name-&gt;address
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">2</span> mul add
  set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name,set-orbiton</span>
  <span class="cicada-nymph-comment">&lt;&lt; orbiton, name -- &gt;&gt;</span>
  name-&gt;address
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">3</span> mul add
  set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name,set-jo</span>
  <span class="cicada-nymph-comment">&lt;&lt; jo, name -- &gt;&gt;</span>
  name-&gt;address
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">4</span> mul add
  set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name,no-collision?</span>
  <span class="cicada-nymph-comment">&lt;&lt; name -- bool &gt;&gt;</span>
  dup <span class="cicada-nymph-title">name</span>,get-orbiton
  equal?
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name-hash-table,hash</span>
  <span class="cicada-nymph-comment">&lt;&lt; number, counter -- index &gt;&gt;</span>
  add <span class="cicada-nymph-variable">*name-hash-table,size*</span> mod
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-number">16</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*max-carry-position*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">string-&gt;finite-carry-sum,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; carry-sum, string[address, length], counter -- carry-sum &gt;&gt;</span>
  over zero? <span class="cicada-nymph-syntax-key-word">if</span>
    drop drop2
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-variable">*max-carry-position*</span> greater-than? <span class="cicada-nymph-syntax-key-word">if</span>
    drop <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-comment">&lt;&lt; re-start from 0 &gt;&gt;</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  xx|over|x
  <span class="cicada-nymph-title">string</span>,byte over
  <span class="cicada-nymph-number">2</span> swap power
  mul
  x|swap|xxxx add xxx|swap|x
  add1 xx|swap|x
  <span class="cicada-nymph-title">string</span>,byte-tail x|swap|xx
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">string-&gt;finite-carry-sum</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- carry-sum &gt;&gt;</span>
  <span class="cicada-nymph-number">0</span> xx|swap|x <span class="cicada-nymph-comment">&lt;&lt; carry-sum &gt;&gt;</span>
  <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-comment">&lt;&lt; counter &gt;&gt;</span>
  <span class="cicada-nymph-title">string-&gt;finite-carry-sum</span>,loop
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name-hash-table,search,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length], number, counter
     -- name, true
     -- name, false &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:counter</span> <span class="cicada-nymph-save-local-variable-1">&gt;:number</span> <span class="cicada-nymph-save-local-variable-2">&gt;::string</span>
  <span class="cicada-nymph-fetch-local-variable-1">:number</span> <span class="cicada-nymph-fetch-local-variable-1">:counter</span> <span class="cicada-nymph-title">name-hash-table</span>,hash
  <span class="cicada-nymph-save-local-variable-1">&gt;:name</span>
  <span class="cicada-nymph-fetch-local-variable-1">:number</span> <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-title">name-hash-table</span>,hash
  <span class="cicada-nymph-save-local-variable-1">&gt;:orbit</span>
  <span class="cicada-nymph-fetch-local-variable-1">:name</span> <span class="cicada-nymph-title">name</span>,used? false? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-1">:name</span> <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-1">:name</span> name-&gt;string
  <span class="cicada-nymph-fetch-local-variable-2">::string</span> string-equal? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-1">:name</span> <span class="cicada-nymph-bool">true</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-1">:name</span> <span class="cicada-nymph-title">name</span>,get-orbit-length
  <span class="cicada-nymph-fetch-local-variable-1">:counter</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-1">:name</span> <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-2">::string</span>
  <span class="cicada-nymph-fetch-local-variable-1">:number</span> <span class="cicada-nymph-fetch-local-variable-1">:counter</span> add1
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name-hash-table,search</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length]
     -- name, true
     -- name, false &gt;&gt;</span>
  dup2 string-&gt;finite-carry-sum
  <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-title">name-hash-table</span>,search,loop
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name-hash-table,insert,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length], number, counter
     -- name, true
     -- name, false &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:counter</span> <span class="cicada-nymph-save-local-variable-1">&gt;:number</span> <span class="cicada-nymph-save-local-variable-2">&gt;::string</span>
  <span class="cicada-nymph-fetch-local-variable-1">:number</span> <span class="cicada-nymph-fetch-local-variable-1">:counter</span> <span class="cicada-nymph-title">name-hash-table</span>,hash
  <span class="cicada-nymph-save-local-variable-1">&gt;:name</span>
  <span class="cicada-nymph-fetch-local-variable-1">:number</span> <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-title">name-hash-table</span>,hash
  <span class="cicada-nymph-save-local-variable-1">&gt;:orbit</span>
  <span class="cicada-nymph-fetch-local-variable-1">:name</span> <span class="cicada-nymph-title">name</span>,used? false? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-2">::string</span> <span class="cicada-nymph-fetch-local-variable-1">:name</span>
    <span class="cicada-nymph-title">name</span>,set-string
    <span class="cicada-nymph-fetch-local-variable-1">:orbit</span> <span class="cicada-nymph-fetch-local-variable-1">:name</span>
    <span class="cicada-nymph-title">name</span>,set-orbiton
    <span class="cicada-nymph-fetch-local-variable-1">:counter</span> <span class="cicada-nymph-fetch-local-variable-1">:orbit</span>
    <span class="cicada-nymph-title">name</span>,set-orbit-length
    <span class="cicada-nymph-number">1</span> <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*name-hash-table,counter*</span> add-set
    <span class="cicada-nymph-fetch-local-variable-1">:name</span> <span class="cicada-nymph-bool">true</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-1">:name</span> name-&gt;string
  <span class="cicada-nymph-fetch-local-variable-2">::string</span> string-equal? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-1">:name</span> <span class="cicada-nymph-bool">true</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-1">:counter</span> <span class="cicada-nymph-variable">*name-hash-table,size*</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-1">:name</span> <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-2">::string</span>
  <span class="cicada-nymph-fetch-local-variable-1">:number</span>
  <span class="cicada-nymph-fetch-local-variable-1">:counter</span> add1
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name-hash-table,insert</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length]
     -- name, true
     -- name, false &gt;&gt;</span>
  dup2 string-&gt;finite-carry-sum
  <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-title">name-hash-table</span>,insert,loop
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">string-&gt;name</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- name &gt;&gt;</span>
  <span class="cicada-nymph-title">name-hash-table</span>,insert
  false? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (string-&gt;name) *name-hash-table* is full!"</span> .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name-hash-table,report,orbit</span>
  <span class="cicada-nymph-comment">&lt;&lt; name, counter -- &gt;&gt;</span>
  over <span class="cicada-nymph-title">name</span>,get-orbit-length
  over less-than? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  over name-&gt;string string-&gt;finite-carry-sum
  over <span class="cicada-nymph-title">name-hash-table</span>,hash
  dup <span class="cicada-nymph-title">name</span>,get-orbiton
  <span class="cicada-nymph-comment">&lt;&lt; name, counter, new-name, orbiton &gt;&gt;</span>
  x|over|xxx name-&gt;string string-&gt;finite-carry-sum
  <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-title">name-hash-table</span>,hash
  equal? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"  {"</span> .s
    dup write-number
    <span class="cicada-nymph-string">"} "</span> .s
    name-&gt;string .s
    .l
  <span class="cicada-nymph-syntax-key-word">else</span>
    drop
  <span class="cicada-nymph-syntax-key-word">then</span>
  add1
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name-hash-table,report,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; name -- &gt;&gt;</span>
  dup <span class="cicada-nymph-variable">*name-hash-table,size*</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
    drop
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-title">name</span>,used? <span class="cicada-nymph-syntax-key-word">if</span>
  dup <span class="cicada-nymph-title">name</span>,no-collision? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-comment">&lt;&lt; * {index} string # orbit-lenght &gt;&gt;</span>
    <span class="cicada-nymph-string">"* {"</span> .s
    dup write-number
    <span class="cicada-nymph-string">"} "</span> .s
    dup name-&gt;string .s
    <span class="cicada-nymph-string">" # "</span> .s
    dup <span class="cicada-nymph-title">name</span>,get-orbit-length
    write-number
    .l
    dup <span class="cicada-nymph-number">1</span> <span class="cicada-nymph-title">name-hash-table</span>,report,orbit
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  add1
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name-hash-table,report</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-title">name-hash-table</span>,report,loop
  <span class="cicada-nymph-string">"* totally : "</span> .s
  <span class="cicada-nymph-variable">*name-hash-table,counter*</span> write-number
  .l
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name-hash-table,find-jo</span>
  <span class="cicada-nymph-comment">&lt;&lt; word[address, length]
     -- jo, true
     -- false &gt;&gt;</span>
  <span class="cicada-nymph-title">name-hash-table</span>,search <span class="cicada-nymph-syntax-key-word">if</span>
  <span class="cicada-nymph-syntax-key-word">else</span>
    drop
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-title">name</span>,used-as-jo? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-title">name</span>,get-jo
    <span class="cicada-nymph-bool">true</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  drop
  <span class="cicada-nymph-bool">false</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-number">100</span> <span class="cicada-nymph-number">1024</span> mul
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*global-naming-stack,size*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-number">3</span> <span class="cicada-nymph-variable">*jo-size*</span> mul
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*global-naming-stack,unit*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-variable">*global-naming-stack,size*</span>
<span class="cicada-nymph-variable">*global-naming-stack,unit*</span> mul <span class="cicada-nymph-allocate">allocate-memory</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*global-naming-stack*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-variable">*global-naming-stack*</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*global-naming-stack,pointer*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name-record,get-old-jo</span>
  <span class="cicada-nymph-comment">&lt;&lt; name-record -- old-jo &gt;&gt;</span>
  get
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name-record,set-old-jo</span>
  <span class="cicada-nymph-comment">&lt;&lt; old-jo, name-record -- &gt;&gt;</span>
  set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name-record,get-name</span>
  <span class="cicada-nymph-comment">&lt;&lt; name-record -- name &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jo-size*</span> add get
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name-record,set-name</span>
  <span class="cicada-nymph-comment">&lt;&lt; name, name-record -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jo-size*</span> add set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name-record,get-new-jo</span>
  <span class="cicada-nymph-comment">&lt;&lt; name-record -- new-jo &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">2</span> mul add get
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name-record,set-new-jo</span>
  <span class="cicada-nymph-comment">&lt;&lt; new-jo, name-record -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">2</span> mul add set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">global-naming-stack,record-jo</span>
  <span class="cicada-nymph-comment">&lt;&lt; jo, name -- &gt;&gt;</span>
  dup <span class="cicada-nymph-title">name</span>,get-jo
  <span class="cicada-nymph-variable">*global-naming-stack,pointer*</span> <span class="cicada-nymph-title">name-record</span>,set-old-jo
  dup2 <span class="cicada-nymph-title">name</span>,set-jo
  <span class="cicada-nymph-variable">*global-naming-stack,pointer*</span> <span class="cicada-nymph-title">name-record</span>,set-name
  <span class="cicada-nymph-variable">*global-naming-stack,pointer*</span> <span class="cicada-nymph-title">name-record</span>,set-new-jo
  <span class="cicada-nymph-variable">*global-naming-stack,unit*</span> <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*global-naming-stack,pointer*</span> add-set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">global-naming-stack,delete-last-record</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*global-naming-stack,unit*</span>
  <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*global-naming-stack,pointer*</span>
  sub-set
  <span class="cicada-nymph-variable">*global-naming-stack,pointer*</span> <span class="cicada-nymph-title">name-record</span>,get-old-jo
  <span class="cicada-nymph-variable">*global-naming-stack,pointer*</span> <span class="cicada-nymph-title">name-record</span>,get-name
  <span class="cicada-nymph-title">name</span>,set-jo
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">jo,find-name,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; jo, current-record
     -- name, true
     -- false &gt;&gt;</span>
  dup <span class="cicada-nymph-variable">*global-naming-stack*</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-variable">*global-naming-stack,unit*</span> sub
  dup <span class="cicada-nymph-save-local-variable-1">&gt;:name-record</span>
  over
  <span class="cicada-nymph-fetch-local-variable-1">:name-record</span> <span class="cicada-nymph-title">name-record</span>,get-new-jo equal? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-fetch-local-variable-1">:name-record</span> <span class="cicada-nymph-title">name-record</span>,get-name
    <span class="cicada-nymph-bool">true</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">jo,find-name</span>
  <span class="cicada-nymph-comment">&lt;&lt; jo
     -- name, true
     -- false &gt;&gt;</span>
  <span class="cicada-nymph-variable">*global-naming-stack,pointer*</span>
  <span class="cicada-nymph-title">jo</span>,find-name,loop
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name-hash-table,record-jo,by-link</span>
  <span class="cicada-nymph-comment">&lt;&lt; link -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:link</span>
  <span class="cicada-nymph-fetch-local-variable-1">:link</span> link-&gt;jo
  <span class="cicada-nymph-fetch-local-variable-1">:link</span> link-&gt;name-string string-&gt;name
  <span class="cicada-nymph-title">global-naming-stack</span>,record-jo
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">quote-word?</span>
  <span class="cicada-nymph-comment">&lt;&lt; word[address, length] -- bool &gt;&gt;</span>
  dup <span class="cicada-nymph-number">1</span> less-or-equal? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-title">string</span>,byte <span class="cicada-nymph-string">"'"</span> <span class="cicada-nymph-title">string</span>,byte equal?
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">make-jojo-syntax,quote</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length], word[address, length] --
     string[address, length] &gt;&gt;</span>
  <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">instruction</span>,literal
    <span class="cicada-nymph-title">jojo-area</span>,stay
  <span class="cicada-nymph-title">string</span>,byte-tail string-&gt;name
    <span class="cicada-nymph-title">jojo-area</span>,stay
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">more,rule-set,make-jojo</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*rule-set,make-jojo*</span>
  <span class="cicada-nymph-syntax-key-word">jo</span> quote-word? <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">make-jojo-syntax</span>,quote <span class="cicada-nymph-title">rule</span>,add
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>
<span class="cicada-nymph-title">more</span>,rule-set,make-jojo

<span class="cicada-nymph-number">10</span> <span class="cicada-nymph-number">1024</span> mul
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*awaiting-stack,size*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-number">4</span> <span class="cicada-nymph-variable">*jo-size*</span> mul
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*awaiting-stack,unit*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-variable">*awaiting-stack,size*</span>
<span class="cicada-nymph-variable">*awaiting-stack,unit*</span> mul <span class="cicada-nymph-allocate">allocate-memory</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*awaiting-stack*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-variable">*awaiting-stack*</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*awaiting-stack,pointer*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">action,get-function</span>
  <span class="cicada-nymph-comment">&lt;&lt; action -- function &gt;&gt;</span>
  get
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">action,set-function</span>
  <span class="cicada-nymph-comment">&lt;&lt; function, action -- &gt;&gt;</span>
  set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">action,get-argument-stack-pointer</span>
  <span class="cicada-nymph-comment">&lt;&lt; action -- argument-stack-pointer &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jo-size*</span> add get
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">action,set-argument-stack-pointer</span>
  <span class="cicada-nymph-comment">&lt;&lt; argument-stack-pointer, action -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jo-size*</span> add set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">action,get-return-stack-pointer</span>
  <span class="cicada-nymph-comment">&lt;&lt; action -- return-stack-pointer &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">2</span> mul add get
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">action,set-return-stack-pointer</span>
  <span class="cicada-nymph-comment">&lt;&lt; return-stack-pointer, action -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">2</span> mul add set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">action,get-name</span>
  <span class="cicada-nymph-comment">&lt;&lt; action -- name &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">3</span> mul add get
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">action,set-name</span>
  <span class="cicada-nymph-comment">&lt;&lt; name, action -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">3</span> mul add set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">drop-awaiting-stack</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*awaiting-stack,unit*</span> <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*awaiting-stack,pointer*</span> sub-set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">awaiting-stack,find,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; name, cursor
     -- action true
     -- false &gt;&gt;</span>
  dup <span class="cicada-nymph-variable">*awaiting-stack*</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-variable">*awaiting-stack,unit*</span> sub <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:name</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-title">action</span>,get-name
  <span class="cicada-nymph-fetch-local-variable-1">:name</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-1">:cursor</span>
    <span class="cicada-nymph-bool">true</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-1">:name</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span>
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">awaiting-stack,find</span>
  <span class="cicada-nymph-comment">&lt;&lt; name
     -- action true
     -- false &gt;&gt;</span>
  <span class="cicada-nymph-variable">*awaiting-stack,pointer*</span>
  <span class="cicada-nymph-title">awaiting-stack</span>,find,loop
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">await</span>
  <span class="cicada-nymph-comment">&lt;&lt; function, name -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:name</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:function</span>

  snapshot-the-stack-pointer
  <span class="cicada-nymph-variable">*the-stack-pointer-snapshot*</span> <span class="cicada-nymph-save-local-variable-1">&gt;:argument-stack-pointer</span>

  get-return-stack-pointer
  <span class="cicada-nymph-variable">*return-stack,unit*</span> <span class="cicada-nymph-number">2</span> mul sub <span class="cicada-nymph-save-local-variable-1">&gt;:return-stack-pointer</span>

  <span class="cicada-nymph-variable">*awaiting-stack,pointer*</span> <span class="cicada-nymph-save-local-variable-1">&gt;:action</span>
  <span class="cicada-nymph-variable">*awaiting-stack,unit*</span> <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*awaiting-stack,pointer*</span> add-set

  <span class="cicada-nymph-fetch-local-variable-1">:function</span>
  <span class="cicada-nymph-fetch-local-variable-1">:action</span>
  <span class="cicada-nymph-title">action</span>,set-function

  <span class="cicada-nymph-fetch-local-variable-1">:argument-stack-pointer</span>
  <span class="cicada-nymph-fetch-local-variable-1">:action</span>
  <span class="cicada-nymph-title">action</span>,set-argument-stack-pointer

  <span class="cicada-nymph-fetch-local-variable-1">:return-stack-pointer</span>
  <span class="cicada-nymph-fetch-local-variable-1">:action</span>
  <span class="cicada-nymph-title">action</span>,set-return-stack-pointer

  <span class="cicada-nymph-fetch-local-variable-1">:name</span>
  <span class="cicada-nymph-fetch-local-variable-1">:action</span>
  <span class="cicada-nymph-title">action</span>,set-name

  <span class="cicada-nymph-syntax-key-word">jo</span> drop-awaiting-stack
  <span class="cicada-nymph-fetch-local-variable-1">:return-stack-pointer</span>
  drop2
  <span class="cicada-nymph-comment">&lt;&lt; return-stack,insert-jo &gt;&gt;</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">action,apply</span>
  <span class="cicada-nymph-comment">&lt;&lt; action -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:action</span>
  <span class="cicada-nymph-fetch-local-variable-1">:action</span> <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*awaiting-stack,pointer*</span> set
  <span class="cicada-nymph-fetch-local-variable-1">:action</span> <span class="cicada-nymph-title">action</span>,get-return-stack-pointer
  <span class="cicada-nymph-fetch-local-variable-1">:action</span> <span class="cicada-nymph-title">action</span>,get-function
  <span class="cicada-nymph-end">apply-with-return-point</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">action,reset-the-stack</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*awaiting-stack,pointer*</span> <span class="cicada-nymph-title">action</span>,get-argument-stack-pointer
  set-argument-stack-pointer
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">awake</span>
  <span class="cicada-nymph-comment">&lt;&lt; name -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:name</span>
  <span class="cicada-nymph-fetch-local-variable-1">:name</span> <span class="cicada-nymph-title">awaiting-stack</span>,find <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-title">action</span>,apply
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-string">"* (awake) can not find action in awaiting-stack by : "</span> .s <span class="cicada-nymph-fetch-local-variable-1">:name</span> name-&gt;string .s .l
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-number">1024</span> <span class="cicada-nymph-variable">*jo-size*</span> mul
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*rule-set,eval-word,size*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-comment">&lt;&lt; for cursor &gt;&gt;</span>
<span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-allocate">allocate-memory</span> drop

<span class="cicada-nymph-variable">*rule-set,eval-word,size*</span>
<span class="cicada-nymph-allocate">allocate-memory</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*rule-set,eval-word*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-variable">*rule-set,eval-word*</span>
<span class="cicada-nymph-variable">*rule-set,eval-word*</span> <span class="cicada-nymph-variable">*jo-size*</span> sub
set

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">eval-word</span>
  <span class="cicada-nymph-comment">&lt;&lt; word[address, length] -- unknown &gt;&gt;</span>
  dup2 find-syntax <span class="cicada-nymph-syntax-key-word">if</span>
    apply
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup2
  <span class="cicada-nymph-title">name-hash-table</span>,find-jo <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-comment">&lt;&lt; function &amp; primitive-function &amp; variable &gt;&gt;</span>
    xx|swap|x drop2
    apply
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-string">"* (eval-word) meets undefined word : "</span> .s
  .s .l
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">syntax,bye,basic-REPL</span>
  <span class="cicada-nymph-comment">&lt;&lt; word:bye -- &gt;&gt;</span>
  drop2
  <span class="cicada-nymph-quote">'bye,basic-REPL</span> <span class="cicada-nymph-end">awake</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">bye,basic-REPL</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-title">action</span>,reset-the-stack
  drop-syntax-stack
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">basic-REPL,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; unknown -- unknown &gt;&gt;</span>
  read-word
  eval-word
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">basic-REPL</span>
  <span class="cicada-nymph-comment">&lt;&lt; unknown -- unknown &gt;&gt;</span>
  <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">bye</span>,basic-REPL
  <span class="cicada-nymph-quote">'bye,basic-REPL</span> <span class="cicada-nymph-await">await</span>
  <span class="cicada-nymph-variable">*rule-set,eval-word*</span> push-syntax-stack
  <span class="cicada-nymph-title">basic-REPL</span>,loop
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">remove-byte!,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; cursor, length, byte -- cursor &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:byte</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
  <span class="cicada-nymph-fetch-local-variable-1">:length</span> zero? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-1">:cursor</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> get-byte <span class="cicada-nymph-fetch-local-variable-1">:byte</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> add1 <span class="cicada-nymph-fetch-local-variable-1">:length</span> sub1
    <span class="cicada-nymph-fetch-local-variable-1">:cursor</span>
    string-&gt;buffer!
    <span class="cicada-nymph-fetch-local-variable-1">:cursor</span>
    <span class="cicada-nymph-fetch-local-variable-1">:length</span> sub1
    <span class="cicada-nymph-fetch-local-variable-1">:byte</span>
  <span class="cicada-nymph-syntax-key-word">else</span>
    <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> add1
    <span class="cicada-nymph-fetch-local-variable-1">:length</span> sub1
    <span class="cicada-nymph-fetch-local-variable-1">:byte</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">remove-byte!</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length], byte -- string[address, length] &gt;&gt;</span>
  x|over|xx <span class="cicada-nymph-save-local-variable-1">&gt;:address</span>
  <span class="cicada-nymph-title">remove-byte!</span>,loop <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
  <span class="cicada-nymph-fetch-local-variable-1">:address</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:address</span> sub
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">latin-byte?</span>
  <span class="cicada-nymph-comment">&lt;&lt; byte -- bool &gt;&gt;</span>
  dup <span class="cicada-nymph-string">"A"</span> <span class="cicada-nymph-title">string</span>,byte less-than? <span class="cicada-nymph-syntax-key-word">if</span>
    drop <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-string">"Z"</span> <span class="cicada-nymph-title">string</span>,byte less-or-equal? <span class="cicada-nymph-syntax-key-word">if</span>
    drop <span class="cicada-nymph-bool">true</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-string">"a"</span> <span class="cicada-nymph-title">string</span>,byte less-than? <span class="cicada-nymph-syntax-key-word">if</span>
    drop <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-string">"z"</span> <span class="cicada-nymph-title">string</span>,byte less-or-equal? <span class="cicada-nymph-syntax-key-word">if</span>
    drop <span class="cicada-nymph-bool">true</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  drop <span class="cicada-nymph-bool">false</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">latin-byte-&gt;number</span>
  <span class="cicada-nymph-comment">&lt;&lt; latin-byte -- number &gt;&gt;</span>
  dup <span class="cicada-nymph-string">"A"</span> <span class="cicada-nymph-title">string</span>,byte less-than? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (latin-byte-&gt;number) the argument must be a latin-byte"</span> .s .l
    <span class="cicada-nymph-string">"  but the following byte is less-than 'A' : "</span> .s
    .i .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-string">"Z"</span> <span class="cicada-nymph-title">string</span>,byte less-or-equal? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"A"</span> <span class="cicada-nymph-title">string</span>,byte
    sub
    <span class="cicada-nymph-number">10</span> add
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-string">"a"</span> <span class="cicada-nymph-title">string</span>,byte less-than? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (latin-byte-&gt;number) the argument must be a latin-byte"</span> .s .l
    <span class="cicada-nymph-string">"  but the following byte is less-than 'a' but greater-then 'Z' : "</span> .s
    .i .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-string">"z"</span> <span class="cicada-nymph-title">string</span>,byte less-or-equal? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"a"</span> <span class="cicada-nymph-title">string</span>,byte
    sub
    <span class="cicada-nymph-number">10</span> add
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-string">"* (latin-byte-&gt;number) the argument must be a latin-byte"</span> .s .l
  <span class="cicada-nymph-string">"  but the following byte is greater-then 'z' : "</span> .s
  .i .l
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">number-&gt;latin-byte</span>
  <span class="cicada-nymph-comment">&lt;&lt; number -- latin-byte &gt;&gt;</span>
  <span class="cicada-nymph-number">10</span> sub
  <span class="cicada-nymph-string">"a"</span> <span class="cicada-nymph-title">string</span>,byte
  add
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">wild-digit-string?</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- bool &gt;&gt;</span>
  dup zero? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2 <span class="cicada-nymph-bool">true</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  over get-byte
  dup digit-byte?
  swap latin-byte?
  or <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-title">string</span>,byte-tail
    <span class="cicada-nymph-end">loop</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  drop2
  <span class="cicada-nymph-bool">false</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">wild-integer-string?</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- bool &gt;&gt;</span>
  dup zero? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2 <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup2 <span class="cicada-nymph-title">string</span>,byte
  <span class="cicada-nymph-string">"-"</span> <span class="cicada-nymph-title">string</span>,byte
  equal? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-title">string</span>,byte-tail
    wild-digit-string?
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  wild-digit-string?
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">base#wild-integer-string?</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- bool &gt;&gt;</span>
  <span class="cicada-nymph-number">128</span> <span class="cicada-nymph-allocate">allocate-local-memory</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:string-address</span>
  tuck
  <span class="cicada-nymph-fetch-local-variable-1">:string-address</span>
  string-&gt;buffer!
  <span class="cicada-nymph-fetch-local-variable-1">:string-address</span> swap
  <span class="cicada-nymph-string">"_"</span> <span class="cicada-nymph-title">string</span>,byte
  remove-byte!
  <span class="cicada-nymph-save-local-variable-1">&gt;:new-string-length</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:new-string-address</span>
  <span class="cicada-nymph-comment">&lt;&lt; dup2 .s .l 0 end &gt;&gt;</span>
  <span class="cicada-nymph-fetch-local-variable-1">:new-string-address</span>
  <span class="cicada-nymph-fetch-local-variable-1">:new-string-length</span>
  <span class="cicada-nymph-string">"#"</span> <span class="cicada-nymph-title">string</span>,byte
  <span class="cicada-nymph-title">string</span>,find-byte <span class="cicada-nymph-syntax-key-word">if</span>
  <span class="cicada-nymph-syntax-key-word">else</span>
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:address-of-#</span>
  <span class="cicada-nymph-fetch-local-variable-1">:new-string-address</span>
  <span class="cicada-nymph-fetch-local-variable-1">:address-of-#</span> <span class="cicada-nymph-fetch-local-variable-1">:new-string-address</span> sub
  <span class="cicada-nymph-save-local-variable-2">&gt;::base-string</span>
  <span class="cicada-nymph-fetch-local-variable-1">:address-of-#</span> add1
  <span class="cicada-nymph-fetch-local-variable-1">:address-of-#</span> <span class="cicada-nymph-fetch-local-variable-1">:new-string-address</span> sub add1
  <span class="cicada-nymph-fetch-local-variable-1">:new-string-length</span> swap sub
  <span class="cicada-nymph-save-local-variable-2">&gt;::wild-integer-string</span>
  <span class="cicada-nymph-fetch-local-variable-2">::base-string</span> digit-string?
  <span class="cicada-nymph-fetch-local-variable-2">::base-string</span> empty-string? not
  and <span class="cicada-nymph-syntax-key-word">if</span>
  <span class="cicada-nymph-syntax-key-word">else</span>
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-2">::wild-integer-string</span> wild-integer-string?
  <span class="cicada-nymph-fetch-local-variable-2">::wild-integer-string</span> empty-string? not
  and <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-bool">true</span>
  <span class="cicada-nymph-syntax-key-word">else</span>
    <span class="cicada-nymph-bool">false</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">base#wild-integer-string-&gt;base-string</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- string[address, length] &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:address</span>
  <span class="cicada-nymph-fetch-local-variable-1">:address</span>
  <span class="cicada-nymph-fetch-local-variable-1">:length</span>
  <span class="cicada-nymph-string">"#"</span> <span class="cicada-nymph-title">string</span>,byte
  <span class="cicada-nymph-title">string</span>,find-byte <span class="cicada-nymph-syntax-key-word">if</span>
  <span class="cicada-nymph-syntax-key-word">else</span>
    <span class="cicada-nymph-string">"* (base#wild-integer-string-&gt;base-string)"</span> .s .l
    <span class="cicada-nymph-string">"  the argument must be a base#wild-integer-string"</span> .s .l
    <span class="cicada-nymph-string">"  but the following string does not even have a '#' in it :"</span> .s .l
    <span class="cicada-nymph-string">"  "</span> .s
    <span class="cicada-nymph-fetch-local-variable-1">:address</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span> .s .l
    <span class="cicada-nymph-comment">&lt;&lt; to balance the argument-stack or not ??? &gt;&gt;</span>
    <span class="cicada-nymph-comment">&lt;&lt; :address :length &gt;&gt;</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:address-of-#</span>
  <span class="cicada-nymph-fetch-local-variable-1">:address</span>
  <span class="cicada-nymph-fetch-local-variable-1">:address-of-#</span> <span class="cicada-nymph-fetch-local-variable-1">:address</span> sub
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">base#wild-integer-string-&gt;wild-integer-string</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- string[address, length] &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:address</span>
  <span class="cicada-nymph-fetch-local-variable-1">:address</span>
  <span class="cicada-nymph-fetch-local-variable-1">:length</span>
  <span class="cicada-nymph-string">"#"</span> <span class="cicada-nymph-title">string</span>,byte
  <span class="cicada-nymph-title">string</span>,find-byte <span class="cicada-nymph-syntax-key-word">if</span>
  <span class="cicada-nymph-syntax-key-word">else</span>
    <span class="cicada-nymph-string">"* (base#wild-integer-string-&gt;wild-integer-string)"</span> .s .l
    <span class="cicada-nymph-string">"  the argument must be a base#wild-integer-string"</span> .s .l
    <span class="cicada-nymph-string">"  but the following string does not even have a '#' in it :"</span> .s .l
    <span class="cicada-nymph-string">"  "</span> .s
    <span class="cicada-nymph-fetch-local-variable-1">:address</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span> .s .l
    <span class="cicada-nymph-comment">&lt;&lt; to balance the argument-stack or not ??? &gt;&gt;</span>
    <span class="cicada-nymph-comment">&lt;&lt; :address :length &gt;&gt;</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:address-of-#</span>
  <span class="cicada-nymph-fetch-local-variable-1">:address-of-#</span> add1
  <span class="cicada-nymph-fetch-local-variable-1">:address-of-#</span> <span class="cicada-nymph-fetch-local-variable-1">:address</span> sub add1
  <span class="cicada-nymph-fetch-local-variable-1">:length</span> swap sub
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">wild-integer-string-&gt;integer,with-base,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length], base, sum, counter -- integer &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:counter</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:sum</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:base</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:address</span>
  <span class="cicada-nymph-fetch-local-variable-1">:length</span> zero? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-1">:sum</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-1">:address</span> get-byte <span class="cicada-nymph-save-local-variable-1">&gt;:byte</span>
  <span class="cicada-nymph-fetch-local-variable-1">:byte</span> digit-byte? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-1">:byte</span> digit-byte-&gt;number
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-1">:byte</span> latin-byte? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-1">:byte</span> latin-byte-&gt;number
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-1">:base</span> <span class="cicada-nymph-fetch-local-variable-1">:counter</span> power
  mul
  <span class="cicada-nymph-fetch-local-variable-1">:sum</span> add
  <span class="cicada-nymph-save-local-variable-1">&gt;:sum</span>
  <span class="cicada-nymph-fetch-local-variable-1">:address</span> add1
  <span class="cicada-nymph-fetch-local-variable-1">:length</span> sub1
  <span class="cicada-nymph-fetch-local-variable-1">:base</span>
  <span class="cicada-nymph-fetch-local-variable-1">:sum</span>
  <span class="cicada-nymph-fetch-local-variable-1">:counter</span> add1
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">wild-integer-string-&gt;integer,with-base</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length], base -- integer &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:base</span>
  dup zero? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-number">0</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup2 <span class="cicada-nymph-title">string</span>,byte
  <span class="cicada-nymph-string">"-"</span> <span class="cicada-nymph-title">string</span>,byte
  equal? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-title">string</span>,byte-tail
    <span class="cicada-nymph-number">-1</span> <span class="cicada-nymph-save-local-variable-1">&gt;:sign</span>
  <span class="cicada-nymph-syntax-key-word">else</span>
    <span class="cicada-nymph-number">1</span> <span class="cicada-nymph-save-local-variable-1">&gt;:sign</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::string</span>
  <span class="cicada-nymph-fetch-local-variable-2">::string</span> string-reverse!
  <span class="cicada-nymph-fetch-local-variable-1">:base</span>
  <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-title">wild-integer-string-&gt;integer</span>,with-base,loop
  <span class="cicada-nymph-fetch-local-variable-1">:sign</span> mul
  <span class="cicada-nymph-fetch-local-variable-2">::string</span> string-reverse!
  drop2
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">base#wild-integer-string-&gt;integer</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- integer &gt;&gt;</span>
  <span class="cicada-nymph-number">128</span> <span class="cicada-nymph-allocate">allocate-local-memory</span>
    <span class="cicada-nymph-save-local-variable-1">&gt;:address</span>
  tuck <span class="cicada-nymph-fetch-local-variable-1">:address</span> string-&gt;buffer!
    <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>
  <span class="cicada-nymph-fetch-local-variable-1">:address</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span>
  <span class="cicada-nymph-string">"_"</span> <span class="cicada-nymph-title">string</span>,byte remove-byte!
    <span class="cicada-nymph-save-local-variable-2">&gt;::string</span>
  <span class="cicada-nymph-fetch-local-variable-2">::string</span>
  base#wild-integer-string-&gt;base-string
    <span class="cicada-nymph-save-local-variable-2">&gt;::base-string</span>
  <span class="cicada-nymph-fetch-local-variable-2">::string</span>
  base#wild-integer-string-&gt;wild-integer-string
    <span class="cicada-nymph-save-local-variable-2">&gt;::wild-integer-string</span>
  <span class="cicada-nymph-fetch-local-variable-2">::base-string</span>
  digit-string-&gt;number
    <span class="cicada-nymph-save-local-variable-1">&gt;:base</span>
  <span class="cicada-nymph-fetch-local-variable-2">::wild-integer-string</span>
  <span class="cicada-nymph-fetch-local-variable-1">:base</span>
  <span class="cicada-nymph-title">wild-integer-string-&gt;integer</span>,with-base
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">.#,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; number, base, cursor -- cursor &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:base</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:number</span>
  <span class="cicada-nymph-fetch-local-variable-1">:number</span> zero? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-1">:cursor</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-1">:number</span>
  <span class="cicada-nymph-fetch-local-variable-1">:base</span>
  divmod <span class="cicada-nymph-save-local-variable-1">&gt;:mod</span> <span class="cicada-nymph-save-local-variable-1">&gt;:div</span>
  <span class="cicada-nymph-fetch-local-variable-1">:mod</span> <span class="cicada-nymph-number">10</span> less-than? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-1">:mod</span> number-&gt;digit-byte
  <span class="cicada-nymph-syntax-key-word">else</span>
    <span class="cicada-nymph-fetch-local-variable-1">:mod</span> number-&gt;latin-byte
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span>
  set-byte
  <span class="cicada-nymph-fetch-local-variable-1">:div</span>
  <span class="cicada-nymph-fetch-local-variable-1">:base</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> add1
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">.#</span>
  <span class="cicada-nymph-comment">&lt;&lt; integer, base -- &gt;&gt;</span>
  over zero? <span class="cicada-nymph-syntax-key-word">if</span>
    drop .i
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">36</span> greater-than?
  over <span class="cicada-nymph-number">2</span> less-than?
  or <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (.#) the base "</span> .s .i <span class="cicada-nymph-string">" is not valid to write a number"</span> .s .l
    <span class="cicada-nymph-string">"  a base should in between 2 and 36 includingly"</span> .s .l
    <span class="cicada-nymph-string">"  the integer to be written is "</span> .s .i .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup .i
  <span class="cicada-nymph-string">"#"</span> .s
  over negative? <span class="cicada-nymph-syntax-key-word">if</span>
    swap negate swap
    <span class="cicada-nymph-string">"-"</span> .s
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-number">128</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:buffer</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
  <span class="cicada-nymph-title">.#</span>,loop <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> sub
  string-reverse! .s
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">.#2</span>  <span class="cicada-nymph-number">2</span>  .# <span class="cicada-nymph-string">" "</span> .s <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">.#8</span>  <span class="cicada-nymph-number">8</span>  .# <span class="cicada-nymph-string">" "</span> .s <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">.#16</span> <span class="cicada-nymph-number">16</span> .# <span class="cicada-nymph-string">" "</span> .s <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">number-&gt;gamber</span>
  <span class="cicada-nymph-comment">&lt;&lt; number -- gamber &gt;&gt;</span>
  dup <span class="cicada-nymph-number">1</span> bit-right
  bit-xor
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">gamber-&gt;number,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; gamber, number, cursor -- number &gt;&gt;</span>
  dup negative? <span class="cicada-nymph-syntax-key-word">if</span>
    drop
    swap drop
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:number</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:gamber</span>
  <span class="cicada-nymph-fetch-local-variable-1">:gamber</span> <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> get-bit
  <span class="cicada-nymph-fetch-local-variable-1">:number</span> <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> add1 get-bit
  xor <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-1">:number</span> <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> set-bit <span class="cicada-nymph-save-local-variable-1">&gt;:number</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-1">:gamber</span>
  <span class="cicada-nymph-fetch-local-variable-1">:number</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> sub1
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">gamber-&gt;number</span>
  <span class="cicada-nymph-comment">&lt;&lt; gamber -- number &gt;&gt;</span>
  dup find-highest-set-bit
  dup negative? <span class="cicada-nymph-syntax-key-word">if</span>
    drop
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-number">0</span> over set-bit
  swap sub1
  <span class="cicada-nymph-title">gamber-&gt;number</span>,loop
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">init,rule-set,basic-REPL</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*rule-set,eval-word*</span>
  dup <span class="cicada-nymph-syntax-key-word">jo</span> integer-string? <span class="cicada-nymph-syntax-key-word">jo</span> string-&gt;integer <span class="cicada-nymph-title">rule</span>,add
      <span class="cicada-nymph-syntax-key-word">jo</span> base#wild-integer-string? <span class="cicada-nymph-syntax-key-word">jo</span> base#wild-integer-string-&gt;integer <span class="cicada-nymph-title">rule</span>,add
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>
<span class="cicada-nymph-title">init</span>,rule-set,basic-REPL

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;word&gt;?</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- bool &gt;&gt;</span>
  dup <span class="cicada-nymph-number">2</span> less-or-equal? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup2 <span class="cicada-nymph-title">string-end</span>,byte
  <span class="cicada-nymph-string">"&gt;"</span> <span class="cicada-nymph-title">string-end</span>,byte equal? not <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-title">string</span>,byte
  <span class="cicada-nymph-string">"&lt;"</span> <span class="cicada-nymph-title">string</span>,byte equal?
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">make-jojo,dispatch-word</span>
  <span class="cicada-nymph-comment">&lt;&lt; jo, string[address, length], word[address, length] --
     jo, string[address, length] &gt;&gt;</span>
  dup2 find-syntax <span class="cicada-nymph-syntax-key-word">if</span>
    apply
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup2 <span class="cicada-nymph-title">name-hash-table</span>,find-jo <span class="cicada-nymph-syntax-key-word">if</span>
    xx|swap|x drop2
    <span class="cicada-nymph-title">jojo-area</span>,stay
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-string">"* (make-jojo) meets undefined word : "</span> .s .s .l
  <span class="cicada-nymph-title">global-naming-stack</span>,delete-last-record
  <span class="cicada-nymph-quote">'undo-make-jojo</span> <span class="cicada-nymph-end">awake</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">make-jojo,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; jo, string[address, length] -- &gt;&gt;</span>
  dup2 space-string? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    drop
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup2
  <span class="cicada-nymph-title">string</span>,word-tail
  xx|swap|xx
  <span class="cicada-nymph-title">string</span>,word
  <span class="cicada-nymph-title">make-jojo</span>,dispatch-word
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">make-jojo</span>
  <span class="cicada-nymph-comment">&lt;&lt; jo, string[address, length] -- &gt;&gt;</span>
  <span class="cicada-nymph-title">local-variable-table</span>,clear
  <span class="cicada-nymph-variable">*rule-set,make-jojo*</span>
  push-syntax-stack
  <span class="cicada-nymph-title">make-jojo</span>,loop
  drop-syntax-stack
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">init,name-hash-table,by-link</span>
  <span class="cicada-nymph-comment">&lt;&lt; link -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:link</span>
  <span class="cicada-nymph-fetch-local-variable-1">:link</span> zero? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-1">:link</span> link-&gt;next-link <span class="cicada-nymph-syntax-key-word">recur</span>
  <span class="cicada-nymph-fetch-local-variable-1">:link</span> <span class="cicada-nymph-title">name-hash-table</span>,record-jo,by-link
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">n-string-&gt;buffer!,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; string-1[address, length],
     ...
     string-2[address, length],
     buffer, n, cursor
     -- length &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:n</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:buffer</span>
  <span class="cicada-nymph-fetch-local-variable-1">:n</span> zero? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
    <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> sub
    string-reverse!
    swap drop
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup zero? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
    <span class="cicada-nymph-fetch-local-variable-1">:n</span> sub1
    <span class="cicada-nymph-fetch-local-variable-1">:cursor</span>
    <span class="cicada-nymph-end">loop</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup2 add sub1 get-byte <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> set-byte
  sub1
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
  <span class="cicada-nymph-fetch-local-variable-1">:n</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> add1
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">n-string-&gt;buffer!</span>
  <span class="cicada-nymph-comment">&lt;&lt; string-1[address, length],
     ...
     string-2[address, length],
     buffer, n
     -- length &gt;&gt;</span>
  over <span class="cicada-nymph-title">n-string-&gt;buffer!</span>,loop
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">undo-make-jojo</span>
  <span class="cicada-nymph-title">action</span>,reset-the-stack
  <span class="cicada-nymph-comment">&lt;&lt; *string-area,current-free-address*
     *jojo-area,current-free-address*
     string[address, length] &gt;&gt;</span>
  <span class="cicada-nymph-string">"  the following jojo is not made :"</span> .s .l
  <span class="cicada-nymph-string">":"</span> .s
  .s .l
  <span class="cicada-nymph-string">";"</span> .s .l
  <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*jojo-area,current-free-address*</span> set
  <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*string-area,current-free-address*</span> set
  drop-syntax-stack
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">define-function</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*string-area,current-free-address*</span> xx|swap|x
  <span class="cicada-nymph-variable">*jojo-area,current-free-address*</span> xx|swap|x
  <span class="cicada-nymph-comment">&lt;&lt; *string-area,current-free-address*
     *jojo-area,current-free-address*
     string[address, length] &gt;&gt;</span>
  <span class="cicada-nymph-syntax-key-word">jo</span> undo-make-jojo
  <span class="cicada-nymph-quote">'undo-make-jojo</span> <span class="cicada-nymph-await">await</span>

  dup2 <span class="cicada-nymph-save-local-variable-2">&gt;::string</span>

  <span class="cicada-nymph-fetch-local-variable-2">::string</span> <span class="cicada-nymph-title">string</span>,word <span class="cicada-nymph-save-local-variable-2">&gt;::title</span>
  <span class="cicada-nymph-fetch-local-variable-2">::string</span> <span class="cicada-nymph-title">string</span>,word-tail <span class="cicada-nymph-title">string</span>,word <span class="cicada-nymph-save-local-variable-2">&gt;::name</span>
  <span class="cicada-nymph-fetch-local-variable-2">::string</span> <span class="cicada-nymph-title">string</span>,word-tail <span class="cicada-nymph-title">string</span>,word-tail <span class="cicada-nymph-save-local-variable-2">&gt;::body</span>

  <span class="cicada-nymph-fetch-local-variable-2">::title</span> <span class="cicada-nymph-string">" "</span> <span class="cicada-nymph-fetch-local-variable-2">::name</span>
  <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> dup <span class="cicada-nymph-save-local-variable-1">&gt;:buffer</span>
  <span class="cicada-nymph-number">3</span> n-string-&gt;buffer! <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span> <span class="cicada-nymph-save-local-variable-2">&gt;::name</span>
  <span class="cicada-nymph-fetch-local-variable-2">::title</span> &lt;word&gt;? not <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-2">::string</span> <span class="cicada-nymph-title">string</span>,word <span class="cicada-nymph-save-local-variable-2">&gt;::name</span>
    <span class="cicada-nymph-fetch-local-variable-2">::string</span> <span class="cicada-nymph-title">string</span>,word-tail <span class="cicada-nymph-save-local-variable-2">&gt;::body</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-variable">*explainer,function*</span> <span class="cicada-nymph-number">0</span>
  make-jo-head <span class="cicada-nymph-save-local-variable-1">&gt;:jo</span>

  <span class="cicada-nymph-fetch-local-variable-1">:jo</span>
  <span class="cicada-nymph-fetch-local-variable-2">::name</span> string-&gt;name
  <span class="cicada-nymph-title">global-naming-stack</span>,record-jo

  <span class="cicada-nymph-variable">*jojo-area,current-free-address*</span> <span class="cicada-nymph-save-local-variable-1">&gt;:old-address</span>

  <span class="cicada-nymph-fetch-local-variable-1">:jo</span> <span class="cicada-nymph-fetch-local-variable-2">::body</span> make-jojo

  <span class="cicada-nymph-variable">*jojo-area,current-free-address*</span>
  <span class="cicada-nymph-fetch-local-variable-1">:old-address</span> sub <span class="cicada-nymph-variable">*jo-size*</span> div
  <span class="cicada-nymph-fetch-local-variable-1">:jo</span> <span class="cicada-nymph-title">jo</span>,set-length

  drop2
  drop
  drop
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-variable">*link*</span> <span class="cicada-nymph-title">init</span>,name-hash-table,by-link
basic-REPL

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">define-variable,with-tos</span>
  <span class="cicada-nymph-comment">&lt;&lt; value, string[address, length] -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::string</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:value</span>

  <span class="cicada-nymph-fetch-local-variable-2">::string</span> <span class="cicada-nymph-title">string</span>,word <span class="cicada-nymph-save-local-variable-2">&gt;::title</span>
  <span class="cicada-nymph-fetch-local-variable-2">::string</span> <span class="cicada-nymph-title">string</span>,word-tail <span class="cicada-nymph-title">string</span>,word <span class="cicada-nymph-save-local-variable-2">&gt;::name</span>

  <span class="cicada-nymph-fetch-local-variable-2">::title</span> <span class="cicada-nymph-string">" "</span> <span class="cicada-nymph-fetch-local-variable-2">::name</span>
  <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> dup <span class="cicada-nymph-save-local-variable-1">&gt;:buffer</span>
  <span class="cicada-nymph-number">3</span> n-string-&gt;buffer! <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span> <span class="cicada-nymph-save-local-variable-2">&gt;::name</span>
  <span class="cicada-nymph-fetch-local-variable-2">::title</span> &lt;word&gt;? not <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-2">::title</span> <span class="cicada-nymph-save-local-variable-2">&gt;::name</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-variable">*explainer,variable*</span> <span class="cicada-nymph-number">0</span>
  make-jo-head <span class="cicada-nymph-save-local-variable-1">&gt;:jo</span>

  <span class="cicada-nymph-fetch-local-variable-1">:jo</span>
  <span class="cicada-nymph-fetch-local-variable-2">::name</span> string-&gt;name
  <span class="cicada-nymph-title">global-naming-stack</span>,record-jo

  <span class="cicada-nymph-number">1</span> <span class="cicada-nymph-fetch-local-variable-1">:jo</span> <span class="cicada-nymph-title">jo</span>,set-length

  <span class="cicada-nymph-fetch-local-variable-1">:value</span> <span class="cicada-nymph-title">jojo-area</span>,stay
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">alias</span>
  <span class="cicada-nymph-comment">&lt;&lt; alias[address, length], name[address, length] -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::name</span> <span class="cicada-nymph-save-local-variable-2">&gt;::alias</span>
  <span class="cicada-nymph-fetch-local-variable-2">::name</span> <span class="cicada-nymph-title">name-hash-table</span>,find-jo <span class="cicada-nymph-syntax-key-word">if</span>
  <span class="cicada-nymph-syntax-key-word">else</span>
    <span class="cicada-nymph-string">"* (alias) fail"</span> .s .l
    <span class="cicada-nymph-string">"  because can not find name in name-hash-table"</span> .s .l
    <span class="cicada-nymph-string">"  alias : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::alias</span> .s .l
    <span class="cicada-nymph-string">"  name : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::name</span> .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:jo</span>
  <span class="cicada-nymph-fetch-local-variable-1">:jo</span>
  <span class="cicada-nymph-fetch-local-variable-2">::alias</span> string-&gt;name
  <span class="cicada-nymph-title">global-naming-stack</span>,record-jo
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name-hash-table,find-jo,with-title</span>
  <span class="cicada-nymph-comment">&lt;&lt; title[address, length], word[address, length]
     -- jo, true
     -- false &gt;&gt;</span>
  <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:buffer</span>
  <span class="cicada-nymph-string">" "</span> xx|swap|xx
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
  <span class="cicada-nymph-number">3</span> n-string-&gt;buffer! <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
  <span class="cicada-nymph-fetch-local-variable-1">:length</span>
  <span class="cicada-nymph-title">name-hash-table</span>,search <span class="cicada-nymph-syntax-key-word">if</span>
  <span class="cicada-nymph-syntax-key-word">else</span>
    drop
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-title">name</span>,used-as-jo? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-title">name</span>,get-jo
    <span class="cicada-nymph-bool">true</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  drop
  <span class="cicada-nymph-bool">false</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">syntax,title,make-jojo</span>
  <span class="cicada-nymph-comment">&lt;&lt; jo, string[address, length], &lt;title&gt;[address, length] --
     jo, string[address, length] &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::title</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::string</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:jo</span>
  <span class="cicada-nymph-fetch-local-variable-2">::title</span> <span class="cicada-nymph-fetch-local-variable-2">::string</span> <span class="cicada-nymph-title">string</span>,word
  <span class="cicada-nymph-title">name-hash-table</span>,find-jo,with-title <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-title">jojo-area</span>,stay
  <span class="cicada-nymph-syntax-key-word">else</span>
    <span class="cicada-nymph-string">"* (syntax,title,make-jojo) meet undefined"</span> .s .l
    <span class="cicada-nymph-string">"  title : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::title</span> .s .l
    <span class="cicada-nymph-string">"  name  : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::string</span> <span class="cicada-nymph-title">string</span>,word .s .l
    <span class="cicada-nymph-title">global-naming-stack</span>,delete-last-record
    <span class="cicada-nymph-quote">'undo-make-jojo</span> <span class="cicada-nymph-end">awake</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-1">:jo</span>
  <span class="cicada-nymph-fetch-local-variable-2">::string</span> <span class="cicada-nymph-title">string</span>,word-tail
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">more,rule-set,make-jojo</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*rule-set,make-jojo*</span>
  <span class="cicada-nymph-syntax-key-word">jo</span> &lt;word&gt;? <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">syntax</span>,title,make-jojo <span class="cicada-nymph-title">rule</span>,add
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>
<span class="cicada-nymph-title">more</span>,rule-set,make-jojo

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">string,find-word</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length], word[address, length]
     -- sub-string[address, length], true
     -- false &gt;&gt;</span>
  xx|over|xx space-string? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2 drop2
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  xx|over|xx <span class="cicada-nymph-title">string</span>,word
  xx|over|xx string-equal? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-bool">true</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  xx|swap|xx <span class="cicada-nymph-title">string</span>,word-tail
  xx|swap|xx
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">word:square-bar?</span>
  <span class="cicada-nymph-comment">&lt;&lt; word[address, length] -- bool &gt;&gt;</span>
  <span class="cicada-nymph-string">"["</span> string-equal?
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">word:square-ket?</span>
  <span class="cicada-nymph-comment">&lt;&lt; word[address, length] -- bool &gt;&gt;</span>
  <span class="cicada-nymph-string">"]"</span> string-equal?
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;make-jojo-syntax&gt; square-bar</span>
  <span class="cicada-nymph-comment">&lt;&lt; jo, string[address, length], word:square-bar --
     jo, string[address, length] &gt;&gt;</span>
  drop2
  <span class="cicada-nymph-save-local-variable-2">&gt;::string</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:jo</span>

  <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">instruction</span>,branch
    <span class="cicada-nymph-title">jojo-area</span>,stay
  <span class="cicada-nymph-variable">*jojo-area,current-free-address*</span> <span class="cicada-nymph-save-local-variable-1">&gt;:offset-address</span>
  <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-title">jojo-area</span>,stay

  <span class="cicada-nymph-variable">*explainer,function*</span> <span class="cicada-nymph-number">0</span>
  make-jo-head <span class="cicada-nymph-save-local-variable-1">&gt;:new-jo</span>

  <span class="cicada-nymph-fetch-local-variable-1">:offset-address</span>
  <span class="cicada-nymph-fetch-local-variable-1">:new-jo</span>
  <span class="cicada-nymph-fetch-local-variable-1">:jo</span>
  <span class="cicada-nymph-fetch-local-variable-2">::string</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;make-jojo-syntax&gt; square-ket</span>
  <span class="cicada-nymph-comment">&lt;&lt; offset-address, new-jo,
     jo, string[address, length], word:square-ket --
     jo, string[address, length] &gt;&gt;</span>
  drop2
  <span class="cicada-nymph-save-local-variable-2">&gt;::string</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:jo</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:new-jo</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:offset-address</span>

  <span class="cicada-nymph-variable">*jojo-area,current-free-address*</span>
  <span class="cicada-nymph-fetch-local-variable-1">:offset-address</span> sub
  <span class="cicada-nymph-variable">*jo-size*</span> div
  <span class="cicada-nymph-fetch-local-variable-1">:offset-address</span> set

  <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">instruction</span>,literal
    <span class="cicada-nymph-title">jojo-area</span>,stay
  <span class="cicada-nymph-fetch-local-variable-1">:new-jo</span>
    <span class="cicada-nymph-title">jojo-area</span>,stay

  <span class="cicada-nymph-fetch-local-variable-1">:jo</span>
  <span class="cicada-nymph-fetch-local-variable-2">::string</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">more,rule-set,make-jojo</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*rule-set,make-jojo*</span>
  dup <span class="cicada-nymph-syntax-key-word">jo</span> word:square-bar? <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-XdataX">&lt;make-jojo-syntax&gt;</span> <span class="cicada-nymph-XdataX">square-bar</span> <span class="cicada-nymph-title">rule</span>,add
      <span class="cicada-nymph-syntax-key-word">jo</span> word:square-ket? <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-XdataX">&lt;make-jojo-syntax&gt;</span> <span class="cicada-nymph-XdataX">square-ket</span> <span class="cicada-nymph-title">rule</span>,add
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-title">more</span>,rule-set,make-jojo

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;make-jojo-syntax&gt; name</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length], word[address, length] --
     string[address, length] &gt;&gt;</span>
  drop2
  <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">instruction</span>,literal
    <span class="cicada-nymph-title">jojo-area</span>,stay
  dup2
  <span class="cicada-nymph-title">string</span>,word
  string-&gt;name
    <span class="cicada-nymph-title">jojo-area</span>,stay
  <span class="cicada-nymph-title">string</span>,word-tail
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">more,rule-set,make-jojo</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*rule-set,make-jojo*</span>
  <span class="cicada-nymph-square-brackets">[</span><span class="cicada-nymph-string">"name"</span> string-equal? <span class="cicada-nymph-end">end</span><span class="cicada-nymph-square-brackets">]</span> <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-XdataX">&lt;make-jojo-syntax&gt;</span> <span class="cicada-nymph-XdataX">name</span>
  <span class="cicada-nymph-title">rule</span>,add
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>
<span class="cicada-nymph-title">more</span>,rule-set,make-jojo

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;make-jojo-syntax&gt; base#wild-integer-string</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length], word[address, length] --
     string[address, length] &gt;&gt;</span>
  <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">instruction</span>,literal
    <span class="cicada-nymph-title">jojo-area</span>,stay
  base#wild-integer-string-&gt;integer
    <span class="cicada-nymph-title">jojo-area</span>,stay
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">more,rule-set,make-jojo</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*rule-set,make-jojo*</span>
  <span class="cicada-nymph-syntax-key-word">jo</span> base#wild-integer-string?
  <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-XdataX">&lt;make-jojo-syntax&gt;</span> <span class="cicada-nymph-XdataX">base#wild-integer-string</span>
  <span class="cicada-nymph-title">rule</span>,add
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>
<span class="cicada-nymph-title">more</span>,rule-set,make-jojo

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;basic-REPL-syntax&gt; jo</span>
  <span class="cicada-nymph-comment">&lt;&lt; word:jo -- jo &gt;&gt;</span>
  drop2
  read-word
  <span class="cicada-nymph-save-local-variable-2">&gt;::word</span>

  <span class="cicada-nymph-fetch-local-variable-2">::word</span> &lt;word&gt;? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:buffer</span>
    <span class="cicada-nymph-fetch-local-variable-2">::word</span> dup <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>
    <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> string-&gt;buffer!
    <span class="cicada-nymph-number">1024</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:new-buffer</span>
    <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span> <span class="cicada-nymph-string">" "</span> read-word
    <span class="cicada-nymph-fetch-local-variable-1">:new-buffer</span>
    <span class="cicada-nymph-number">3</span> n-string-&gt;buffer! <span class="cicada-nymph-save-local-variable-1">&gt;:new-length</span>
    <span class="cicada-nymph-fetch-local-variable-1">:new-buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:new-length</span> <span class="cicada-nymph-save-local-variable-2">&gt;::word</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-fetch-local-variable-2">::word</span> <span class="cicada-nymph-title">name-hash-table</span>,find-jo <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-string">"* (&lt;basic-REPL-syntax&gt; jo) meet undefined word after jo : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::word</span> .s .l
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">more,rule-set,basic-REPL</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*rule-set,eval-word*</span>
  <span class="cicada-nymph-square-brackets">[</span><span class="cicada-nymph-string">"bye"</span> string-equal? <span class="cicada-nymph-end">end</span><span class="cicada-nymph-square-brackets">]</span> <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">syntax</span>,bye,basic-REPL
  <span class="cicada-nymph-title">rule</span>,add

  <span class="cicada-nymph-variable">*rule-set,eval-word*</span>
  <span class="cicada-nymph-square-brackets">[</span><span class="cicada-nymph-string">"jo"</span> string-equal? <span class="cicada-nymph-end">end</span><span class="cicada-nymph-square-brackets">]</span> <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-XdataX">&lt;basic-REPL-syntax&gt;</span> <span class="cicada-nymph-XdataX">jo</span>
  <span class="cicada-nymph-title">rule</span>,add
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>
<span class="cicada-nymph-title">more</span>,rule-set,basic-REPL

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;basic-REPL-syntax&gt; if,meet-true,else</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  read-word
  <span class="cicada-nymph-string">"then"</span> string-equal? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;basic-REPL-syntax&gt; if,meet-true</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  read-word
  dup2 <span class="cicada-nymph-string">"then"</span> string-equal? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup2 <span class="cicada-nymph-string">"else"</span> string-equal? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-XdataX">&lt;basic-REPL-syntax&gt;</span> <span class="cicada-nymph-XdataX">if,meet-true,else</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  eval-word
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;basic-REPL-syntax&gt; if,meet-false,else</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  read-word
  dup2 <span class="cicada-nymph-string">"then"</span> string-equal? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  eval-word
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;basic-REPL-syntax&gt; if,meet-false</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  read-word
  dup2 <span class="cicada-nymph-string">"then"</span> string-equal? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup2 <span class="cicada-nymph-string">"else"</span> string-equal? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-XdataX">&lt;basic-REPL-syntax&gt;</span> <span class="cicada-nymph-XdataX">if,meet-false,else</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  drop2
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;basic-REPL-syntax&gt; if</span>
  <span class="cicada-nymph-comment">&lt;&lt; bool, word:if -- &gt;&gt;</span>
  drop2 <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-XdataX">&lt;basic-REPL-syntax&gt;</span> <span class="cicada-nymph-XdataX">if,meet-true</span>
  <span class="cicada-nymph-syntax-key-word">else</span>
    <span class="cicada-nymph-XdataX">&lt;basic-REPL-syntax&gt;</span> <span class="cicada-nymph-XdataX">if,meet-false</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-variable">*rule-set,eval-word*</span>
<span class="cicada-nymph-syntax-key-word">jo</span> word:if? <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-XdataX">&lt;basic-REPL-syntax&gt;</span> <span class="cicada-nymph-XdataX">if</span>
<span class="cicada-nymph-title">rule</span>,add

<span class="cicada-nymph-number">1024</span> <span class="cicada-nymph-number">1024</span> mul
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*circular-string-area,size*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>


<span class="cicada-nymph-variable">*circular-string-area,size*</span> <span class="cicada-nymph-allocate">allocate-memory</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*circular-string-area*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-variable">*circular-string-area*</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*circular-string-area,current-free-address*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">circular-string-area,stay</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- &gt;&gt;</span>
  dup <span class="cicada-nymph-variable">*circular-string-area,current-free-address*</span> add
  <span class="cicada-nymph-variable">*circular-string-area,size*</span> <span class="cicada-nymph-variable">*circular-string-area*</span> add
  greater-or-equal? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-variable">*circular-string-area*</span>
    <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*circular-string-area,current-free-address*</span> set
  <span class="cicada-nymph-syntax-key-word">then</span>
  tuck
  <span class="cicada-nymph-variable">*circular-string-area,current-free-address*</span>
  string-&gt;buffer!
  <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*circular-string-area,current-free-address*</span>
  add-set
  <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-variable">*circular-string-area,current-free-address*</span>
  set-byte
  <span class="cicada-nymph-number">1</span> <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*circular-string-area,current-free-address*</span>
  add-set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;basic-REPL-syntax&gt; double-quote,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; cursor -- cursor &gt;&gt;</span>
  read-byte
  dup <span class="cicada-nymph-number">34</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
    drop
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  over set-byte
  add1
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;basic-REPL-syntax&gt; double-quote</span>
  <span class="cicada-nymph-comment">&lt;&lt; word:double-quote -- string[address, length] &gt;&gt;</span>
  drop2
  <span class="cicada-nymph-number">1024</span> <span class="cicada-nymph-number">2</span> mul <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:buffer</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
  <span class="cicada-nymph-XdataX">&lt;basic-REPL-syntax&gt;</span> <span class="cicada-nymph-XdataX">double-quote,loop</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
  <span class="cicada-nymph-variable">*circular-string-area,current-free-address*</span> <span class="cicada-nymph-save-local-variable-1">&gt;:address</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> sub dup <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>
  <span class="cicada-nymph-title">circular-string-area</span>,stay
  <span class="cicada-nymph-fetch-local-variable-1">:address</span>
  <span class="cicada-nymph-fetch-local-variable-1">:length</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-variable">*rule-set,eval-word*</span>
<span class="cicada-nymph-syntax-key-word">jo</span> word:double-quote? <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-XdataX">&lt;basic-REPL-syntax&gt;</span> <span class="cicada-nymph-XdataX">double-quote</span>
<span class="cicada-nymph-title">rule</span>,add

<span class="cicada-nymph-number">0</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;basic-REPL-syntax&gt;</span> <span class="cicada-nymph-variable">*address,stack-balancer*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;basic-REPL-syntax&gt; address</span>
  <span class="cicada-nymph-comment">&lt;&lt; word:address -- address &gt;&gt;</span>
  drop2
  read-word
  <span class="cicada-nymph-save-local-variable-2">&gt;::word</span>
  <span class="cicada-nymph-fetch-local-variable-2">::word</span> &lt;word&gt;? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:buffer</span>
    <span class="cicada-nymph-fetch-local-variable-2">::word</span> dup <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>
    <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> string-&gt;buffer!
    <span class="cicada-nymph-number">1024</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:new-buffer</span>
    <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span> <span class="cicada-nymph-string">" "</span> read-word
    <span class="cicada-nymph-fetch-local-variable-1">:new-buffer</span>
    <span class="cicada-nymph-number">3</span> n-string-&gt;buffer! <span class="cicada-nymph-save-local-variable-1">&gt;:new-length</span>
    <span class="cicada-nymph-fetch-local-variable-1">:new-buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:new-length</span> <span class="cicada-nymph-save-local-variable-2">&gt;::word</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-fetch-local-variable-2">::word</span> <span class="cicada-nymph-title">name-hash-table</span>,find-jo <span class="cicada-nymph-syntax-key-word">if</span>
  <span class="cicada-nymph-syntax-key-word">else</span>
    <span class="cicada-nymph-string">"* (&lt;basic-REPL-syntax&gt; address) meet undefined word : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::word</span> .s .l
    <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-XdataX">&lt;basic-REPL-syntax&gt;</span> <span class="cicada-nymph-variable">*address,stack-balancer*</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-save-local-variable-1">&gt;:jo</span>
  <span class="cicada-nymph-fetch-local-variable-1">:jo</span> variable-jo? <span class="cicada-nymph-syntax-key-word">if</span>
  <span class="cicada-nymph-syntax-key-word">else</span>
    <span class="cicada-nymph-string">"* (&lt;basic-REPL-syntax&gt; address) meet a not variable-jo : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::word</span> .s .l
    <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-XdataX">&lt;basic-REPL-syntax&gt;</span> <span class="cicada-nymph-variable">*address,stack-balancer*</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-1">:jo</span> <span class="cicada-nymph-variable">*jo-size*</span> add
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-variable">*rule-set,eval-word*</span>
<span class="cicada-nymph-syntax-key-word">jo</span> word:address?
<span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-XdataX">&lt;basic-REPL-syntax&gt;</span> <span class="cicada-nymph-XdataX">address</span>
<span class="cicada-nymph-title">rule</span>,add

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">word:name?</span>
  <span class="cicada-nymph-comment">&lt;&lt; word[address, length] -- bool &gt;&gt;</span>
  <span class="cicada-nymph-string">"name"</span> string-equal?
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;basic-REPL-syntax&gt; name</span>
  <span class="cicada-nymph-comment">&lt;&lt; word:name -- name &gt;&gt;</span>
  drop2
  read-word
  <span class="cicada-nymph-save-local-variable-2">&gt;::word</span>
  <span class="cicada-nymph-fetch-local-variable-2">::word</span> &lt;word&gt;? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:buffer</span>
    <span class="cicada-nymph-fetch-local-variable-2">::word</span> dup <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>
    <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> string-&gt;buffer!
    <span class="cicada-nymph-number">1024</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:new-buffer</span>
    <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span> <span class="cicada-nymph-string">" "</span> read-word
    <span class="cicada-nymph-fetch-local-variable-1">:new-buffer</span>
    <span class="cicada-nymph-number">3</span> n-string-&gt;buffer! <span class="cicada-nymph-save-local-variable-1">&gt;:new-length</span>
    <span class="cicada-nymph-fetch-local-variable-1">:new-buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:new-length</span> <span class="cicada-nymph-save-local-variable-2">&gt;::word</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-fetch-local-variable-2">::word</span> string-&gt;name
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-variable">*rule-set,eval-word*</span>
<span class="cicada-nymph-syntax-key-word">jo</span> word:name?
<span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-XdataX">&lt;basic-REPL-syntax&gt;</span> <span class="cicada-nymph-XdataX">name</span>
<span class="cicada-nymph-title">rule</span>,add

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;basic-REPL-syntax&gt; title</span>
  <span class="cicada-nymph-comment">&lt;&lt; &lt;title&gt;[address, length] -- unknown &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::title</span>
  <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:buffer</span>
  <span class="cicada-nymph-fetch-local-variable-2">::title</span> <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> string-&gt;buffer!
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> <span class="cicada-nymph-fetch-local-variable-2">::title</span> swap drop <span class="cicada-nymph-save-local-variable-2">&gt;::title</span>

  read-word <span class="cicada-nymph-save-local-variable-2">&gt;::name</span>
  <span class="cicada-nymph-fetch-local-variable-2">::title</span> <span class="cicada-nymph-fetch-local-variable-2">::name</span>
  <span class="cicada-nymph-title">name-hash-table</span>,find-jo,with-title <span class="cicada-nymph-syntax-key-word">if</span>
    apply
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-string">"* (&lt;basic-REPL-syntax&gt; title) meet undefined"</span> .s .l
  <span class="cicada-nymph-string">"  title : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::title</span> .s .l
  <span class="cicada-nymph-string">"  name  : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::name</span> .s .l
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-variable">*rule-set,eval-word*</span>
<span class="cicada-nymph-syntax-key-word">jo</span> &lt;word&gt;?
<span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-XdataX">&lt;basic-REPL-syntax&gt;</span> <span class="cicada-nymph-XdataX">title</span>
<span class="cicada-nymph-title">rule</span>,add

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;rule-set&gt; list,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; rule-set, cursor, counter -- &gt;&gt;</span>
  xx|over|x equal? <span class="cicada-nymph-syntax-key-word">if</span>
    drop drop2
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-string">"  * "</span> .s
  <span class="cicada-nymph-string">"("</span> .s
  add1 dup .i
  <span class="cicada-nymph-string">")"</span> .s .l
  swap
    dup <span class="cicada-nymph-variable">*rule,unit*</span> sub <span class="cicada-nymph-title">rule</span>,get-predicate
    <span class="cicada-nymph-string">"    "</span> .s <span class="cicada-nymph-title">jo</span>,find-name <span class="cicada-nymph-syntax-key-word">if</span> name-&gt;string <span class="cicada-nymph-syntax-key-word">else</span> <span class="cicada-nymph-string">"  unnamed jo"</span> <span class="cicada-nymph-syntax-key-word">then</span> .s .l
    dup <span class="cicada-nymph-variable">*rule,unit*</span> sub <span class="cicada-nymph-title">rule</span>,get-function
    <span class="cicada-nymph-string">"    "</span> .s <span class="cicada-nymph-title">jo</span>,find-name <span class="cicada-nymph-syntax-key-word">if</span> name-&gt;string <span class="cicada-nymph-syntax-key-word">else</span> <span class="cicada-nymph-string">"  unnamed jo"</span> <span class="cicada-nymph-syntax-key-word">then</span> .s .l
    <span class="cicada-nymph-variable">*jo-size*</span> sub <span class="cicada-nymph-variable">*jo-size*</span> sub
  swap
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;rule-set&gt; list</span>
  <span class="cicada-nymph-comment">&lt;&lt; rule-set -- &gt;&gt;</span>
  dup <span class="cicada-nymph-title">rule-set</span>,get-border
  <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-XdataX">&lt;rule-set&gt;</span> <span class="cicada-nymph-XdataX">list,loop</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;rule&gt; sub,move-one</span>
  <span class="cicada-nymph-comment">&lt;&lt; cursor -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-number">2</span> n-get
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">2</span> mul sub
  <span class="cicada-nymph-number">2</span> n-set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;rule&gt; sub,move</span>
  <span class="cicada-nymph-comment">&lt;&lt; rule-set, cursor -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:rule-set</span>
  <span class="cicada-nymph-fetch-local-variable-1">:rule-set</span> <span class="cicada-nymph-title">rule-set</span>,get-border <span class="cicada-nymph-save-local-variable-1">&gt;:border</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:border</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-1">:border</span> <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">2</span> mul sub
    <span class="cicada-nymph-fetch-local-variable-1">:rule-set</span>
    <span class="cicada-nymph-title">rule-set</span>,set-border
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-XdataX">&lt;rule&gt;</span> <span class="cicada-nymph-XdataX">sub,move-one</span>
  <span class="cicada-nymph-fetch-local-variable-1">:rule-set</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">2</span> mul add
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;rule&gt; sub,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; rule-set, rule[predicate, function], cursor -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::rule</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:rule-set</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:rule-set</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-2">::rule</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-variable">*rule,unit*</span> sub <span class="cicada-nymph-title">rule</span>,get
  equal2? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-1">:rule-set</span> <span class="cicada-nymph-fetch-local-variable-1">:cursor</span>
    <span class="cicada-nymph-XdataX">&lt;rule&gt;</span> <span class="cicada-nymph-XdataX">sub,move</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-1">:rule-set</span>
  <span class="cicada-nymph-fetch-local-variable-2">::rule</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">2</span> mul sub
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;rule&gt; sub</span>
  <span class="cicada-nymph-comment">&lt;&lt; rule-set, rule[predicate, function] -- &gt;&gt;</span>
  x|over|xx <span class="cicada-nymph-title">rule-set</span>,get-border
  <span class="cicada-nymph-XdataX">&lt;rule&gt;</span> <span class="cicada-nymph-XdataX">sub,loop</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-string">"&lt;string&gt; byte"</span> <span class="cicada-nymph-string">"string,byte"</span> alias
<span class="cicada-nymph-string">"&lt;string&gt; byte-tail"</span> <span class="cicada-nymph-string">"string,byte-tail"</span> alias
<span class="cicada-nymph-string">"&lt;string&gt; byte-back"</span> <span class="cicada-nymph-string">"string,byte-back"</span> alias

<span class="cicada-nymph-string">"&lt;string&gt; word"</span> <span class="cicada-nymph-string">"string,word"</span> alias
<span class="cicada-nymph-string">"&lt;string&gt; word-begin"</span> <span class="cicada-nymph-string">"string,word-begin"</span> alias
<span class="cicada-nymph-string">"&lt;string&gt; word-end"</span> <span class="cicada-nymph-string">"string,word-end"</span> alias
<span class="cicada-nymph-string">"&lt;string&gt; word-tail"</span> <span class="cicada-nymph-string">"string,word-tail"</span> alias

<span class="cicada-nymph-string">"&lt;string&gt; equal?"</span> <span class="cicada-nymph-string">"string-equal?"</span> alias

<span class="cicada-nymph-string">"&lt;string&gt; space?"</span> <span class="cicada-nymph-string">"space-string?"</span> alias
<span class="cicada-nymph-string">"&lt;string&gt; empty?"</span> <span class="cicada-nymph-string">"empty-string?"</span> alias

<span class="cicada-nymph-string">"&lt;string&gt; find-byte"</span> <span class="cicada-nymph-string">"string,find-byte"</span> alias

<span class="cicada-nymph-string">"&lt;rule-set&gt; get-border"</span> <span class="cicada-nymph-string">"rule-set,get-border"</span> alias
<span class="cicada-nymph-string">"&lt;rule-set&gt; set-border"</span> <span class="cicada-nymph-string">"rule-set,set-border"</span> alias
<span class="cicada-nymph-string">"&lt;rule-set&gt; find"</span> <span class="cicada-nymph-string">"rule-set,find"</span> alias

<span class="cicada-nymph-string">"&lt;rule&gt; add"</span> <span class="cicada-nymph-string">"rule,add"</span> alias

<span class="cicada-nymph-string">"&lt;rule&gt; *unit*"</span> <span class="cicada-nymph-string">"*rule,unit*"</span> alias
<span class="cicada-nymph-string">"&lt;rule&gt; get"</span> <span class="cicada-nymph-string">"rule,get"</span> alias
<span class="cicada-nymph-string">"&lt;rule&gt; get-predicate"</span> <span class="cicada-nymph-string">"rule,get-predicate"</span> alias
<span class="cicada-nymph-string">"&lt;rule&gt; get-function"</span> <span class="cicada-nymph-string">"rule,get-function"</span> alias

<span class="cicada-nymph-string">"&lt;eval-word&gt; *rule-set*"</span> <span class="cicada-nymph-string">"*rule-set,eval-word*"</span> alias
<span class="cicada-nymph-string">"&lt;make-jojo&gt; *rule-set*"</span> <span class="cicada-nymph-string">"*rule-set,make-jojo*"</span> alias

<span class="cicada-nymph-string">"&lt;make-jojo-syntax&gt; title"</span> <span class="cicada-nymph-string">"syntax,title,make-jojo"</span> alias
<span class="cicada-nymph-string">"&lt;make-jojo-syntax&gt; recur"</span> <span class="cicada-nymph-string">"syntax,recur,make-jojo"</span> alias
<span class="cicada-nymph-string">"&lt;make-jojo-syntax&gt; loop"</span> <span class="cicada-nymph-string">"syntax,loop,make-jojo"</span> alias
<span class="cicada-nymph-string">"&lt;make-jojo-syntax&gt; then"</span> <span class="cicada-nymph-string">"syntax,then,make-jojo"</span> alias
<span class="cicada-nymph-string">"&lt;make-jojo-syntax&gt; else"</span> <span class="cicada-nymph-string">"syntax,else,make-jojo"</span> alias
<span class="cicada-nymph-string">"&lt;make-jojo-syntax&gt; if"</span> <span class="cicada-nymph-string">"syntax,if,make-jojo"</span> alias
<span class="cicada-nymph-string">"&lt;make-jojo-syntax&gt; local-variable-get"</span> <span class="cicada-nymph-string">"syntax,local-variable-get,make-jojo"</span> alias
<span class="cicada-nymph-string">"&lt;make-jojo-syntax&gt; local-variable-set"</span> <span class="cicada-nymph-string">"syntax,local-variable-set,make-jojo"</span> alias
<span class="cicada-nymph-string">"&lt;make-jojo-syntax&gt; double-quote"</span> <span class="cicada-nymph-string">"syntax,double-quote,make-jojo"</span> alias
<span class="cicada-nymph-string">"&lt;make-jojo-syntax&gt; jo"</span> <span class="cicada-nymph-string">"syntax,jo,make-jojo"</span> alias
<span class="cicada-nymph-string">"&lt;make-jojo-syntax&gt; address"</span> <span class="cicada-nymph-string">"syntax,address,make-jojo"</span> alias
<span class="cicada-nymph-string">"&lt;make-jojo-syntax&gt; integer-string"</span> <span class="cicada-nymph-string">"syntax,integer-string,make-jojo"</span> alias

<span class="cicada-nymph-string">"&lt;basic-REPL-syntax&gt; bye"</span> <span class="cicada-nymph-string">"syntax,bye,basic-REPL"</span> alias

<span class="cicada-nymph-string">"&lt;name-record&gt; get-old-jo"</span> <span class="cicada-nymph-string">"name-record,get-old-jo"</span> alias
<span class="cicada-nymph-string">"&lt;name-record&gt; set-old-jo"</span> <span class="cicada-nymph-string">"name-record,set-old-jo"</span> alias

<span class="cicada-nymph-string">"&lt;name-record&gt; get-name"</span> <span class="cicada-nymph-string">"name-record,get-name"</span> alias
<span class="cicada-nymph-string">"&lt;name-record&gt; set-name"</span> <span class="cicada-nymph-string">"name-record,set-name"</span> alias

<span class="cicada-nymph-string">"&lt;name-record&gt; get-new-jo"</span> <span class="cicada-nymph-string">"name-record,get-new-jo"</span> alias
<span class="cicada-nymph-string">"&lt;name-record&gt; set-new-jo"</span> <span class="cicada-nymph-string">"name-record,set-new-jo"</span> alias

<span class="cicada-nymph-string">"&lt;global-naming-stack&gt; record-jo"</span> <span class="cicada-nymph-string">"global-naming-stack,record-jo"</span> alias
<span class="cicada-nymph-string">"&lt;global-naming-stack&gt; delete-last-record"</span> <span class="cicada-nymph-string">"global-naming-stack,delete-last-record"</span> alias

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">print-argument-stack,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; address, counter -- &gt;&gt;</span>
  dup zero? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  sub1 swap
    dup get .
  <span class="cicada-nymph-variable">*jo-size*</span> add
  swap
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">print-argument-stack</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  snapshot-the-stack-pointer
  <span class="cicada-nymph-variable">*the-stack-pointer-snapshot*</span>
  <span class="cicada-nymph-variable">*the-stack*</span> greater-or-equal? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-variable">*the-stack*</span>   <span class="cicada-nymph-comment">&lt;&lt; address as return value &gt;&gt;</span>
    <span class="cicada-nymph-variable">*the-stack-pointer-snapshot*</span> <span class="cicada-nymph-variable">*the-stack*</span> sub
    <span class="cicada-nymph-variable">*jo-size*</span> div <span class="cicada-nymph-comment">&lt;&lt; counter as return value &gt;&gt;</span>
    <span class="cicada-nymph-title">print-argument-stack</span>,loop
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-string">"below the stack "</span> .s
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">print-argument-stack,pretty</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  snapshot-the-stack-pointer
  .l
  <span class="cicada-nymph-string">"  * "</span> .s
     <span class="cicada-nymph-variable">*the-stack-pointer-snapshot*</span>
     <span class="cicada-nymph-variable">*the-stack*</span> sub
     <span class="cicada-nymph-comment">&lt;&lt; ad hoc for the BUG of div &gt;&gt;</span>
     dup negative? <span class="cicada-nymph-syntax-key-word">if</span>
       negate
       <span class="cicada-nymph-variable">*jo-size*</span> div
       negate
     <span class="cicada-nymph-syntax-key-word">else</span>
       <span class="cicada-nymph-variable">*jo-size*</span> div
     <span class="cicada-nymph-syntax-key-word">then</span>
     .i
  <span class="cicada-nymph-string">" * "</span> .s
  <span class="cicada-nymph-string">" -- "</span> .s
    print-argument-stack
  <span class="cicada-nymph-string">"--"</span> .s
  .l
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">stack-REPL,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; unknown -- unknown &gt;&gt;</span>
  read-word
  eval-word
  <span class="cicada-nymph-title">print-argument-stack</span>,pretty
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">stack-REPL</span>
  <span class="cicada-nymph-comment">&lt;&lt; unknown -- unknown &gt;&gt;</span>
  <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">bye</span>,basic-REPL
  <span class="cicada-nymph-quote">'bye,basic-REPL</span> <span class="cicada-nymph-await">await</span>
  <span class="cicada-nymph-variable">*rule-set,eval-word*</span> push-syntax-stack
  <span class="cicada-nymph-title">stack-REPL</span>,loop
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">eval-string,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; unknown -- unknown &gt;&gt;</span>
  tos-reading-stack <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">space?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  read-word
  eval-word
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">eval-string</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- unknown &gt;&gt;</span>
  push-reading-stack
  <span class="cicada-nymph-title">eval-string</span>,loop
  drop-reading-stack
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">syntax,double-quote,define-variable,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; cursor -- cursor &gt;&gt;</span>
  read-byte
  dup <span class="cicada-nymph-number">34</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
    drop
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  over set-byte
  add1
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">syntax,double-quote,define-variable</span>
  <span class="cicada-nymph-comment">&lt;&lt; word:double-quote -- string[address, length] &gt;&gt;</span>
  drop2
  <span class="cicada-nymph-number">1024</span> <span class="cicada-nymph-number">2</span> mul <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:buffer</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
  <span class="cicada-nymph-title">syntax</span>,double-quote,define-variable,loop
  <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> sub
  make-string
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">define-variable</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::string</span>

  <span class="cicada-nymph-fetch-local-variable-2">::string</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word</span> <span class="cicada-nymph-save-local-variable-2">&gt;::title</span>
  <span class="cicada-nymph-fetch-local-variable-2">::string</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word-tail</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word</span> <span class="cicada-nymph-save-local-variable-2">&gt;::name</span>
  <span class="cicada-nymph-fetch-local-variable-2">::string</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word-tail</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word-tail</span> <span class="cicada-nymph-save-local-variable-2">&gt;::body</span>

  <span class="cicada-nymph-fetch-local-variable-2">::title</span> <span class="cicada-nymph-string">" "</span> <span class="cicada-nymph-fetch-local-variable-2">::name</span>
  <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> dup <span class="cicada-nymph-save-local-variable-1">&gt;:buffer</span>
  <span class="cicada-nymph-number">3</span> n-string-&gt;buffer! <span class="cicada-nymph-save-local-variable-1">&gt;:len</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:len</span> <span class="cicada-nymph-save-local-variable-2">&gt;::name</span>
  <span class="cicada-nymph-fetch-local-variable-2">::title</span> &lt;word&gt;? not <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-2">::title</span> <span class="cicada-nymph-save-local-variable-2">&gt;::name</span>
    <span class="cicada-nymph-fetch-local-variable-2">::string</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word-tail</span> <span class="cicada-nymph-save-local-variable-2">&gt;::body</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  snapshot-the-stack-pointer
  <span class="cicada-nymph-variable">*the-stack-pointer-snapshot*</span> <span class="cicada-nymph-save-local-variable-1">&gt;:old-snapshot</span>

  <span class="cicada-nymph-variable">*rule-set,eval-word*</span>
  <span class="cicada-nymph-syntax-key-word">jo</span> word:double-quote?
  <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">syntax</span>,double-quote,define-variable
  <span class="cicada-nymph-XdataX">&lt;rule&gt;</span> <span class="cicada-nymph-XdataX">add</span>

  <span class="cicada-nymph-fetch-local-variable-2">::body</span> eval-string

  <span class="cicada-nymph-variable">*rule-set,eval-word*</span>
  <span class="cicada-nymph-syntax-key-word">jo</span> word:double-quote?
  <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">syntax</span>,double-quote,define-variable
  <span class="cicada-nymph-XdataX">&lt;rule&gt;</span> <span class="cicada-nymph-XdataX">sub</span>

  snapshot-the-stack-pointer
  <span class="cicada-nymph-variable">*the-stack-pointer-snapshot*</span> <span class="cicada-nymph-save-local-variable-1">&gt;:new-snapshot</span>

  <span class="cicada-nymph-fetch-local-variable-1">:new-snapshot</span> <span class="cicada-nymph-fetch-local-variable-1">:old-snapshot</span> sub

  dup negative? <span class="cicada-nymph-syntax-key-word">if</span>
    negate <span class="cicada-nymph-variable">*jo-size*</span> div
    <span class="cicada-nymph-string">"* (define-variable) fail to define variable : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::name</span> .s .l
    <span class="cicada-nymph-string">"  because after eval the following body"</span> .s .l
    <span class="cicada-nymph-string">"  the stack is "</span> .s .i <span class="cicada-nymph-string">" below what it use to be"</span> .s .l
    <span class="cicada-nymph-fetch-local-variable-2">::body</span> .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup zero? <span class="cicada-nymph-syntax-key-word">if</span>
    drop
    <span class="cicada-nymph-string">"* (define-variable) fail to define variable : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::name</span> .s .l
    <span class="cicada-nymph-string">"  because after eval the following body"</span> .s .l
    <span class="cicada-nymph-string">"  the stack is still where it use to be"</span> .s .l
    <span class="cicada-nymph-fetch-local-variable-2">::body</span> .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-variable">*jo-size*</span> div <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>

  <span class="cicada-nymph-fetch-local-variable-2">::name</span> make-string <span class="cicada-nymph-save-local-variable-2">&gt;::name</span>

  <span class="cicada-nymph-fetch-local-variable-2">::name</span> <span class="cicada-nymph-variable">*link*</span> <span class="cicada-nymph-number">0</span>
  make-link <span class="cicada-nymph-save-local-variable-1">&gt;:link</span>

  <span class="cicada-nymph-fetch-local-variable-1">:link</span> <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*link*</span> set

  <span class="cicada-nymph-variable">*explainer,variable*</span> <span class="cicada-nymph-number">0</span>
  make-jo-head <span class="cicada-nymph-save-local-variable-1">&gt;:jo</span>

  <span class="cicada-nymph-fetch-local-variable-1">:jo</span> <span class="cicada-nymph-fetch-local-variable-1">:link</span> <span class="cicada-nymph-title">link</span>,set-jo

  <span class="cicada-nymph-fetch-local-variable-1">:link</span> <span class="cicada-nymph-title">name-hash-table</span>,record-jo,by-link

  <span class="cicada-nymph-fetch-local-variable-1">:length</span>
  <span class="cicada-nymph-fetch-local-variable-1">:jo</span> <span class="cicada-nymph-title">jo</span>,set-length

  <span class="cicada-nymph-variable">*jojo-area,current-free-address*</span>
  <span class="cicada-nymph-fetch-local-variable-1">:length</span>
  n-set

  <span class="cicada-nymph-fetch-local-variable-1">:length</span> <span class="cicada-nymph-variable">*jo-size*</span> mul
  <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*jojo-area,current-free-address*</span>
  add-set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">4</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
  <span class="cicada-nymph-number">5</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,open:</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
  <span class="cicada-nymph-number">6</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,close:</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
  <span class="cicada-nymph-number">3</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,read:</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
  <span class="cicada-nymph-number">4</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,write:</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
  <span class="cicada-nymph-number">9</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,link:</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
  <span class="cicada-nymph-number">10</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,unlink:</span>     <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
  <span class="cicada-nymph-number">39</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,mkdir:</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
  <span class="cicada-nymph-number">40</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,rmdir:</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
  <span class="cicada-nymph-number">141</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,getdents:</span>   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
  <span class="cicada-nymph-number">220</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,getdents64:</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
  <span class="cicada-nymph-number">106</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,stat:</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
  <span class="cicada-nymph-number">1</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,exit:</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
  <span class="cicada-nymph-number">43</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,times:</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
  <span class="cicada-nymph-number">20</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,getpid:</span>     <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
  <span class="cicada-nymph-number">183</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,getcwd:</span>     <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
  <span class="cicada-nymph-number">12</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,chdir:</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
<span class="cicada-nymph-syntax-key-word">then</span>

<span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">8</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
  <span class="cicada-nymph-number">2</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,open:</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
  <span class="cicada-nymph-number">3</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,close:</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
  <span class="cicada-nymph-number">0</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,read:</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
  <span class="cicada-nymph-number">1</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,write:</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
  <span class="cicada-nymph-number">86</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,link:</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
  <span class="cicada-nymph-number">87</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,unlink:</span>     <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
  <span class="cicada-nymph-number">83</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,mkdir:</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
  <span class="cicada-nymph-number">84</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,rmdir:</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
  <span class="cicada-nymph-number">78</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,getdents:</span>   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
  <span class="cicada-nymph-number">217</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,getdents64:</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
  <span class="cicada-nymph-number">4</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,stat:</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
  <span class="cicada-nymph-number">60</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,exit:</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
  <span class="cicada-nymph-number">100</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,times:</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
  <span class="cicada-nymph-number">39</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,getpid:</span>     <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
  <span class="cicada-nymph-number">79</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,getcwd:</span>     <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
  <span class="cicada-nymph-number">80</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">:syscall-number,chdir:</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
<span class="cicada-nymph-syntax-key-word">then</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">error-code-&gt;string</span>
  <span class="cicada-nymph-comment">&lt;&lt; error-code -- string[address, length] &gt;&gt;</span>
  dup <span class="cicada-nymph-number">-1</span>  equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EPERM   &gt;&gt;</span>   <span class="cicada-nymph-string">"Operation not permitted "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-2</span>  equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; ENOENT  &gt;&gt;</span>   <span class="cicada-nymph-string">"No such file or directory "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-3</span>  equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; ESRCH   &gt;&gt;</span>   <span class="cicada-nymph-string">"No such process "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-4</span>  equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EINTR   &gt;&gt;</span>   <span class="cicada-nymph-string">"Interrupted system call "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-5</span>  equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EIO     &gt;&gt;</span>   <span class="cicada-nymph-string">"I/O error "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-6</span>  equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; ENXIO   &gt;&gt;</span>   <span class="cicada-nymph-string">"No such device or address "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-7</span>  equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; E2BIG   &gt;&gt;</span>   <span class="cicada-nymph-string">"Argument list too long "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-8</span>  equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; ENOEXEC &gt;&gt;</span>   <span class="cicada-nymph-string">"Exec format error "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-9</span>  equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EBADF   &gt;&gt;</span>   <span class="cicada-nymph-string">"Bad file number "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-10</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; ECHILD  &gt;&gt;</span>   <span class="cicada-nymph-string">"No child processes "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-11</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EAGAIN  &gt;&gt;</span>   <span class="cicada-nymph-string">"Try again "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-12</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; ENOMEM  &gt;&gt;</span>   <span class="cicada-nymph-string">"Out of memory "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-13</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EACCES  &gt;&gt;</span>   <span class="cicada-nymph-string">"Permission denied "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-14</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EFAULT  &gt;&gt;</span>   <span class="cicada-nymph-string">"Bad address "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-15</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; ENOTBLK &gt;&gt;</span>   <span class="cicada-nymph-string">"Block device required "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-16</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EBUSY   &gt;&gt;</span>   <span class="cicada-nymph-string">"Device or resource busy "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-17</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EEXIST  &gt;&gt;</span>   <span class="cicada-nymph-string">"File exists "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-18</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EXDEV   &gt;&gt;</span>   <span class="cicada-nymph-string">"Cross-device link "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-19</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; ENODEV  &gt;&gt;</span>   <span class="cicada-nymph-string">"No such device "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-20</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; ENOTDIR &gt;&gt;</span>   <span class="cicada-nymph-string">"Not a directory "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-21</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EISDIR  &gt;&gt;</span>   <span class="cicada-nymph-string">"Is a directory "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-22</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EINVAL  &gt;&gt;</span>   <span class="cicada-nymph-string">"Invalid argument "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-23</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; ENFILE  &gt;&gt;</span>   <span class="cicada-nymph-string">"File table overflow "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-24</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EMFILE  &gt;&gt;</span>   <span class="cicada-nymph-string">"Too many open files "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-25</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; ENOTTY  &gt;&gt;</span>   <span class="cicada-nymph-string">"Not a typewriter "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-26</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; ETXTBSY &gt;&gt;</span>   <span class="cicada-nymph-string">"Text file busy "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-27</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EFBIG   &gt;&gt;</span>   <span class="cicada-nymph-string">"File too large "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-28</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; ENOSPC  &gt;&gt;</span>   <span class="cicada-nymph-string">"No space left on device "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-29</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; ESPIPE  &gt;&gt;</span>   <span class="cicada-nymph-string">"Illegal seek "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-30</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EROFS   &gt;&gt;</span>   <span class="cicada-nymph-string">"Read-only file system "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-31</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EMLINK  &gt;&gt;</span>   <span class="cicada-nymph-string">"Too many links "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-32</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EPIPE   &gt;&gt;</span>   <span class="cicada-nymph-string">"Broken pipe "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-33</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EDOM    &gt;&gt;</span>   <span class="cicada-nymph-string">"Math argument out of domain of func "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">-34</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; ERANGE  &gt;&gt;</span>   <span class="cicada-nymph-string">"Math result not representable "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-string">"unknow error-code : "</span> .s .i .l
  <span class="cicada-nymph-string">"* (error-code-&gt;string) fail"</span> <span class="cicada-nymph-comment">&lt;&lt; to balance the argument-stack &gt;&gt;</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">file-type-code-&gt;string</span>
  <span class="cicada-nymph-comment">&lt;&lt; file-type-code -- string[address, length] &gt;&gt;</span>
  dup <span class="cicada-nymph-number">1</span>  equal?  <span class="cicada-nymph-comment">&lt;&lt; DT_FIFO  &gt;&gt;</span>  <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"named pipe i.e. FIFO"</span>  <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">2</span>  equal?  <span class="cicada-nymph-comment">&lt;&lt; DT_CHR   &gt;&gt;</span>  <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"Character device"</span>      <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">4</span>  equal?  <span class="cicada-nymph-comment">&lt;&lt; DT_DIR   &gt;&gt;</span>  <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"directory"</span>             <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">6</span>  equal?  <span class="cicada-nymph-comment">&lt;&lt; DT_BLK   &gt;&gt;</span>  <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"block device"</span>          <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">8</span>  equal?  <span class="cicada-nymph-comment">&lt;&lt; DT_REG   &gt;&gt;</span>  <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"regular file"</span>          <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">10</span> equal?  <span class="cicada-nymph-comment">&lt;&lt; DT_LNK   &gt;&gt;</span>  <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"symbolic link"</span>         <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">12</span> equal?  <span class="cicada-nymph-comment">&lt;&lt; DT_SOCK  &gt;&gt;</span>  <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"UNIX domain socket"</span>    <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  drop
  <span class="cicada-nymph-string">"unknow file type"</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;port&gt; open</span>
  <span class="cicada-nymph-comment">&lt;&lt; path[address, length]
     -- port, true
     -- error-code, false &gt;&gt;</span>
  string-&gt;syscall-string
  <span class="cicada-nymph-save-local-variable-1">&gt;:syscall-path</span>
  <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-comment">&lt;&lt;
  O_RDONLY
  &gt;&gt;</span>
  <span class="cicada-nymph-fetch-local-variable-1">:syscall-path</span>
  <span class="cicada-nymph-constant">:syscall-number,open:</span>
  <span class="cicada-nymph-number">2</span> syscall
  dup
  negative? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-bool">true</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;port&gt; create</span>
  <span class="cicada-nymph-comment">&lt;&lt; path[address, length]
     -- port, true
     -- error-code, false &gt;&gt;</span>
  string-&gt;syscall-string
  <span class="cicada-nymph-save-local-variable-1">&gt;:syscall-path</span>
  <span class="cicada-nymph-number">8</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">644</span> <span class="cicada-nymph-comment">&lt;&lt;
  2#110100100
  &gt;&gt;</span>
  <span class="cicada-nymph-number">8</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">1102</span> <span class="cicada-nymph-comment">&lt;&lt;
  O_RDWR   0002
  O_CREAT  0100
  O_TRUNC  1000
  &gt;&gt;</span>
  <span class="cicada-nymph-fetch-local-variable-1">:syscall-path</span>
  <span class="cicada-nymph-constant">:syscall-number,open:</span>
  <span class="cicada-nymph-number">3</span> syscall
  dup
  negative? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-bool">true</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;port&gt; update</span>
  <span class="cicada-nymph-comment">&lt;&lt; path[address, length]
     -- port, true
     -- error-code, false &gt;&gt;</span>
  string-&gt;syscall-string
  <span class="cicada-nymph-save-local-variable-1">&gt;:syscall-path</span>
  <span class="cicada-nymph-number">8</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">644</span> <span class="cicada-nymph-comment">&lt;&lt;
  110100100b
  &gt;&gt;</span>
  <span class="cicada-nymph-number">8</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">1002</span> <span class="cicada-nymph-comment">&lt;&lt;
  O_RDWR   0002
  O_TRUNC  1000
  &gt;&gt;</span>
  <span class="cicada-nymph-fetch-local-variable-1">:syscall-path</span>
  <span class="cicada-nymph-constant">:syscall-number,open:</span>
  <span class="cicada-nymph-number">3</span> syscall
  dup
  negative? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-bool">true</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;port&gt; close</span>
  <span class="cicada-nymph-comment">&lt;&lt; port
     -- true
     -- error-code, false &gt;&gt;</span>
  <span class="cicada-nymph-constant">:syscall-number,close:</span>
  <span class="cicada-nymph-number">1</span> syscall
  dup
  negative? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  drop <span class="cicada-nymph-bool">true</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;port&gt; read</span>
  <span class="cicada-nymph-comment">&lt;&lt; buffer, max-size, port
     -- counter, true
     -- error-code, false &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:port</span>
  swap
  <span class="cicada-nymph-fetch-local-variable-1">:port</span>
  <span class="cicada-nymph-constant">:syscall-number,read:</span>
  <span class="cicada-nymph-number">3</span> syscall
  dup
  negative? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-bool">true</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;port&gt; write</span>
  <span class="cicada-nymph-comment">&lt;&lt; buffer, max-size, port
     -- counter, true
     -- error-code, false &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:port</span>
  swap
  <span class="cicada-nymph-fetch-local-variable-1">:port</span>
  <span class="cicada-nymph-constant">:syscall-number,write:</span>
  <span class="cicada-nymph-number">3</span> syscall
  dup
  negative? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-bool">true</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;file&gt; create</span>
  <span class="cicada-nymph-comment">&lt;&lt; path[address, length] -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::path</span>
  <span class="cicada-nymph-fetch-local-variable-2">::path</span>
  string-&gt;syscall-string
  <span class="cicada-nymph-save-local-variable-1">&gt;:syscall-path</span>
  <span class="cicada-nymph-number">8</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">644</span> <span class="cicada-nymph-comment">&lt;&lt;
  2#110100100
  &gt;&gt;</span>
  <span class="cicada-nymph-number">8</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">0200</span>
  <span class="cicada-nymph-number">8</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">0100</span> bit-or <span class="cicada-nymph-comment">&lt;&lt;
  O_EXCL   0200
  O_CREAT  0100
  &gt;&gt;</span>
  <span class="cicada-nymph-fetch-local-variable-1">:syscall-path</span>
  <span class="cicada-nymph-constant">:syscall-number,open:</span>
  <span class="cicada-nymph-number">3</span> syscall
  dup
  negative? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (&lt;file&gt; create) fail to open port for the following path :"</span> .s .l
    <span class="cicada-nymph-string">"  "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
    <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-XdataX">&lt;port&gt;</span> <span class="cicada-nymph-XdataX">close</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-string">"* (&lt;file&gt; create) fail to close port for the following path :"</span> .s .l
  <span class="cicada-nymph-string">"  "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
  <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;file&gt; write</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length], path[address, length] -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::path</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::string</span>
  <span class="cicada-nymph-fetch-local-variable-2">::path</span>
  string-&gt;syscall-string
  <span class="cicada-nymph-save-local-variable-1">&gt;:syscall-path</span>
  <span class="cicada-nymph-number">8</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">644</span> <span class="cicada-nymph-comment">&lt;&lt;
  2#110100100
  &gt;&gt;</span>
  <span class="cicada-nymph-number">8</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">1002</span> <span class="cicada-nymph-comment">&lt;&lt;
  O_RDWR   0002
  O_TRUNC  1000
  &gt;&gt;</span>
  <span class="cicada-nymph-fetch-local-variable-1">:syscall-path</span>
  <span class="cicada-nymph-constant">:syscall-number,open:</span>
  <span class="cicada-nymph-number">3</span> syscall
  dup
  negative? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (&lt;file&gt; write) fail to open port for the following path :"</span> .s .l
    <span class="cicada-nymph-string">"  "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
    <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:port</span>
  <span class="cicada-nymph-fetch-local-variable-2">::string</span> swap
  <span class="cicada-nymph-fetch-local-variable-1">:port</span>
  <span class="cicada-nymph-constant">:syscall-number,write:</span>
  <span class="cicada-nymph-number">3</span> syscall
  dup
  negative? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (&lt;file&gt; write) fail to write port for the following path :"</span> .s .l
    <span class="cicada-nymph-string">"  "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
    <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:counter</span> <span class="cicada-nymph-comment">&lt;&lt; bytes been written &gt;&gt;</span>
  <span class="cicada-nymph-fetch-local-variable-1">:port</span>
  <span class="cicada-nymph-XdataX">&lt;port&gt;</span> <span class="cicada-nymph-XdataX">close</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-string">"* (&lt;file&gt; write) fail to close port for the following path : "</span> .s .l
  <span class="cicada-nymph-string">"  "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
  <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;file&gt; read</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, max-length], path[address, length] -- counter &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::path</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::string</span>
  <span class="cicada-nymph-fetch-local-variable-2">::path</span>
  string-&gt;syscall-string
  <span class="cicada-nymph-save-local-variable-1">&gt;:syscall-path</span>
  <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-comment">&lt;&lt;
  O_RDONLY
  &gt;&gt;</span>
  <span class="cicada-nymph-fetch-local-variable-1">:syscall-path</span>
  <span class="cicada-nymph-constant">:syscall-number,open:</span>
  <span class="cicada-nymph-number">2</span> syscall
  dup
  negative? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (&lt;file&gt; read) fail to open port for the following path :"</span> .s .l
    <span class="cicada-nymph-string">"  "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
    <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
    <span class="cicada-nymph-number">0</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:port</span>
  <span class="cicada-nymph-fetch-local-variable-2">::string</span> swap
  <span class="cicada-nymph-fetch-local-variable-1">:port</span>
  <span class="cicada-nymph-constant">:syscall-number,read:</span>
  <span class="cicada-nymph-number">3</span> syscall
  dup
  negative? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (&lt;file&gt; read) fail to read port for the following path :"</span> .s .l
    <span class="cicada-nymph-string">"  "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
    <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
    <span class="cicada-nymph-number">0</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:counter</span> <span class="cicada-nymph-comment">&lt;&lt; bytes been readed &gt;&gt;</span>
  <span class="cicada-nymph-fetch-local-variable-1">:port</span>
  <span class="cicada-nymph-XdataX">&lt;port&gt;</span> <span class="cicada-nymph-XdataX">close</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-1">:counter</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-string">"* (&lt;file&gt; read) fail to close port for the following path : "</span> .s .l
  <span class="cicada-nymph-string">"  "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
  <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
  <span class="cicada-nymph-number">0</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;file&gt; remove</span>
  <span class="cicada-nymph-comment">&lt;&lt; path[address, length] -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::path</span>
  <span class="cicada-nymph-fetch-local-variable-2">::path</span>
  string-&gt;syscall-string
  <span class="cicada-nymph-save-local-variable-1">&gt;:syscall-path</span>
  <span class="cicada-nymph-fetch-local-variable-1">:syscall-path</span>
  <span class="cicada-nymph-constant">:syscall-number,unlink:</span>
  <span class="cicada-nymph-number">1</span> syscall
  dup
  negative? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (&lt;file&gt; remove) fail for the following path :"</span> .s .l
    <span class="cicada-nymph-string">"  "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
    <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  drop
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;directory&gt; create</span>
  <span class="cicada-nymph-comment">&lt;&lt; path[address, length] -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::path</span>
  <span class="cicada-nymph-fetch-local-variable-2">::path</span>
  string-&gt;syscall-string
  <span class="cicada-nymph-save-local-variable-1">&gt;:syscall-path</span>
  <span class="cicada-nymph-number">8</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">755</span> <span class="cicada-nymph-comment">&lt;&lt;
  2#111101101
  &gt;&gt;</span>
  <span class="cicada-nymph-fetch-local-variable-1">:syscall-path</span>
  <span class="cicada-nymph-constant">:syscall-number,mkdir:</span>
  <span class="cicada-nymph-number">2</span> syscall
  dup
  negative? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (&lt;directory&gt; create) fail for the following path :"</span> .s .l
    <span class="cicada-nymph-string">"  "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
    <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  drop
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;directory&gt; remove</span>
  <span class="cicada-nymph-comment">&lt;&lt; path[address, length] -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::path</span>
  <span class="cicada-nymph-fetch-local-variable-2">::path</span>
  string-&gt;syscall-string
  <span class="cicada-nymph-save-local-variable-1">&gt;:syscall-path</span>
  <span class="cicada-nymph-fetch-local-variable-1">:syscall-path</span>
  <span class="cicada-nymph-constant">:syscall-number,rmdir:</span>
  <span class="cicada-nymph-number">1</span> syscall
  dup
  negative? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (&lt;directory&gt; remove) fail for the following path :"</span> .s .l
    <span class="cicada-nymph-string">"  "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
    <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  drop
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">+getdents64,d_ino+</span>        <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
<span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">+getdents64,d_off+</span>        <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
<span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">+getdents64,d_reclen+</span>     <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
<span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">+getdents64,d_type+</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
<span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">+getdents64,d_name+</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
<span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">+getdents64,end+</span>          <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">init,getdents64</span>
  <span class="cicada-nymph-comment">&lt;&lt; offset -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">4</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+getdents64,d_ino+</span>    set    <span class="cicada-nymph-number">8</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+getdents64,d_off+</span>    set    <span class="cicada-nymph-number">8</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+getdents64,d_reclen+</span> set    <span class="cicada-nymph-number">2</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+getdents64,d_type+</span>   set    <span class="cicada-nymph-number">1</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+getdents64,d_name+</span>   set    <span class="cicada-nymph-number">256</span> add
        <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+getdents64,end+</span>      set
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">8</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+getdents64,d_ino+</span>    set    <span class="cicada-nymph-number">8</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+getdents64,d_off+</span>    set    <span class="cicada-nymph-number">8</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+getdents64,d_reclen+</span> set    <span class="cicada-nymph-number">2</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+getdents64,d_type+</span>   set    <span class="cicada-nymph-number">1</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+getdents64,d_name+</span>   set    <span class="cicada-nymph-number">256</span> add
        <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+getdents64,end+</span>      set
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-number">0</span> <span class="cicada-nymph-title">init</span>,getdents64
<span class="cicada-nymph-constant">+getdents64,end+</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">+getdents64,length+</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;directory&gt; empty?</span>
  <span class="cicada-nymph-comment">&lt;&lt; path[address, length] -- bool &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::path</span>
  <span class="cicada-nymph-fetch-local-variable-2">::path</span> <span class="cicada-nymph-XdataX">&lt;port&gt;</span> <span class="cicada-nymph-XdataX">open</span> <span class="cicada-nymph-syntax-key-word">if</span>
  <span class="cicada-nymph-syntax-key-word">else</span>
    <span class="cicada-nymph-string">"* (&lt;directory&gt; empty?) fail to open : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
    <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:port</span>
  <span class="cicada-nymph-number">128</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:getdents64-structure-list</span>
  <span class="cicada-nymph-number">128</span>
  <span class="cicada-nymph-fetch-local-variable-1">:getdents64-structure-list</span>
  <span class="cicada-nymph-fetch-local-variable-1">:port</span>
  <span class="cicada-nymph-constant">:syscall-number,getdents64:</span>
  <span class="cicada-nymph-number">3</span> syscall
  <span class="cicada-nymph-number">48</span> equal? <span class="cicada-nymph-comment">&lt;&lt; this call to equal? returns the needed bool &gt;&gt;</span>
  <span class="cicada-nymph-fetch-local-variable-1">:port</span> <span class="cicada-nymph-XdataX">&lt;port&gt;</span> <span class="cicada-nymph-XdataX">close</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-string">"* (&lt;directory&gt; empty?) fail to close : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
  <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
  <span class="cicada-nymph-bool">false</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;directory&gt; map,loop,execute</span>
  <span class="cicada-nymph-comment">&lt;&lt; end, cursor, function -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:function</span>
  dup2 less-or-equal? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:end</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-title">init</span>,getdents64
  <span class="cicada-nymph-fetch-local-variable-1">:function</span> apply
  <span class="cicada-nymph-fetch-local-variable-1">:end</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-constant">+getdents64,d_reclen+</span> get-two-bytes add
  <span class="cicada-nymph-fetch-local-variable-1">:function</span>
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;directory&gt; map,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; port, function -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:function</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:port</span>
  <span class="cicada-nymph-number">1024</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:getdents64-structure-list</span>
  <span class="cicada-nymph-number">1024</span>
  <span class="cicada-nymph-fetch-local-variable-1">:getdents64-structure-list</span>
  <span class="cicada-nymph-fetch-local-variable-1">:port</span>
  <span class="cicada-nymph-constant">:syscall-number,getdents64:</span>
  <span class="cicada-nymph-number">3</span> syscall
  dup negative? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (&lt;directory&gt; map,loop) syscall fail"</span> .s .l
    <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup zero? <span class="cicada-nymph-syntax-key-word">if</span>
    drop
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-1">:getdents64-structure-list</span> add
  <span class="cicada-nymph-fetch-local-variable-1">:getdents64-structure-list</span>
  <span class="cicada-nymph-fetch-local-variable-1">:function</span>
  <span class="cicada-nymph-XdataX">&lt;directory&gt;</span> <span class="cicada-nymph-XdataX">map,loop,execute</span>
  <span class="cicada-nymph-fetch-local-variable-1">:port</span>
  <span class="cicada-nymph-fetch-local-variable-1">:function</span>
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;directory&gt; map</span>
  <span class="cicada-nymph-comment">&lt;&lt; directory-path[address, length],
     function
     -- true
     -- false &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:function</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::directory-path</span>
  <span class="cicada-nymph-fetch-local-variable-2">::directory-path</span> <span class="cicada-nymph-XdataX">&lt;port&gt;</span> <span class="cicada-nymph-XdataX">open</span> <span class="cicada-nymph-syntax-key-word">if</span>
  <span class="cicada-nymph-syntax-key-word">else</span>
    <span class="cicada-nymph-string">"* (&lt;directory&gt; map) fail to open : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::directory-path</span> .s .l
    <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:port</span>
  <span class="cicada-nymph-fetch-local-variable-1">:port</span> <span class="cicada-nymph-fetch-local-variable-1">:function</span> <span class="cicada-nymph-XdataX">&lt;directory&gt;</span> <span class="cicada-nymph-XdataX">map,loop</span>
  <span class="cicada-nymph-fetch-local-variable-1">:port</span> <span class="cicada-nymph-XdataX">&lt;port&gt;</span> <span class="cicada-nymph-XdataX">close</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-string">"* (&lt;directory&gt; map) fail to close : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::directory-path</span> .s .l
  <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;directory&gt; list-file</span>
  <span class="cicada-nymph-comment">&lt;&lt; directory-path[address, length] -- &gt;&gt;</span>
  <span class="cicada-nymph-square-brackets">[</span> <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
    <span class="cicada-nymph-constant">+getdents64,d_type+</span> get-byte
    <span class="cicada-nymph-number">8</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
      <span class="cicada-nymph-string">"  "</span> .s
      <span class="cicada-nymph-constant">+getdents64,d_name+</span>
      dup <span class="cicada-nymph-number">256</span>
      <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">find-byte</span>
      drop  <span class="cicada-nymph-comment">&lt;&lt; drop 0 &gt;&gt;</span>
      over sub .s .l
    <span class="cicada-nymph-syntax-key-word">then</span>
    <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-square-brackets">]</span>
  <span class="cicada-nymph-XdataX">&lt;directory&gt;</span> <span class="cicada-nymph-XdataX">map</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;directory&gt; list-directory</span>
  <span class="cicada-nymph-comment">&lt;&lt; directory-path[address, length] -- &gt;&gt;</span>
  <span class="cicada-nymph-square-brackets">[</span> <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
    <span class="cicada-nymph-constant">+getdents64,d_type+</span> get-byte
    <span class="cicada-nymph-number">4</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
      <span class="cicada-nymph-constant">+getdents64,d_name+</span>
      dup <span class="cicada-nymph-number">256</span>
      <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">find-byte</span>
      drop  <span class="cicada-nymph-comment">&lt;&lt; drop 0 &gt;&gt;</span>
      over sub <span class="cicada-nymph-save-local-variable-2">&gt;::name</span>
      <span class="cicada-nymph-string">".."</span> <span class="cicada-nymph-fetch-local-variable-2">::name</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-syntax-key-word">if</span>
        <span class="cicada-nymph-end">end</span>
      <span class="cicada-nymph-syntax-key-word">then</span>
      <span class="cicada-nymph-string">"."</span> <span class="cicada-nymph-fetch-local-variable-2">::name</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-syntax-key-word">if</span>
        <span class="cicada-nymph-end">end</span>
      <span class="cicada-nymph-syntax-key-word">then</span>
      <span class="cicada-nymph-string">"  "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::name</span> .s .l
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-syntax-key-word">then</span>
    <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-square-brackets">]</span>
  <span class="cicada-nymph-XdataX">&lt;directory&gt;</span> <span class="cicada-nymph-XdataX">map</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;directory&gt; find-file</span>
  <span class="cicada-nymph-comment">&lt;&lt; directory-path[address, length], file-name[address, length] -- bool &gt;&gt;</span>
  xx|swap|xx
  <span class="cicada-nymph-bool">false</span>
  xx|swap|x
  <span class="cicada-nymph-square-brackets">[</span> <span class="cicada-nymph-comment">&lt;&lt; file-name[address, length], bool --
       file-name[address, length], bool &gt;&gt;</span>
    <span class="cicada-nymph-constant">+getdents64,d_type+</span> get-byte <span class="cicada-nymph-number">8</span> equal? not <span class="cicada-nymph-syntax-key-word">if</span>
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-syntax-key-word">then</span>
    <span class="cicada-nymph-save-local-variable-1">&gt;:bool</span>
    <span class="cicada-nymph-save-local-variable-1">&gt;:file-name,lenght</span>
    <span class="cicada-nymph-save-local-variable-1">&gt;:file-name,address</span>
    <span class="cicada-nymph-fetch-local-variable-1">:file-name,lenght</span> <span class="cicada-nymph-constant">+getdents64,d_name+</span> add
    get-byte zero? not <span class="cicada-nymph-syntax-key-word">if</span>
      <span class="cicada-nymph-fetch-local-variable-1">:file-name,address</span>
      <span class="cicada-nymph-fetch-local-variable-1">:file-name,lenght</span>
      <span class="cicada-nymph-fetch-local-variable-1">:bool</span>
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-syntax-key-word">then</span>
    <span class="cicada-nymph-fetch-local-variable-1">:file-name,address</span> <span class="cicada-nymph-fetch-local-variable-1">:file-name,lenght</span>
    <span class="cicada-nymph-constant">+getdents64,d_name+</span> <span class="cicada-nymph-fetch-local-variable-1">:file-name,lenght</span>
    <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-syntax-key-word">if</span>
      <span class="cicada-nymph-fetch-local-variable-1">:file-name,address</span>
      <span class="cicada-nymph-fetch-local-variable-1">:file-name,lenght</span>
      <span class="cicada-nymph-bool">true</span>
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-syntax-key-word">then</span>
    <span class="cicada-nymph-fetch-local-variable-1">:file-name,address</span>
    <span class="cicada-nymph-fetch-local-variable-1">:file-name,lenght</span>
    <span class="cicada-nymph-fetch-local-variable-1">:bool</span>
    <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-square-brackets">]</span>
  <span class="cicada-nymph-XdataX">&lt;directory&gt;</span> <span class="cicada-nymph-XdataX">map</span>
  xx|swap|x drop2
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;directory&gt; find-directory</span>
  <span class="cicada-nymph-comment">&lt;&lt; directory-path[address, length], file-name[address, length] -- bool &gt;&gt;</span>
  xx|swap|xx
  <span class="cicada-nymph-bool">false</span>
  xx|swap|x
  <span class="cicada-nymph-square-brackets">[</span> <span class="cicada-nymph-comment">&lt;&lt; file-name[address, length], bool --
       file-name[address, length], bool &gt;&gt;</span>
    <span class="cicada-nymph-constant">+getdents64,d_type+</span> get-byte <span class="cicada-nymph-number">4</span> equal? not <span class="cicada-nymph-syntax-key-word">if</span>
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-syntax-key-word">then</span>
    <span class="cicada-nymph-save-local-variable-1">&gt;:bool</span>
    <span class="cicada-nymph-save-local-variable-1">&gt;:file-name,lenght</span>
    <span class="cicada-nymph-save-local-variable-1">&gt;:file-name,address</span>
    <span class="cicada-nymph-fetch-local-variable-1">:file-name,lenght</span> <span class="cicada-nymph-constant">+getdents64,d_name+</span> add
    get-byte zero? not <span class="cicada-nymph-syntax-key-word">if</span>
      <span class="cicada-nymph-fetch-local-variable-1">:file-name,address</span>
      <span class="cicada-nymph-fetch-local-variable-1">:file-name,lenght</span>
      <span class="cicada-nymph-fetch-local-variable-1">:bool</span>
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-syntax-key-word">then</span>
    <span class="cicada-nymph-fetch-local-variable-1">:file-name,address</span> <span class="cicada-nymph-fetch-local-variable-1">:file-name,lenght</span>
    <span class="cicada-nymph-constant">+getdents64,d_name+</span> <span class="cicada-nymph-fetch-local-variable-1">:file-name,lenght</span>
    <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-syntax-key-word">if</span>
      <span class="cicada-nymph-fetch-local-variable-1">:file-name,address</span>
      <span class="cicada-nymph-fetch-local-variable-1">:file-name,lenght</span>
      <span class="cicada-nymph-bool">true</span>
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-syntax-key-word">then</span>
    <span class="cicada-nymph-fetch-local-variable-1">:file-name,address</span>
    <span class="cicada-nymph-fetch-local-variable-1">:file-name,lenght</span>
    <span class="cicada-nymph-fetch-local-variable-1">:bool</span>
    <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-square-brackets">]</span>
  <span class="cicada-nymph-XdataX">&lt;directory&gt;</span> <span class="cicada-nymph-XdataX">map</span>
  xx|swap|x drop2
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*pid*</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">init-pid</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-constant">:syscall-number,getpid:</span>
  <span class="cicada-nymph-number">0</span> syscall
  <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*pid*</span> set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">get-pid</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- pid &gt;&gt;</span>
  <span class="cicada-nymph-variable">*pid*</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-memory</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*address,command-line*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-number">512</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*length,command-line*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">init-command-line</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-number">64</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:path-buffer</span>
  <span class="cicada-nymph-fetch-local-variable-1">:path-buffer</span> <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>

  get-pid <span class="cicada-nymph-title">write-number</span>,fill-buffer <span class="cicada-nymph-save-local-variable-2">&gt;::pid-string</span>

  <span class="cicada-nymph-string">"/proc/"</span> dup <span class="cicada-nymph-save-local-variable-1">&gt;:add-to-cursor</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> string-&gt;buffer!
  <span class="cicada-nymph-fetch-local-variable-1">:add-to-cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> add <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>

  <span class="cicada-nymph-fetch-local-variable-2">::pid-string</span> dup <span class="cicada-nymph-save-local-variable-1">&gt;:add-to-cursor</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> string-&gt;buffer!
  <span class="cicada-nymph-fetch-local-variable-1">:add-to-cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> add <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>

  <span class="cicada-nymph-string">"/cmdline"</span> dup <span class="cicada-nymph-save-local-variable-1">&gt;:add-to-cursor</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> string-&gt;buffer!
  <span class="cicada-nymph-fetch-local-variable-1">:add-to-cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> add <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>

  <span class="cicada-nymph-fetch-local-variable-1">:path-buffer</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:path-buffer</span> sub dup2 <span class="cicada-nymph-save-local-variable-2">&gt;::path</span>
  <span class="cicada-nymph-XdataX">&lt;port&gt;</span> <span class="cicada-nymph-XdataX">open</span> <span class="cicada-nymph-syntax-key-word">if</span>
  <span class="cicada-nymph-syntax-key-word">else</span>
    <span class="cicada-nymph-string">"* (init-command-line) fail to open : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:port</span>

  <span class="cicada-nymph-variable">*address,command-line*</span>
  <span class="cicada-nymph-variable">*length,command-line*</span>
  <span class="cicada-nymph-fetch-local-variable-1">:port</span>
  <span class="cicada-nymph-XdataX">&lt;port&gt;</span> <span class="cicada-nymph-XdataX">read</span> <span class="cicada-nymph-syntax-key-word">if</span>
  <span class="cicada-nymph-syntax-key-word">else</span>
    <span class="cicada-nymph-string">"* (init-command-line) fail to read : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*length,command-line*</span> set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">get-command-line</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- string[address, length] &gt;&gt;</span>
  <span class="cicada-nymph-variable">*address,command-line*</span> <span class="cicada-nymph-variable">*length,command-line*</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-number">1024</span> <span class="cicada-nymph-number">4</span> mul <span class="cicada-nymph-allocate">allocate-memory</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*address,environment-variable-list*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-number">1024</span> <span class="cicada-nymph-number">4</span> mul
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*length,environment-variable-list*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">init-environment-variable-list</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-number">64</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:path-buffer</span>
  <span class="cicada-nymph-fetch-local-variable-1">:path-buffer</span> <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>

  get-pid <span class="cicada-nymph-title">write-number</span>,fill-buffer <span class="cicada-nymph-save-local-variable-2">&gt;::pid-string</span>

  <span class="cicada-nymph-string">"/proc/"</span> dup <span class="cicada-nymph-save-local-variable-1">&gt;:add-to-cursor</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> string-&gt;buffer!
  <span class="cicada-nymph-fetch-local-variable-1">:add-to-cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> add <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>

  <span class="cicada-nymph-fetch-local-variable-2">::pid-string</span> dup <span class="cicada-nymph-save-local-variable-1">&gt;:add-to-cursor</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> string-&gt;buffer!
  <span class="cicada-nymph-fetch-local-variable-1">:add-to-cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> add <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>

  <span class="cicada-nymph-string">"/environ"</span> dup <span class="cicada-nymph-save-local-variable-1">&gt;:add-to-cursor</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> string-&gt;buffer!
  <span class="cicada-nymph-fetch-local-variable-1">:add-to-cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> add <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>

  <span class="cicada-nymph-fetch-local-variable-1">:path-buffer</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:path-buffer</span> sub dup2 <span class="cicada-nymph-save-local-variable-2">&gt;::path</span>
  <span class="cicada-nymph-XdataX">&lt;port&gt;</span> <span class="cicada-nymph-XdataX">open</span> <span class="cicada-nymph-syntax-key-word">if</span>
  <span class="cicada-nymph-syntax-key-word">else</span>
    <span class="cicada-nymph-string">"* (init-environment-variable-list) fail to open : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:port</span>

  <span class="cicada-nymph-variable">*address,environment-variable-list*</span>
  <span class="cicada-nymph-variable">*length,environment-variable-list*</span>
  <span class="cicada-nymph-fetch-local-variable-1">:port</span>
  <span class="cicada-nymph-XdataX">&lt;port&gt;</span> <span class="cicada-nymph-XdataX">read</span> <span class="cicada-nymph-syntax-key-word">if</span>
  <span class="cicada-nymph-syntax-key-word">else</span>
    <span class="cicada-nymph-string">"* (init-environment-variable-list) fail to read : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*length,environment-variable-list*</span> set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">get-environment-variable-list</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- string[address, length] &gt;&gt;</span>
  <span class="cicada-nymph-variable">*address,environment-variable-list*</span>
  <span class="cicada-nymph-variable">*length,environment-variable-list*</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">find-environment-variable,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length], cursor
     -- string[address, length], true
     -- false &gt;&gt;</span>
  dup
  get-environment-variable-list add
  greater-than? <span class="cicada-nymph-syntax-key-word">if</span>
    drop drop2
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:address</span>
  <span class="cicada-nymph-fetch-local-variable-1">:address</span> <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span>
  compare-buffer not <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-1">:address</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span>
    <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-number">0</span> cursor-&gt;next-matching-byte add1
    <span class="cicada-nymph-end">loop</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span> add get-byte
  <span class="cicada-nymph-string">"="</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">byte</span>
  equal? not <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-1">:address</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span>
    <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-number">0</span> cursor-&gt;next-matching-byte add1
    <span class="cicada-nymph-end">loop</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span> add add1 <span class="cicada-nymph-comment">&lt;&lt; over "=" &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:find-address</span>
  <span class="cicada-nymph-fetch-local-variable-1">:find-address</span> <span class="cicada-nymph-number">0</span> cursor-&gt;next-matching-byte
  <span class="cicada-nymph-fetch-local-variable-1">:find-address</span> sub <span class="cicada-nymph-save-local-variable-1">&gt;:find-length</span>
  <span class="cicada-nymph-fetch-local-variable-1">:find-address</span>
  <span class="cicada-nymph-fetch-local-variable-1">:find-length</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">find-environment-variable</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length]
     -- string[address, length], true
     -- false &gt;&gt;</span>
  get-environment-variable-list drop
  <span class="cicada-nymph-title">find-environment-variable</span>,loop
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

init-pid
init-command-line
init-environment-variable-list

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*home-directory*</span>
  <span class="cicada-nymph-string">"HOME"</span> find-environment-variable
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;report&gt; environment-variable,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; environment-variable-list[address, length]-- &gt;&gt;</span>
  dup2 <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">space?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:address</span>

  <span class="cicada-nymph-fetch-local-variable-1">:address</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span> <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">find-byte</span> drop add1 <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:address</span> sub <span class="cicada-nymph-save-local-variable-1">&gt;:length-of-one-variable</span>

  <span class="cicada-nymph-fetch-local-variable-1">:address</span>
  <span class="cicada-nymph-fetch-local-variable-1">:length-of-one-variable</span> sub1 .s .l

  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span>
  <span class="cicada-nymph-fetch-local-variable-1">:length</span> <span class="cicada-nymph-fetch-local-variable-1">:length-of-one-variable</span> sub
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;report&gt; environment-variable</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  get-environment-variable-list
  <span class="cicada-nymph-XdataX">&lt;report&gt;</span> <span class="cicada-nymph-XdataX">environment-variable,loop</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;report&gt; command-line,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; command-line[address, length] -- &gt;&gt;</span>
  dup2 <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">space?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup2 <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word</span> .s <span class="cicada-nymph-number">32</span> .b
  <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word-tail</span>
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;report&gt; command-line</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  get-command-line
  <span class="cicada-nymph-XdataX">&lt;report&gt;</span> <span class="cicada-nymph-XdataX">command-line,loop</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-memory</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*buffer,work-directory*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">get-work-directory</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- directory[address, length] &gt;&gt;</span>
  <span class="cicada-nymph-number">512</span>
  <span class="cicada-nymph-variable">*buffer,work-directory*</span>
  <span class="cicada-nymph-constant">:syscall-number,getcwd:</span>
  <span class="cicada-nymph-number">2</span> syscall
  dup negative? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (get-work-directory) fail"</span> .s .l
    <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-variable">*buffer,work-directory*</span>
  swap
  sub1 <span class="cicada-nymph-comment">&lt;&lt; for the ending zero &gt;&gt;</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">change-work-directory</span>
  <span class="cicada-nymph-comment">&lt;&lt; directory-path[address, length] -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::directory-path</span>
  <span class="cicada-nymph-fetch-local-variable-2">::directory-path</span>
  string-&gt;syscall-string
  <span class="cicada-nymph-constant">:syscall-number,chdir:</span>
  <span class="cicada-nymph-number">1</span> syscall
  dup negative? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (change-work-directory) fail"</span> .s .l
    <span class="cicada-nymph-string">"  can not change the work directory into : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::directory-path</span> .s .l
    <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  drop
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">+stat,st_dev+</span>        <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
<span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">+stat,st_ino+</span>        <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
<span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">+stat,st_mode+</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
<span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">+stat,st_nlink+</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
<span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">+stat,st_uid+</span>        <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
<span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">+stat,st_gid+</span>        <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
<span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">+stat,st_rdev+</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
<span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">+stat,st_size+</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
<span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">+stat,st_blksize+</span>    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
<span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">+stat,st_blocks+</span>     <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
<span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">+stat,st_atime+</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
<span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">+stat,st_atime_nsec+</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
<span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">+stat,st_mtime+</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
<span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">+stat,st_mtime_nsec+</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
<span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">+stat,st_ctime+</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
<span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">+stat,st_ctime_nsec+</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
<span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">+stat,__unused4+</span>     <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
<span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">+stat,__unused5+</span>     <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>
<span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">+stat,end+</span>           <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">init,stat</span>
  <span class="cicada-nymph-comment">&lt;&lt; offset -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">4</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_dev+</span>        set <span class="cicada-nymph-variable">*jo-size*</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_ino+</span>        set <span class="cicada-nymph-variable">*jo-size*</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_mode+</span>       set <span class="cicada-nymph-number">2</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_nlink+</span>      set <span class="cicada-nymph-number">2</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_uid+</span>        set <span class="cicada-nymph-number">2</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_gid+</span>        set <span class="cicada-nymph-number">2</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_rdev+</span>       set <span class="cicada-nymph-variable">*jo-size*</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_size+</span>       set <span class="cicada-nymph-variable">*jo-size*</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_blksize+</span>    set <span class="cicada-nymph-variable">*jo-size*</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_blocks+</span>     set <span class="cicada-nymph-variable">*jo-size*</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_atime+</span>      set <span class="cicada-nymph-variable">*jo-size*</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_atime_nsec+</span> set <span class="cicada-nymph-variable">*jo-size*</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_mtime+</span>      set <span class="cicada-nymph-variable">*jo-size*</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_mtime_nsec+</span> set <span class="cicada-nymph-variable">*jo-size*</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_ctime+</span>      set <span class="cicada-nymph-variable">*jo-size*</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_ctime_nsec+</span> set <span class="cicada-nymph-variable">*jo-size*</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,__unused4+</span>     set <span class="cicada-nymph-variable">*jo-size*</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,__unused5+</span>     set <span class="cicada-nymph-variable">*jo-size*</span> add
        <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,end+</span>           set
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">8</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_dev+</span>        set <span class="cicada-nymph-variable">*jo-size*</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_ino+</span>        set <span class="cicada-nymph-variable">*jo-size*</span> add
    <span class="cicada-nymph-comment">&lt;&lt;
    note the following order changing
    this is linux' bad
    &gt;&gt;</span>
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_nlink+</span>      set <span class="cicada-nymph-number">8</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_mode+</span>       set <span class="cicada-nymph-number">4</span> add

    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_uid+</span>        set <span class="cicada-nymph-number">4</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_gid+</span>        set <span class="cicada-nymph-number">4</span> add
                                          <span class="cicada-nymph-number">4</span> add <span class="cicada-nymph-comment">&lt;&lt; padding &gt;&gt;</span>
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_rdev+</span>       set <span class="cicada-nymph-variable">*jo-size*</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_size+</span>       set <span class="cicada-nymph-variable">*jo-size*</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_blksize+</span>    set <span class="cicada-nymph-variable">*jo-size*</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_blocks+</span>     set <span class="cicada-nymph-variable">*jo-size*</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_atime+</span>      set <span class="cicada-nymph-variable">*jo-size*</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_atime_nsec+</span> set <span class="cicada-nymph-variable">*jo-size*</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_mtime+</span>      set <span class="cicada-nymph-variable">*jo-size*</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_mtime_nsec+</span> set <span class="cicada-nymph-variable">*jo-size*</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_ctime+</span>      set <span class="cicada-nymph-variable">*jo-size*</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_ctime_nsec+</span> set <span class="cicada-nymph-variable">*jo-size*</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,__unused4+</span>     set <span class="cicada-nymph-variable">*jo-size*</span> add
    dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,__unused5+</span>     set <span class="cicada-nymph-variable">*jo-size*</span> add
        <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,end+</span>           set
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-number">0</span> <span class="cicada-nymph-title">init</span>,stat
<span class="cicada-nymph-constant">+stat,end+</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">+stat,length+</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">path,nothing?</span>
  <span class="cicada-nymph-comment">&lt;&lt; path[address, length] -- bool &gt;&gt;</span>
  string-&gt;syscall-string
  <span class="cicada-nymph-save-local-variable-1">&gt;:syscall-path</span>
  <span class="cicada-nymph-constant">+stat,length+</span> <span class="cicada-nymph-allocate">allocate-local-memory</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:stat-structure</span>
  <span class="cicada-nymph-fetch-local-variable-1">:stat-structure</span>
  <span class="cicada-nymph-fetch-local-variable-1">:syscall-path</span>
  <span class="cicada-nymph-constant">:syscall-number,stat:</span>
  <span class="cicada-nymph-number">2</span> syscall
  <span class="cicada-nymph-number">-2</span> equal?
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">path,file?</span>
  <span class="cicada-nymph-comment">&lt;&lt; path[address, length] -- bool &gt;&gt;</span>
  string-&gt;syscall-string
  <span class="cicada-nymph-save-local-variable-1">&gt;:syscall-path</span>
  <span class="cicada-nymph-constant">+stat,length+</span> <span class="cicada-nymph-allocate">allocate-local-memory</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:stat-structure</span>
  <span class="cicada-nymph-fetch-local-variable-1">:stat-structure</span>
  <span class="cicada-nymph-fetch-local-variable-1">:syscall-path</span>
  <span class="cicada-nymph-constant">:syscall-number,stat:</span>
  <span class="cicada-nymph-number">2</span> syscall
  dup
  negative? <span class="cicada-nymph-syntax-key-word">if</span>
    drop
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  drop
  <span class="cicada-nymph-fetch-local-variable-1">:stat-structure</span> <span class="cicada-nymph-title">init</span>,stat
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">4</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-constant">+stat,st_mode+</span>
    get-two-bytes
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">8</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-constant">+stat,st_mode+</span>
    get-four-bytes
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-number">12</span> bit-right
  <span class="cicada-nymph-number">8</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">0010</span>
  equal?
  <span class="cicada-nymph-comment">&lt;&lt;
  0170000
  S_IFDIR       0040000 /* Directory.  */
  S_IFCHR       0020000 /* Character device.  */
  S_IFBLK       0060000 /* Block device.  */
  S_IFREG       0100000 /* Regular file.  */
  S_IFIFO       0010000 /* FIFO.  */
  S_IFLNK       0120000 /* Symbolic link.  */
  S_IFSOCK      0140000 /* Socket.  */
  &gt;&gt;</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">path,directory?</span>
  <span class="cicada-nymph-comment">&lt;&lt; path[address, length] -- bool &gt;&gt;</span>
  string-&gt;syscall-string
  <span class="cicada-nymph-save-local-variable-1">&gt;:syscall-path</span>
  <span class="cicada-nymph-constant">+stat,length+</span> <span class="cicada-nymph-allocate">allocate-local-memory</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:stat-structure</span>
  <span class="cicada-nymph-fetch-local-variable-1">:stat-structure</span>
  <span class="cicada-nymph-fetch-local-variable-1">:syscall-path</span>
  <span class="cicada-nymph-constant">:syscall-number,stat:</span>
  <span class="cicada-nymph-number">2</span> syscall
  dup
  negative? <span class="cicada-nymph-syntax-key-word">if</span>
    drop
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  drop
  <span class="cicada-nymph-fetch-local-variable-1">:stat-structure</span> <span class="cicada-nymph-title">init</span>,stat
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">4</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-constant">+stat,st_mode+</span>
    get-two-bytes
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">8</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-constant">+stat,st_mode+</span>
    get-four-bytes
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-number">12</span> bit-right
  <span class="cicada-nymph-number">8</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">0004</span>
  equal?
  <span class="cicada-nymph-comment">&lt;&lt;
  0170000
  S_IFDIR       00040000 /* Directory.  */
  S_IFCHR       00020000 /* Character device.  */
  S_IFBLK       00060000 /* Block device.  */
  S_IFREG       00100000 /* Regular file.  */
  S_IFIFO       00010000 /* FIFO.  */
  S_IFLNK       00120000 /* Symbolic link.  */
  S_IFSOCK      00140000 /* Socket.  */
  &gt;&gt;</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">relative-path?</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- bool &gt;&gt;</span>
  dup zero? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">byte</span>
  <span class="cicada-nymph-number">47</span> equal? not
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">full-path?</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- bool &gt;&gt;</span>
  dup zero? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">byte</span>
  <span class="cicada-nymph-number">47</span> equal?
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*poi-directory,user,address*</span>
  <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-memory</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*poi-directory*</span>
  <span class="cicada-nymph-variable">*home-directory*</span> <span class="cicada-nymph-string">"/.cicada/poi"</span>
  <span class="cicada-nymph-variable">*poi-directory,user,address*</span>
  <span class="cicada-nymph-number">2</span> n-string-&gt;buffer!
  <span class="cicada-nymph-variable">*poi-directory,user,address*</span> swap
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;poi&gt; find</span>
  <span class="cicada-nymph-comment">&lt;&lt; name[address, length]
     -- path[address, length], true
     -- false &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::name</span>
  <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:buffer</span>
  <span class="cicada-nymph-variable">*poi-directory*</span> <span class="cicada-nymph-string">"/"</span> <span class="cicada-nymph-fetch-local-variable-2">::name</span> <span class="cicada-nymph-string">"/path"</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
  <span class="cicada-nymph-number">4</span> n-string-&gt;buffer! <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>

  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span>
  <span class="cicada-nymph-title">path</span>,file? not <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:read-buffer</span>
  <span class="cicada-nymph-fetch-local-variable-1">:read-buffer</span> <span class="cicada-nymph-number">512</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span>
  <span class="cicada-nymph-XdataX">&lt;file&gt;</span> <span class="cicada-nymph-XdataX">read</span> <span class="cicada-nymph-save-local-variable-1">&gt;:read-length</span>

  <span class="cicada-nymph-variable">*circular-string-area,current-free-address*</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:path-address</span>

  <span class="cicada-nymph-fetch-local-variable-1">:read-buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:read-length</span>
  <span class="cicada-nymph-title">circular-string-area</span>,stay

  <span class="cicada-nymph-fetch-local-variable-1">:path-address</span>
  <span class="cicada-nymph-fetch-local-variable-1">:read-length</span>
  <span class="cicada-nymph-bool">true</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;poi&gt; add</span>
  <span class="cicada-nymph-comment">&lt;&lt; name[address, length], relative-path[address, length] -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::relative-path</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::name</span>

  <span class="cicada-nymph-fetch-local-variable-2">::relative-path</span> relative-path? not <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (&lt;poi&gt; add) the argument must be a relative-path"</span> .s .l
    <span class="cicada-nymph-string">"  but the following is not : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::relative-path</span> .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-fetch-local-variable-2">::relative-path</span> <span class="cicada-nymph-title">path</span>,directory? not <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (&lt;poi&gt; add) the argument must be a relative-path to a existing directory"</span> .s .l
    <span class="cicada-nymph-string">"  but the following path is not to a directory : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::relative-path</span> .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-fetch-local-variable-2">::name</span> <span class="cicada-nymph-XdataX">&lt;poi&gt;</span> <span class="cicada-nymph-XdataX">find</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (&lt;poi&gt; add) can not add"</span> .s .l
    <span class="cicada-nymph-string">"  for the following poi already exist : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::name</span> .s .l
    <span class="cicada-nymph-string">"  name is use as the following directory's name : "</span> .s .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:buffer</span>
  <span class="cicada-nymph-variable">*poi-directory*</span> <span class="cicada-nymph-string">"/"</span> <span class="cicada-nymph-fetch-local-variable-2">::name</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
  <span class="cicada-nymph-number">3</span> n-string-&gt;buffer!
  <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span>
  <span class="cicada-nymph-XdataX">&lt;directory&gt;</span> <span class="cicada-nymph-XdataX">create</span>

  <span class="cicada-nymph-variable">*poi-directory*</span> <span class="cicada-nymph-string">"/"</span> <span class="cicada-nymph-fetch-local-variable-2">::name</span> <span class="cicada-nymph-string">"/path"</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
  <span class="cicada-nymph-number">4</span> n-string-&gt;buffer!
  <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span>
  <span class="cicada-nymph-XdataX">&lt;file&gt;</span> <span class="cicada-nymph-XdataX">create</span>

  <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:address,full-path</span>
  get-work-directory <span class="cicada-nymph-string">"/"</span> <span class="cicada-nymph-fetch-local-variable-2">::relative-path</span>
  <span class="cicada-nymph-fetch-local-variable-1">:address,full-path</span>
  <span class="cicada-nymph-number">3</span> n-string-&gt;buffer! <span class="cicada-nymph-save-local-variable-1">&gt;:length,full-path</span>

  <span class="cicada-nymph-fetch-local-variable-1">:address,full-path</span> <span class="cicada-nymph-fetch-local-variable-1">:length,full-path</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span>
  <span class="cicada-nymph-XdataX">&lt;file&gt;</span> <span class="cicada-nymph-XdataX">write</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;poi&gt; sub</span>
  <span class="cicada-nymph-comment">&lt;&lt; name[address, length] -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::name</span>

  <span class="cicada-nymph-fetch-local-variable-2">::name</span> <span class="cicada-nymph-XdataX">&lt;poi&gt;</span> <span class="cicada-nymph-XdataX">find</span> not <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (&lt;poi&gt; sub) can not sub"</span> .s .l
    <span class="cicada-nymph-string">"  for the following poi does not exist : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::name</span> .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::named-directory</span>

  <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:buffer</span>
  <span class="cicada-nymph-variable">*poi-directory*</span> <span class="cicada-nymph-string">"/"</span> <span class="cicada-nymph-fetch-local-variable-2">::name</span> <span class="cicada-nymph-string">"/path"</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
  <span class="cicada-nymph-number">4</span> n-string-&gt;buffer! <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>

  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span>
  <span class="cicada-nymph-XdataX">&lt;file&gt;</span> <span class="cicada-nymph-XdataX">remove</span>

  <span class="cicada-nymph-variable">*poi-directory*</span> <span class="cicada-nymph-string">"/"</span> <span class="cicada-nymph-fetch-local-variable-2">::name</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
  <span class="cicada-nymph-number">3</span> n-string-&gt;buffer!
  <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span>
  <span class="cicada-nymph-XdataX">&lt;directory&gt;</span> <span class="cicada-nymph-XdataX">remove</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;poi&gt; up</span>
  <span class="cicada-nymph-comment">&lt;&lt; name[address, length], relative-path[address, length] -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::relative-path</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::name</span>

  <span class="cicada-nymph-fetch-local-variable-2">::relative-path</span> relative-path? not <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (&lt;poi&gt; up) the argument must be a relative-path"</span> .s .l
    <span class="cicada-nymph-string">"  but the following is not : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::relative-path</span> .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-fetch-local-variable-2">::relative-path</span> <span class="cicada-nymph-title">path</span>,directory? not <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (&lt;poi&gt; up) the argument must be a relative-path to a existing directory"</span> .s .l
    <span class="cicada-nymph-string">"  but the following directory is not exist : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::relative-path</span> .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-fetch-local-variable-2">::name</span> <span class="cicada-nymph-XdataX">&lt;poi&gt;</span> <span class="cicada-nymph-XdataX">find</span> not <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (&lt;poi&gt; up) can not up"</span> .s .l
    <span class="cicada-nymph-string">"  for the following poi does not exist : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::name</span> .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::named-directory</span>

  <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:buffer</span>
  <span class="cicada-nymph-variable">*poi-directory*</span> <span class="cicada-nymph-string">"/"</span> <span class="cicada-nymph-fetch-local-variable-2">::name</span> <span class="cicada-nymph-string">"/path"</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
  <span class="cicada-nymph-number">4</span> n-string-&gt;buffer! <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>

  <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:address,full-path</span>
  get-work-directory <span class="cicada-nymph-string">"/"</span> <span class="cicada-nymph-fetch-local-variable-2">::relative-path</span>
  <span class="cicada-nymph-fetch-local-variable-1">:address,full-path</span>
  <span class="cicada-nymph-number">3</span> n-string-&gt;buffer! <span class="cicada-nymph-save-local-variable-1">&gt;:length,full-path</span>

  <span class="cicada-nymph-fetch-local-variable-1">:address,full-path</span> <span class="cicada-nymph-fetch-local-variable-1">:length,full-path</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span>
  <span class="cicada-nymph-XdataX">&lt;file&gt;</span> <span class="cicada-nymph-XdataX">write</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;poi&gt; list</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*poi-directory*</span>
  <span class="cicada-nymph-square-brackets">[</span> <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
    <span class="cicada-nymph-constant">+getdents64,d_type+</span> get-byte
    <span class="cicada-nymph-number">4</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
      <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:path-buffer</span>
      <span class="cicada-nymph-constant">+getdents64,d_name+</span>
      dup <span class="cicada-nymph-number">256</span>
      <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">find-byte</span>
      drop  <span class="cicada-nymph-comment">&lt;&lt; drop 0 &gt;&gt;</span>
      over sub <span class="cicada-nymph-save-local-variable-2">&gt;::name</span>

      <span class="cicada-nymph-string">".."</span> <span class="cicada-nymph-fetch-local-variable-2">::name</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-syntax-key-word">if</span>
        <span class="cicada-nymph-end">end</span>
      <span class="cicada-nymph-syntax-key-word">then</span>

      <span class="cicada-nymph-string">"."</span> <span class="cicada-nymph-fetch-local-variable-2">::name</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-syntax-key-word">if</span>
        <span class="cicada-nymph-end">end</span>
      <span class="cicada-nymph-syntax-key-word">then</span>

      <span class="cicada-nymph-string">"  * "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::name</span> .s .l
      <span class="cicada-nymph-string">"      "</span> .s

      <span class="cicada-nymph-variable">*poi-directory*</span> <span class="cicada-nymph-string">"/"</span> <span class="cicada-nymph-fetch-local-variable-2">::name</span> <span class="cicada-nymph-string">"/path"</span>
      <span class="cicada-nymph-fetch-local-variable-1">:path-buffer</span>
      <span class="cicada-nymph-number">4</span> n-string-&gt;buffer! <span class="cicada-nymph-save-local-variable-1">&gt;:path-length</span>

      <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:reading-buffer</span>
      <span class="cicada-nymph-fetch-local-variable-1">:reading-buffer</span> <span class="cicada-nymph-number">512</span>
      <span class="cicada-nymph-fetch-local-variable-1">:path-buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:path-length</span>
      <span class="cicada-nymph-XdataX">&lt;file&gt;</span> <span class="cicada-nymph-XdataX">read</span> <span class="cicada-nymph-save-local-variable-1">&gt;:reading-length</span>

      <span class="cicada-nymph-fetch-local-variable-1">:reading-buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:reading-length</span>
      .s .l
    <span class="cicada-nymph-syntax-key-word">then</span>
    <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-square-brackets">]</span>
  <span class="cicada-nymph-XdataX">&lt;directory&gt;</span> <span class="cicada-nymph-XdataX">map</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;poi&gt; help</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-string">"* (&lt;poi&gt; help)"</span> .s .l
  <span class="cicada-nymph-string">"  * cn poi add  &lt;new-name&gt; &lt;relative-path-to-existing-directory&gt;"</span> .s .l
  <span class="cicada-nymph-string">"  * cn poi sub  &lt;old-name&gt;"</span> .s .l
  <span class="cicada-nymph-string">"  * cn poi up   &lt;old-name&gt; &lt;relative-path-to-existing-directory&gt;"</span> .s .l
  <span class="cicada-nymph-string">"  * cn poi find &lt;old-name&gt;"</span> .s .l
  <span class="cicada-nymph-string">"  * cn poi list"</span> .s .l
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">+word+?</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- bool &gt;&gt;</span>
  dup <span class="cicada-nymph-number">1</span> less-or-equal? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  over get-byte
  <span class="cicada-nymph-string">"+"</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">byte</span> equal? not <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  add sub1 get-byte
  <span class="cicada-nymph-string">"+"</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">byte</span> equal?
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">+word+-&gt;word</span>
  <span class="cicada-nymph-comment">&lt;&lt; +word+[address, length] -- name[address, length] &gt;&gt;</span>
  sub2 swap
  add1 swap
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">path-syntax-word-&gt;path</span>
  <span class="cicada-nymph-comment">&lt;&lt; word[address, length] -- path[address, length] &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::word</span>
  <span class="cicada-nymph-fetch-local-variable-2">::word</span> <span class="cicada-nymph-string">"+root+"</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"/"</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-2">::word</span> <span class="cicada-nymph-string">"+work+"</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    get-work-directory
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-2">::word</span> <span class="cicada-nymph-string">"+home+"</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-variable">*home-directory*</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-2">::word</span> <span class="cicada-nymph-string">"+back+"</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">".."</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-2">::word</span> +word+? not <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-2">::word</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-2">::word</span> +word+-&gt;word <span class="cicada-nymph-XdataX">&lt;poi&gt;</span> <span class="cicada-nymph-XdataX">find</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-2">::word</span>
  <span class="cicada-nymph-quote">'bad-path-syntax-word</span> <span class="cicada-nymph-end">awake</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">bad-path-syntax-word,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  read-word
  dup2 <span class="cicada-nymph-string">";"</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    .s <span class="cicada-nymph-number">32</span> .b
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  .s <span class="cicada-nymph-number">32</span> .b
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;basic-REPL-syntax&gt; path,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; cursor -- cursor &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
  read-word <span class="cicada-nymph-save-local-variable-2">&gt;::word</span>

  <span class="cicada-nymph-string">";"</span> <span class="cicada-nymph-fetch-local-variable-2">::word</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-1">:cursor</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-fetch-local-variable-2">::word</span> path-syntax-word-&gt;path dup <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span>
  string-&gt;buffer!

  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span> add
    dup
    <span class="cicada-nymph-string">"/"</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">byte</span>
    swap
    set-byte
  add1
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;basic-REPL-syntax&gt; path</span>
  <span class="cicada-nymph-comment">&lt;&lt; word:path: -- path[address, length] &gt;&gt;</span>
  drop2

  <span class="cicada-nymph-square-brackets">[</span> <span class="cicada-nymph-comment">&lt;&lt; word -- &gt;&gt;</span>
    <span class="cicada-nymph-string">"* (&lt;basic-REPL-syntax&gt; path) the following word is of bad syntax : "</span> .s .l
    <span class="cicada-nymph-string">"    "</span> .s .s .l
    <span class="cicada-nymph-title">action</span>,reset-the-stack
    <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
    <span class="cicada-nymph-string">"  the rest of the words in path syntax is as following :"</span> .s .l
    <span class="cicada-nymph-string">"    "</span> .s <span class="cicada-nymph-title">bad-path-syntax-word</span>,loop .l
    <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-square-brackets">]</span>
  <span class="cicada-nymph-quote">'bad-path-syntax-word</span> <span class="cicada-nymph-await">await</span>

  <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:buffer</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> <span class="cicada-nymph-XdataX">&lt;basic-REPL-syntax&gt;</span> <span class="cicada-nymph-XdataX">path,loop</span> <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>

  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> sub <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>

  <span class="cicada-nymph-variable">*circular-string-area,current-free-address*</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:address</span>

  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
  <span class="cicada-nymph-fetch-local-variable-1">:length</span>
  <span class="cicada-nymph-title">circular-string-area</span>,stay

  <span class="cicada-nymph-fetch-local-variable-1">:address</span>
  <span class="cicada-nymph-fetch-local-variable-1">:length</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">more,rule-set,basic-REPL</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*rule-set,eval-word*</span>
  <span class="cicada-nymph-square-brackets">[</span><span class="cicada-nymph-string">"path:"</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-end">end</span><span class="cicada-nymph-square-brackets">]</span>
  <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-XdataX">&lt;basic-REPL-syntax&gt;</span> <span class="cicada-nymph-XdataX">path</span>
  <span class="cicada-nymph-XdataX">&lt;rule&gt;</span> <span class="cicada-nymph-XdataX">add</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>
<span class="cicada-nymph-title">more</span>,rule-set,basic-REPL

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;string&gt; full-of-the-same-byte?</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length], byte -- bool &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:byte</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::string</span>
  <span class="cicada-nymph-fetch-local-variable-2">::string</span> dup zero? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-bool">true</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">byte</span> <span class="cicada-nymph-fetch-local-variable-1">:byte</span> equal? not <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-2">::string</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">byte-tail</span>
  <span class="cicada-nymph-fetch-local-variable-1">:byte</span>
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;string&gt; any-word</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length]
     function : &lt; word[address, length] -- bool &gt;
     -- bool &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:function</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::string</span>
  <span class="cicada-nymph-fetch-local-variable-2">::string</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">space?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-2">::string</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word</span> <span class="cicada-nymph-fetch-local-variable-1">:function</span> apply <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-bool">true</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-2">::string</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word-tail</span>
  <span class="cicada-nymph-fetch-local-variable-1">:function</span>
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;string&gt; every-word</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length]
     function : &lt; word[address, length] -- bool &gt;
     -- bool &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:function</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::string</span>
  <span class="cicada-nymph-fetch-local-variable-2">::string</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">space?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-bool">true</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-2">::string</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word</span> <span class="cicada-nymph-fetch-local-variable-1">:function</span> apply not <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-2">::string</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word-tail</span>
  <span class="cicada-nymph-fetch-local-variable-1">:function</span>
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;string&gt; word-end-back</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- string[address, length] &gt;&gt;</span>
  dup zero? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-comment">&lt;&lt;
    no error handling
    the same empty-string is returned
    &gt;&gt;</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup2 <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">byte-back</span>
  <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">byte</span> space-byte? not <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">byte-back</span>
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;string&gt; word-begin-back,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- string[address, length] &gt;&gt;</span>
  dup zero? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-comment">&lt;&lt;
    no error handling
    the current empty-string is returned
    &gt;&gt;</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup2 <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">byte-back</span>
  <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">byte</span> space-byte? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup2 <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">byte-back</span>
  <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">byte</span> bar-ket-byte? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">byte-back</span>
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;string&gt; word-begin-back</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- string[address, length] &gt;&gt;</span>
  dup zero? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-comment">&lt;&lt;
    no error handling
    the same empty-string is returned
    &gt;&gt;</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup2 <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">byte-back</span>
  <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">byte</span> bar-ket-byte? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">byte-back</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word-begin-back,loop</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;string&gt; word-back</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- string[address, length] &gt;&gt;</span>
  <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word-end-back</span>
  <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word-begin-back</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">unread-word</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  pop-reading-stack
  <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word-back</span>
  push-reading-stack
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;rule-set&gt; mixin,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; base-rule-set, border, cursor -- &gt;&gt;</span>
  dup2 equal? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    drop
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-XdataX">&lt;rule&gt;</span> <span class="cicada-nymph-XdataX">get</span> <span class="cicada-nymph-save-local-variable-2">&gt;::rule</span>
  x|over|xx <span class="cicada-nymph-fetch-local-variable-2">::rule</span> <span class="cicada-nymph-XdataX">&lt;rule&gt;</span> <span class="cicada-nymph-XdataX">add</span>
  <span class="cicada-nymph-XdataX">&lt;rule&gt;</span> <span class="cicada-nymph-variable">*unit*</span> add
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;rule-set&gt; mixin</span>
  <span class="cicada-nymph-comment">&lt;&lt; base-rule-set, rule-set -- &gt;&gt;</span>
  dup <span class="cicada-nymph-XdataX">&lt;rule-set&gt;</span> <span class="cicada-nymph-XdataX">get-border</span> swap
  <span class="cicada-nymph-XdataX">&lt;rule-set&gt;</span> <span class="cicada-nymph-XdataX">mixin,loop</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;rule-set&gt; mixout,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; base-rule-set, border, cursor -- &gt;&gt;</span>
  dup2 equal? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    drop
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-XdataX">&lt;rule&gt;</span> <span class="cicada-nymph-XdataX">get</span> <span class="cicada-nymph-save-local-variable-2">&gt;::rule</span>
  x|over|xx <span class="cicada-nymph-fetch-local-variable-2">::rule</span> <span class="cicada-nymph-XdataX">&lt;rule&gt;</span> <span class="cicada-nymph-XdataX">sub</span>
  <span class="cicada-nymph-XdataX">&lt;rule&gt;</span> <span class="cicada-nymph-variable">*unit*</span> add
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;rule-set&gt; mixout</span>
  <span class="cicada-nymph-comment">&lt;&lt; base-rule-set, rule-set -- &gt;&gt;</span>
  dup <span class="cicada-nymph-XdataX">&lt;rule-set&gt;</span> <span class="cicada-nymph-XdataX">get-border</span> swap
  <span class="cicada-nymph-XdataX">&lt;rule-set&gt;</span> <span class="cicada-nymph-XdataX">mixout,loop</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-number">100</span> <span class="cicada-nymph-number">1024</span> mul
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*module-naming-stack,size*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-number">3</span> <span class="cicada-nymph-variable">*jo-size*</span> mul
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*module-naming-stack,unit*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-variable">*module-naming-stack,size*</span>
<span class="cicada-nymph-variable">*module-naming-stack,unit*</span> mul <span class="cicada-nymph-allocate">allocate-memory</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*module-naming-stack*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-variable">*module-naming-stack*</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*module-naming-stack,pointer*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*module-directory,user,address*</span>
  <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-memory</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*module-directory*</span>
  <span class="cicada-nymph-variable">*home-directory*</span> <span class="cicada-nymph-string">"/.cicada/moi"</span>
  <span class="cicada-nymph-variable">*module-directory,user,address*</span>
  <span class="cicada-nymph-number">2</span> n-string-&gt;buffer!
  <span class="cicada-nymph-variable">*module-directory,user,address*</span> swap
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;moi&gt; find</span>
  <span class="cicada-nymph-comment">&lt;&lt; name[address, length]
     -- path[address, length], true
     -- false &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::name</span>
  <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:buffer</span>
  <span class="cicada-nymph-variable">*module-directory*</span> <span class="cicada-nymph-string">"/"</span> <span class="cicada-nymph-fetch-local-variable-2">::name</span> <span class="cicada-nymph-string">"/path"</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
  <span class="cicada-nymph-number">4</span> n-string-&gt;buffer! <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>

  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span>
  <span class="cicada-nymph-title">path</span>,file? not <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:read-buffer</span>
  <span class="cicada-nymph-fetch-local-variable-1">:read-buffer</span> <span class="cicada-nymph-number">512</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span>
  <span class="cicada-nymph-XdataX">&lt;file&gt;</span> <span class="cicada-nymph-XdataX">read</span> <span class="cicada-nymph-save-local-variable-1">&gt;:read-length</span>

  <span class="cicada-nymph-variable">*circular-string-area,current-free-address*</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:path-address</span>

  <span class="cicada-nymph-fetch-local-variable-1">:read-buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:read-length</span>
  <span class="cicada-nymph-title">circular-string-area</span>,stay

  <span class="cicada-nymph-fetch-local-variable-1">:path-address</span>
  <span class="cicada-nymph-fetch-local-variable-1">:read-length</span>
  <span class="cicada-nymph-bool">true</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;moi&gt; add</span>
  <span class="cicada-nymph-comment">&lt;&lt; name[address, length], relative-path[address, length] -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::relative-path</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::name</span>

  <span class="cicada-nymph-fetch-local-variable-2">::relative-path</span> relative-path? not <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (&lt;moi&gt; add) the argument must be a relative-path"</span> .s .l
    <span class="cicada-nymph-string">"  but the following is not : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::relative-path</span> .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-fetch-local-variable-2">::relative-path</span> <span class="cicada-nymph-title">path</span>,file? not <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (&lt;moi&gt; add) the argument must be a relative-path to a existing file"</span> .s .l
    <span class="cicada-nymph-string">"  but the following path is not to a file : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::relative-path</span> .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-fetch-local-variable-2">::name</span> <span class="cicada-nymph-XdataX">&lt;moi&gt;</span> <span class="cicada-nymph-XdataX">find</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (&lt;moi&gt; add) can not add"</span> .s .l
    <span class="cicada-nymph-string">"  for the following module already exist : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::name</span> .s .l
    <span class="cicada-nymph-string">"  name is use as the following directory's name : "</span> .s .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:buffer</span>
  <span class="cicada-nymph-variable">*module-directory*</span> <span class="cicada-nymph-string">"/"</span> <span class="cicada-nymph-fetch-local-variable-2">::name</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
  <span class="cicada-nymph-number">3</span> n-string-&gt;buffer!
  <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span>
  <span class="cicada-nymph-XdataX">&lt;directory&gt;</span> <span class="cicada-nymph-XdataX">create</span>

  <span class="cicada-nymph-variable">*module-directory*</span> <span class="cicada-nymph-string">"/"</span> <span class="cicada-nymph-fetch-local-variable-2">::name</span> <span class="cicada-nymph-string">"/path"</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
  <span class="cicada-nymph-number">4</span> n-string-&gt;buffer!
  <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span>
  <span class="cicada-nymph-XdataX">&lt;file&gt;</span> <span class="cicada-nymph-XdataX">create</span>

  <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:address,full-path</span>
  get-work-directory <span class="cicada-nymph-string">"/"</span> <span class="cicada-nymph-fetch-local-variable-2">::relative-path</span>
  <span class="cicada-nymph-fetch-local-variable-1">:address,full-path</span>
  <span class="cicada-nymph-number">3</span> n-string-&gt;buffer! <span class="cicada-nymph-save-local-variable-1">&gt;:length,full-path</span>

  <span class="cicada-nymph-fetch-local-variable-1">:address,full-path</span> <span class="cicada-nymph-fetch-local-variable-1">:length,full-path</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span>
  <span class="cicada-nymph-XdataX">&lt;file&gt;</span> <span class="cicada-nymph-XdataX">write</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;moi&gt; sub</span>
  <span class="cicada-nymph-comment">&lt;&lt; name[address, length] -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::name</span>

  <span class="cicada-nymph-fetch-local-variable-2">::name</span> <span class="cicada-nymph-XdataX">&lt;moi&gt;</span> <span class="cicada-nymph-XdataX">find</span> not <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (&lt;moi&gt; sub) can not sub"</span> .s .l
    <span class="cicada-nymph-string">"  for the following module does not exist : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::name</span> .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::named-directory</span>

  <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:buffer</span>
  <span class="cicada-nymph-variable">*module-directory*</span> <span class="cicada-nymph-string">"/"</span> <span class="cicada-nymph-fetch-local-variable-2">::name</span> <span class="cicada-nymph-string">"/path"</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
  <span class="cicada-nymph-number">4</span> n-string-&gt;buffer! <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>

  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span>
  <span class="cicada-nymph-XdataX">&lt;file&gt;</span> <span class="cicada-nymph-XdataX">remove</span>

  <span class="cicada-nymph-variable">*module-directory*</span> <span class="cicada-nymph-string">"/"</span> <span class="cicada-nymph-fetch-local-variable-2">::name</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
  <span class="cicada-nymph-number">3</span> n-string-&gt;buffer!
  <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span>
  <span class="cicada-nymph-XdataX">&lt;directory&gt;</span> <span class="cicada-nymph-XdataX">remove</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;moi&gt; up</span>
  <span class="cicada-nymph-comment">&lt;&lt; name[address, length], relative-path[address, length] -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::relative-path</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::name</span>

  <span class="cicada-nymph-fetch-local-variable-2">::relative-path</span> relative-path? not <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (&lt;moi&gt; up) the argument must be a relative-path"</span> .s .l
    <span class="cicada-nymph-string">"  but the following is not : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::relative-path</span> .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-fetch-local-variable-2">::relative-path</span> <span class="cicada-nymph-title">path</span>,file? not <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (&lt;moi&gt; up) the argument must be a relative-path to a existing file"</span> .s .l
    <span class="cicada-nymph-string">"  but the following file is not exist : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::relative-path</span> .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-fetch-local-variable-2">::name</span> <span class="cicada-nymph-XdataX">&lt;moi&gt;</span> <span class="cicada-nymph-XdataX">find</span> not <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (&lt;moi&gt; up) can not up"</span> .s .l
    <span class="cicada-nymph-string">"  for the following module does not exist : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::name</span> .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::named-directory</span>

  <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:buffer</span>
  <span class="cicada-nymph-variable">*module-directory*</span> <span class="cicada-nymph-string">"/"</span> <span class="cicada-nymph-fetch-local-variable-2">::name</span> <span class="cicada-nymph-string">"/path"</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
  <span class="cicada-nymph-number">4</span> n-string-&gt;buffer! <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>

  <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:address,full-path</span>
  get-work-directory <span class="cicada-nymph-string">"/"</span> <span class="cicada-nymph-fetch-local-variable-2">::relative-path</span>
  <span class="cicada-nymph-fetch-local-variable-1">:address,full-path</span>
  <span class="cicada-nymph-number">3</span> n-string-&gt;buffer! <span class="cicada-nymph-save-local-variable-1">&gt;:length,full-path</span>

  <span class="cicada-nymph-fetch-local-variable-1">:address,full-path</span> <span class="cicada-nymph-fetch-local-variable-1">:length,full-path</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span>
  <span class="cicada-nymph-XdataX">&lt;file&gt;</span> <span class="cicada-nymph-XdataX">write</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;moi&gt; list</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*module-directory*</span>
  <span class="cicada-nymph-square-brackets">[</span> <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
    <span class="cicada-nymph-constant">+getdents64,d_type+</span> get-byte
    <span class="cicada-nymph-number">4</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
      <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:path-buffer</span>
      <span class="cicada-nymph-constant">+getdents64,d_name+</span>
      dup <span class="cicada-nymph-number">256</span>
      <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">find-byte</span>
      drop  <span class="cicada-nymph-comment">&lt;&lt; drop 0 &gt;&gt;</span>
      over sub <span class="cicada-nymph-save-local-variable-2">&gt;::name</span>

      <span class="cicada-nymph-string">".."</span> <span class="cicada-nymph-fetch-local-variable-2">::name</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-syntax-key-word">if</span>
        <span class="cicada-nymph-end">end</span>
      <span class="cicada-nymph-syntax-key-word">then</span>

      <span class="cicada-nymph-string">"."</span> <span class="cicada-nymph-fetch-local-variable-2">::name</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-syntax-key-word">if</span>
        <span class="cicada-nymph-end">end</span>
      <span class="cicada-nymph-syntax-key-word">then</span>

      <span class="cicada-nymph-string">"  * "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::name</span> .s .l
      <span class="cicada-nymph-string">"      "</span> .s

      <span class="cicada-nymph-variable">*module-directory*</span> <span class="cicada-nymph-string">"/"</span> <span class="cicada-nymph-fetch-local-variable-2">::name</span> <span class="cicada-nymph-string">"/path"</span>
      <span class="cicada-nymph-fetch-local-variable-1">:path-buffer</span>
      <span class="cicada-nymph-number">4</span> n-string-&gt;buffer! <span class="cicada-nymph-save-local-variable-1">&gt;:path-length</span>

      <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:reading-buffer</span>
      <span class="cicada-nymph-fetch-local-variable-1">:reading-buffer</span> <span class="cicada-nymph-number">512</span>
      <span class="cicada-nymph-fetch-local-variable-1">:path-buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:path-length</span>
      <span class="cicada-nymph-XdataX">&lt;file&gt;</span> <span class="cicada-nymph-XdataX">read</span> <span class="cicada-nymph-save-local-variable-1">&gt;:reading-length</span>

      <span class="cicada-nymph-fetch-local-variable-1">:reading-buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:reading-length</span>
      .s .l
    <span class="cicada-nymph-syntax-key-word">then</span>
    <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-square-brackets">]</span>
  <span class="cicada-nymph-XdataX">&lt;directory&gt;</span> <span class="cicada-nymph-XdataX">map</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;moi&gt; help</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-string">"* (&lt;moi&gt; help)"</span> .s .l
  <span class="cicada-nymph-string">"  * cn module add  &lt;new-name&gt; &lt;relative-path-to-existing-directory&gt;"</span> .s .l
  <span class="cicada-nymph-string">"  * cn module sub  &lt;old-name&gt;"</span> .s .l
  <span class="cicada-nymph-string">"  * cn module up   &lt;old-name&gt; &lt;relative-path-to-existing-directory&gt;"</span> .s .l
  <span class="cicada-nymph-string">"  * cn module find &lt;old-name&gt;"</span> .s .l
  <span class="cicada-nymph-string">"  * cn module list"</span> .s .l
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-number">10</span> <span class="cicada-nymph-number">1024</span> mul
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*module-stack,size*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-number">5</span> <span class="cicada-nymph-variable">*jo-size*</span> mul
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*module-stack,unit*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-variable">*module-stack,size*</span>
<span class="cicada-nymph-variable">*module-stack,unit*</span> mul <span class="cicada-nymph-allocate">allocate-memory</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*module-stack*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-variable">*module-stack*</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*module-stack,pointer*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;module-info&gt; get-meta-string</span>
  <span class="cicada-nymph-comment">&lt;&lt; module-info -- meta-string[address, length] &gt;&gt;</span>
  <span class="cicada-nymph-number">2</span> n-get
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;module-info&gt; set-meta-string</span>
  <span class="cicada-nymph-comment">&lt;&lt; meta-string[address, length], module-info -- &gt;&gt;</span>
  xx|swap|x make-string x|swap|xx
  <span class="cicada-nymph-number">2</span> n-set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;module-info&gt; get-name</span>
  <span class="cicada-nymph-comment">&lt;&lt; module-info -- name &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">2</span> mul add
  get
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;module-info&gt; set-name</span>
  <span class="cicada-nymph-comment">&lt;&lt; name, module-info -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">2</span> mul add
  set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;module-info&gt; get-name-record-begin</span>
  <span class="cicada-nymph-comment">&lt;&lt; module-info -- name &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">3</span> mul add
  get
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;module-info&gt; set-name-record-begin</span>
  <span class="cicada-nymph-comment">&lt;&lt; name, module-info -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">3</span> mul add
  set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;module-info&gt; get-name-record-end</span>
  <span class="cicada-nymph-comment">&lt;&lt; module-info -- name &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">4</span> mul add
  get
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;module-info&gt; set-name-record-end</span>
  <span class="cicada-nymph-comment">&lt;&lt; name, module-info -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">4</span> mul add
  set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;module-stack&gt; find,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; name, cursor
     -- module-info, true
     -- false &gt;&gt;</span>
  dup <span class="cicada-nymph-variable">*module-stack,pointer*</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:name</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-XdataX">&lt;module-info&gt;</span> <span class="cicada-nymph-XdataX">get-name</span>
  <span class="cicada-nymph-fetch-local-variable-1">:name</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-1">:cursor</span>
    <span class="cicada-nymph-bool">true</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-1">:name</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-variable">*module-stack,unit*</span> add
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;module-stack&gt; find</span>
  <span class="cicada-nymph-comment">&lt;&lt; name
     -- module-info, true
     -- false &gt;&gt;</span>
  <span class="cicada-nymph-variable">*module-stack*</span>
  <span class="cicada-nymph-XdataX">&lt;module-stack&gt;</span> <span class="cicada-nymph-XdataX">find,loop</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-number">10</span> <span class="cicada-nymph-number">1024</span> mul
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*importing-stack,size*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-number">1</span> <span class="cicada-nymph-variable">*jo-size*</span> mul
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*importing-stack,unit*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-variable">*importing-stack,size*</span>
<span class="cicada-nymph-variable">*importing-stack,unit*</span> mul <span class="cicada-nymph-allocate">allocate-memory</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*importing-stack*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-variable">*importing-stack*</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*importing-stack,pointer*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;importing-record&gt; get-name</span>
  <span class="cicada-nymph-comment">&lt;&lt; module-info -- name &gt;&gt;</span>
  get
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;importing-record&gt; set-name</span>
  <span class="cicada-nymph-comment">&lt;&lt; name, module-info -- &gt;&gt;</span>
  set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;importing-stack&gt; find,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; name, cursor
     -- importing-record, true
     -- false &gt;&gt;</span>
  dup <span class="cicada-nymph-variable">*importing-stack,pointer*</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:name</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-XdataX">&lt;importing-record&gt;</span> <span class="cicada-nymph-XdataX">get-name</span>
  <span class="cicada-nymph-fetch-local-variable-1">:name</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-1">:cursor</span>
    <span class="cicada-nymph-bool">true</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-1">:name</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-variable">*importing-stack,unit*</span> add
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;importing-stack&gt; find</span>
  <span class="cicada-nymph-comment">&lt;&lt; name
     -- importing-record, true
     -- false &gt;&gt;</span>
  <span class="cicada-nymph-variable">*importing-stack*</span>
  <span class="cicada-nymph-XdataX">&lt;importing-stack&gt;</span> <span class="cicada-nymph-XdataX">find,loop</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;importing-record&gt; drop</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*importing-stack,unit*</span> <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*importing-stack,pointer*</span> sub-set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;module-naming-stack&gt; record-jo</span>
  <span class="cicada-nymph-comment">&lt;&lt; jo, name -- &gt;&gt;</span>
  dup <span class="cicada-nymph-title">name</span>,get-jo
  <span class="cicada-nymph-variable">*module-naming-stack,pointer*</span> <span class="cicada-nymph-title">name-record</span>,set-old-jo
  dup2 <span class="cicada-nymph-title">name</span>,set-jo
  <span class="cicada-nymph-variable">*module-naming-stack,pointer*</span> <span class="cicada-nymph-title">name-record</span>,set-name
  <span class="cicada-nymph-variable">*module-naming-stack,pointer*</span> <span class="cicada-nymph-title">name-record</span>,set-new-jo
  <span class="cicada-nymph-variable">*module-naming-stack,unit*</span> <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*module-naming-stack,pointer*</span> add-set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;module-naming-stack&gt; delete-last-record</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*module-naming-stack,unit*</span>
  <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*module-naming-stack,pointer*</span>
  sub-set
  <span class="cicada-nymph-variable">*module-naming-stack,pointer*</span> <span class="cicada-nymph-title">name-record</span>,get-old-jo
  <span class="cicada-nymph-variable">*module-naming-stack,pointer*</span> <span class="cicada-nymph-title">name-record</span>,get-name
  <span class="cicada-nymph-title">name</span>,set-jo
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;global-naming-stack&gt; clear-naming</span>
  <span class="cicada-nymph-comment">&lt;&lt; name-record-begin, name-record-end -- &gt;&gt;</span>
  dup2 equal? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-variable">*global-naming-stack,unit*</span> sub
  dup <span class="cicada-nymph-save-local-variable-1">&gt;:name-record</span>
  <span class="cicada-nymph-fetch-local-variable-1">:name-record</span> <span class="cicada-nymph-XdataX">&lt;name-record&gt;</span> <span class="cicada-nymph-XdataX">get-old-jo</span>
  <span class="cicada-nymph-fetch-local-variable-1">:name-record</span> <span class="cicada-nymph-XdataX">&lt;name-record&gt;</span> <span class="cicada-nymph-XdataX">get-name</span>
  <span class="cicada-nymph-title">name</span>,set-jo
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;module-naming-stack&gt; clear-naming</span>
  <span class="cicada-nymph-comment">&lt;&lt; name-record-begin, name-record-end -- &gt;&gt;</span>
  dup2 equal? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-variable">*module-naming-stack,unit*</span> sub
  dup <span class="cicada-nymph-save-local-variable-1">&gt;:name-record</span>
  <span class="cicada-nymph-fetch-local-variable-1">:name-record</span> <span class="cicada-nymph-XdataX">&lt;name-record&gt;</span> <span class="cicada-nymph-XdataX">get-old-jo</span>
  <span class="cicada-nymph-fetch-local-variable-1">:name-record</span> <span class="cicada-nymph-XdataX">&lt;name-record&gt;</span> <span class="cicada-nymph-XdataX">get-name</span>
  <span class="cicada-nymph-title">name</span>,set-jo
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;global-naming-stack&gt; prefix-naming</span>
  <span class="cicada-nymph-comment">&lt;&lt; name-record-begin, name-record-end, prefix[name-index] -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:prefix</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:end</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:begin</span>
  <span class="cicada-nymph-fetch-local-variable-1">:end</span> <span class="cicada-nymph-fetch-local-variable-1">:begin</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:buffer</span>
  <span class="cicada-nymph-fetch-local-variable-1">:prefix</span> name-&gt;string <span class="cicada-nymph-string">" "</span> <span class="cicada-nymph-fetch-local-variable-1">:begin</span> <span class="cicada-nymph-XdataX">&lt;name-record&gt;</span> <span class="cicada-nymph-XdataX">get-name</span> name-&gt;string
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> <span class="cicada-nymph-number">3</span> n-string-&gt;buffer! <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>

  <span class="cicada-nymph-fetch-local-variable-1">:begin</span> <span class="cicada-nymph-XdataX">&lt;name-record&gt;</span> <span class="cicada-nymph-XdataX">get-new-jo</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span> string-&gt;name
  <span class="cicada-nymph-XdataX">&lt;module-naming-stack&gt;</span> <span class="cicada-nymph-XdataX">record-jo</span>

  <span class="cicada-nymph-fetch-local-variable-1">:begin</span> <span class="cicada-nymph-variable">*global-naming-stack,unit*</span> add
  <span class="cicada-nymph-fetch-local-variable-1">:end</span>
  <span class="cicada-nymph-fetch-local-variable-1">:prefix</span>
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;module-naming-stack&gt; expose-naming</span>
  <span class="cicada-nymph-comment">&lt;&lt; name-record-begin, name-record-end -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:end</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:begin</span>
  <span class="cicada-nymph-fetch-local-variable-1">:end</span> <span class="cicada-nymph-fetch-local-variable-1">:begin</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-fetch-local-variable-1">:begin</span> <span class="cicada-nymph-XdataX">&lt;name-record&gt;</span> <span class="cicada-nymph-XdataX">get-new-jo</span>
  <span class="cicada-nymph-fetch-local-variable-1">:begin</span> <span class="cicada-nymph-XdataX">&lt;name-record&gt;</span> <span class="cicada-nymph-XdataX">get-name</span>
  name-&gt;string
  <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word-tail</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">byte-tail</span>
  string-&gt;name
  <span class="cicada-nymph-XdataX">&lt;global-naming-stack&gt;</span> <span class="cicada-nymph-XdataX">record-jo</span>

  <span class="cicada-nymph-fetch-local-variable-1">:begin</span> <span class="cicada-nymph-variable">*module-naming-stack,unit*</span> add
  <span class="cicada-nymph-fetch-local-variable-1">:end</span>
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-number">60</span> <span class="cicada-nymph-number">1024</span> mul
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*undo-stack,size*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-number">7</span> <span class="cicada-nymph-variable">*jo-size*</span> mul
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*undo-stack,unit*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-variable">*undo-stack,size*</span>
<span class="cicada-nymph-variable">*undo-stack,unit*</span> mul <span class="cicada-nymph-allocate">allocate-memory</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*undo-stack*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-variable">*undo-stack*</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*undo-stack,pointer*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;undo-point&gt; get-jojo-area</span>
  <span class="cicada-nymph-comment">&lt;&lt; undo-point -- jojo-area current-free-address &gt;&gt;</span>
  get
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;undo-point&gt; set-jojo-area</span>
  <span class="cicada-nymph-comment">&lt;&lt; jojo-area current-free-address, undo-point -- &gt;&gt;</span>
  set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;undo-point&gt; get-string-area</span>
  <span class="cicada-nymph-comment">&lt;&lt; undo-point -- jojo-area current-free-address &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jo-size*</span> add get
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;undo-point&gt; set-string-area</span>
  <span class="cicada-nymph-comment">&lt;&lt; jojo-area current-free-address, undo-point -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jo-size*</span> add set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;undo-point&gt; get-global-naming-stack</span>
  <span class="cicada-nymph-comment">&lt;&lt; undo-point -- jojo-area current-free-address &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">2</span> mul add get
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;undo-point&gt; set-global-naming-stack</span>
  <span class="cicada-nymph-comment">&lt;&lt; jojo-area current-free-address, undo-point -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">2</span> mul add set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;undo-point&gt; get-module-naming-stack</span>
  <span class="cicada-nymph-comment">&lt;&lt; undo-point -- jojo-area current-free-address &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">3</span> mul add get
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;undo-point&gt; set-module-naming-stack</span>
  <span class="cicada-nymph-comment">&lt;&lt; jojo-area current-free-address, undo-point -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">3</span> mul add set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;undo-point&gt; get-syntax-backup-area</span>
  <span class="cicada-nymph-comment">&lt;&lt; undo-point -- jojo-area current-free-address &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">4</span> mul add get
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;undo-point&gt; set-syntax-backup-area</span>
  <span class="cicada-nymph-comment">&lt;&lt; jojo-area current-free-address, undo-point -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">4</span> mul add set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;undo-point&gt; get-number-of-rule-sets</span>
  <span class="cicada-nymph-comment">&lt;&lt; undo-point -- jojo-area current-free-address &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">5</span> mul add get
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;undo-point&gt; set-number-of-rule-sets</span>
  <span class="cicada-nymph-comment">&lt;&lt; jojo-area current-free-address, undo-point -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">5</span> mul add set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;undo-point&gt; get-importing-stack</span>
  <span class="cicada-nymph-comment">&lt;&lt; undo-point -- jojo-area current-free-address &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">6</span> mul add get
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;undo-point&gt; set-importing-stack</span>
  <span class="cicada-nymph-comment">&lt;&lt; jojo-area current-free-address, undo-point -- &gt;&gt;</span>
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">6</span> mul add set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-number">20</span> <span class="cicada-nymph-number">1024</span> mul
<span class="cicada-nymph-variable">*jo-size*</span> mul
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*syntax-backup-area,size*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-variable">*syntax-backup-area,size*</span> <span class="cicada-nymph-allocate">allocate-memory</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*syntax-backup-area*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-variable">*syntax-backup-area*</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*syntax-backup-area,current-free-address*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;undo-point&gt; create,copy-syntax,one-rule-set</span>
  <span class="cicada-nymph-comment">&lt;&lt; rule-set -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:rule-set</span>
  <span class="cicada-nymph-fetch-local-variable-1">:rule-set</span> <span class="cicada-nymph-XdataX">&lt;rule-set&gt;</span> <span class="cicada-nymph-XdataX">get-border</span> <span class="cicada-nymph-save-local-variable-1">&gt;:border</span>
  <span class="cicada-nymph-fetch-local-variable-1">:border</span> <span class="cicada-nymph-fetch-local-variable-1">:rule-set</span> sub
  <span class="cicada-nymph-variable">*jo-size*</span> div <span class="cicada-nymph-save-local-variable-1">&gt;:n</span>

  <span class="cicada-nymph-fetch-local-variable-1">:rule-set</span>
  <span class="cicada-nymph-variable">*syntax-backup-area,current-free-address*</span> set
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*syntax-backup-area,current-free-address*</span> add-set

  <span class="cicada-nymph-fetch-local-variable-1">:n</span>
  <span class="cicada-nymph-variable">*syntax-backup-area,current-free-address*</span> set
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*syntax-backup-area,current-free-address*</span> add-set

  <span class="cicada-nymph-fetch-local-variable-1">:rule-set</span>
  <span class="cicada-nymph-fetch-local-variable-1">:n</span> n-get
  <span class="cicada-nymph-variable">*syntax-backup-area,current-free-address*</span>
  <span class="cicada-nymph-fetch-local-variable-1">:n</span> n-set
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-fetch-local-variable-1">:n</span> mul
  <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*syntax-backup-area,current-free-address*</span> add-set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;undo-point&gt; create,copy-syntax</span>
  <span class="cicada-nymph-comment">&lt;&lt; cursor -- &gt;&gt;</span>
  dup <span class="cicada-nymph-variable">*syntax-stack,pointer*</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
    drop
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup get <span class="cicada-nymph-XdataX">&lt;undo-point&gt;</span> <span class="cicada-nymph-XdataX">create,copy-syntax,one-rule-set</span>
  <span class="cicada-nymph-variable">*jo-size*</span> add
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;undo-point&gt; create</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- undo-point &gt;&gt;</span>
  <span class="cicada-nymph-variable">*undo-stack,pointer*</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:undo-point</span>

  <span class="cicada-nymph-variable">*undo-stack,unit*</span>
  <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*undo-stack,pointer*</span>
  add-set

  <span class="cicada-nymph-variable">*jojo-area,current-free-address*</span>
  <span class="cicada-nymph-fetch-local-variable-1">:undo-point</span>
  <span class="cicada-nymph-XdataX">&lt;undo-point&gt;</span> <span class="cicada-nymph-XdataX">set-jojo-area</span>

  <span class="cicada-nymph-variable">*string-area,current-free-address*</span>
  <span class="cicada-nymph-fetch-local-variable-1">:undo-point</span>
  <span class="cicada-nymph-XdataX">&lt;undo-point&gt;</span> <span class="cicada-nymph-XdataX">set-string-area</span>

  <span class="cicada-nymph-variable">*global-naming-stack,pointer*</span>
  <span class="cicada-nymph-fetch-local-variable-1">:undo-point</span>
  <span class="cicada-nymph-XdataX">&lt;undo-point&gt;</span> <span class="cicada-nymph-XdataX">set-global-naming-stack</span>

  <span class="cicada-nymph-variable">*module-naming-stack,pointer*</span>
  <span class="cicada-nymph-fetch-local-variable-1">:undo-point</span>
  <span class="cicada-nymph-XdataX">&lt;undo-point&gt;</span> <span class="cicada-nymph-XdataX">set-module-naming-stack</span>

  <span class="cicada-nymph-variable">*importing-stack,pointer*</span>
  <span class="cicada-nymph-fetch-local-variable-1">:undo-point</span>
  <span class="cicada-nymph-XdataX">&lt;undo-point&gt;</span> <span class="cicada-nymph-XdataX">set-importing-stack</span>

  <span class="cicada-nymph-variable">*syntax-backup-area,current-free-address*</span>
  <span class="cicada-nymph-fetch-local-variable-1">:undo-point</span>
  <span class="cicada-nymph-XdataX">&lt;undo-point&gt;</span> <span class="cicada-nymph-XdataX">set-syntax-backup-area</span>

  <span class="cicada-nymph-variable">*syntax-stack,address*</span>
  <span class="cicada-nymph-XdataX">&lt;undo-point&gt;</span> <span class="cicada-nymph-XdataX">create,copy-syntax</span>

  <span class="cicada-nymph-variable">*syntax-stack,pointer*</span>
  <span class="cicada-nymph-variable">*syntax-stack,address*</span> sub
  <span class="cicada-nymph-variable">*jo-size*</span> div
  <span class="cicada-nymph-fetch-local-variable-1">:undo-point</span>
  <span class="cicada-nymph-XdataX">&lt;undo-point&gt;</span> <span class="cicada-nymph-XdataX">set-number-of-rule-sets</span>

  <span class="cicada-nymph-fetch-local-variable-1">:undo-point</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;undo-point&gt; restore-jojo-area</span>
  <span class="cicada-nymph-comment">&lt;&lt; undo-point -- &gt;&gt;</span>
  <span class="cicada-nymph-XdataX">&lt;undo-point&gt;</span> <span class="cicada-nymph-XdataX">get-jojo-area</span>
  <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*jojo-area,current-free-address*</span>
  set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;undo-point&gt; restore-string-area</span>
  <span class="cicada-nymph-comment">&lt;&lt; undo-point -- &gt;&gt;</span>
  <span class="cicada-nymph-XdataX">&lt;undo-point&gt;</span> <span class="cicada-nymph-XdataX">get-string-area</span>
  <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*string-area,current-free-address*</span>
  set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;undo-point&gt; restore-global-naming-stack</span>
  <span class="cicada-nymph-comment">&lt;&lt; undo-point -- &gt;&gt;</span>
  <span class="cicada-nymph-XdataX">&lt;undo-point&gt;</span> <span class="cicada-nymph-XdataX">get-global-naming-stack</span> <span class="cicada-nymph-save-local-variable-1">&gt;:old-record</span>

  <span class="cicada-nymph-fetch-local-variable-1">:old-record</span>
  <span class="cicada-nymph-variable">*global-naming-stack,pointer*</span>
  <span class="cicada-nymph-XdataX">&lt;global-naming-stack&gt;</span> <span class="cicada-nymph-XdataX">clear-naming</span>

  <span class="cicada-nymph-fetch-local-variable-1">:old-record</span> <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*global-naming-stack,pointer*</span> set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;undo-point&gt; restore-module-naming-stack</span>
  <span class="cicada-nymph-comment">&lt;&lt; undo-point -- &gt;&gt;</span>
  <span class="cicada-nymph-XdataX">&lt;undo-point&gt;</span> <span class="cicada-nymph-XdataX">get-module-naming-stack</span> <span class="cicada-nymph-save-local-variable-1">&gt;:old-record</span>

  <span class="cicada-nymph-fetch-local-variable-1">:old-record</span>
  <span class="cicada-nymph-variable">*module-naming-stack,pointer*</span>
  <span class="cicada-nymph-XdataX">&lt;module-naming-stack&gt;</span> <span class="cicada-nymph-XdataX">clear-naming</span>

  <span class="cicada-nymph-fetch-local-variable-1">:old-record</span> <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*module-naming-stack,pointer*</span> set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;undo-point&gt; restore-syntax-backup-area,set-syntax</span>
  <span class="cicada-nymph-comment">&lt;&lt; cursor, rule-set-copy, number-of-rule-sets -- cursor &gt;&gt;</span>
  dup zero? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:number-of-rule-sets</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:rule-set-copy</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>

  <span class="cicada-nymph-fetch-local-variable-1">:rule-set-copy</span> get <span class="cicada-nymph-save-local-variable-1">&gt;:rule-set</span>
  <span class="cicada-nymph-fetch-local-variable-1">:rule-set-copy</span> <span class="cicada-nymph-variable">*jo-size*</span> add get <span class="cicada-nymph-save-local-variable-1">&gt;:n</span>

  <span class="cicada-nymph-fetch-local-variable-1">:rule-set</span> <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> set

  <span class="cicada-nymph-fetch-local-variable-1">:rule-set-copy</span> <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">2</span> mul add
  <span class="cicada-nymph-fetch-local-variable-1">:n</span> n-get
  <span class="cicada-nymph-fetch-local-variable-1">:rule-set</span>
  <span class="cicada-nymph-fetch-local-variable-1">:n</span> n-set

  <span class="cicada-nymph-variable">*jo-size*</span>
  <span class="cicada-nymph-fetch-local-variable-1">:n</span> mul
  <span class="cicada-nymph-fetch-local-variable-1">:rule-set</span> add
  <span class="cicada-nymph-fetch-local-variable-1">:rule-set</span> <span class="cicada-nymph-XdataX">&lt;rule-set&gt;</span> <span class="cicada-nymph-XdataX">set-border</span>

  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-variable">*jo-size*</span> add
  <span class="cicada-nymph-fetch-local-variable-1">:rule-set-copy</span> <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-fetch-local-variable-1">:n</span> <span class="cicada-nymph-number">2</span> add mul add
  <span class="cicada-nymph-fetch-local-variable-1">:number-of-rule-sets</span> sub1
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;undo-point&gt; restore-syntax-backup-area</span>
  <span class="cicada-nymph-comment">&lt;&lt; undo-point -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:undo-point</span>
  <span class="cicada-nymph-fetch-local-variable-1">:undo-point</span> <span class="cicada-nymph-XdataX">&lt;undo-point&gt;</span> <span class="cicada-nymph-XdataX">get-syntax-backup-area</span> <span class="cicada-nymph-save-local-variable-1">&gt;:old-address</span>
  <span class="cicada-nymph-fetch-local-variable-1">:undo-point</span> <span class="cicada-nymph-XdataX">&lt;undo-point&gt;</span> <span class="cicada-nymph-XdataX">get-number-of-rule-sets</span> <span class="cicada-nymph-save-local-variable-1">&gt;:number-of-rule-sets</span>

  <span class="cicada-nymph-variable">*syntax-stack,address*</span>
  <span class="cicada-nymph-fetch-local-variable-1">:old-address</span>
  <span class="cicada-nymph-fetch-local-variable-1">:number-of-rule-sets</span>
  <span class="cicada-nymph-XdataX">&lt;undo-point&gt;</span> <span class="cicada-nymph-XdataX">restore-syntax-backup-area,set-syntax</span> <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>

  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span>
  <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*syntax-stack,pointer*</span>
  set

  <span class="cicada-nymph-fetch-local-variable-1">:old-address</span>
  <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*syntax-backup-area,current-free-address*</span>
  set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;undo-point&gt; restore-importing-stack</span>
  <span class="cicada-nymph-comment">&lt;&lt; undo-point -- &gt;&gt;</span>
  <span class="cicada-nymph-XdataX">&lt;undo-point&gt;</span> <span class="cicada-nymph-XdataX">get-importing-stack</span>
  <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*importing-stack,pointer*</span>
  set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;undo-point&gt; restore-undo-stack</span>
  <span class="cicada-nymph-comment">&lt;&lt; undo-point -- &gt;&gt;</span>
  <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*undo-stack,pointer*</span>
  set
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">undo</span>
  <span class="cicada-nymph-comment">&lt;&lt; undo-point -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:undo-point</span>
  <span class="cicada-nymph-fetch-local-variable-1">:undo-point</span> <span class="cicada-nymph-XdataX">&lt;undo-point&gt;</span> <span class="cicada-nymph-XdataX">restore-jojo-area</span>
  <span class="cicada-nymph-fetch-local-variable-1">:undo-point</span> <span class="cicada-nymph-XdataX">&lt;undo-point&gt;</span> <span class="cicada-nymph-XdataX">restore-string-area</span>
  <span class="cicada-nymph-fetch-local-variable-1">:undo-point</span> <span class="cicada-nymph-XdataX">&lt;undo-point&gt;</span> <span class="cicada-nymph-XdataX">restore-global-naming-stack</span>
  <span class="cicada-nymph-fetch-local-variable-1">:undo-point</span> <span class="cicada-nymph-XdataX">&lt;undo-point&gt;</span> <span class="cicada-nymph-XdataX">restore-module-naming-stack</span>
  <span class="cicada-nymph-fetch-local-variable-1">:undo-point</span> <span class="cicada-nymph-XdataX">&lt;undo-point&gt;</span> <span class="cicada-nymph-XdataX">restore-syntax-backup-area</span>
  <span class="cicada-nymph-fetch-local-variable-1">:undo-point</span> <span class="cicada-nymph-XdataX">&lt;undo-point&gt;</span> <span class="cicada-nymph-XdataX">restore-importing-stack</span>
  <span class="cicada-nymph-fetch-local-variable-1">:undo-point</span> <span class="cicada-nymph-XdataX">&lt;undo-point&gt;</span> <span class="cicada-nymph-XdataX">restore-undo-stack</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;pre-module&gt;</span> <span class="cicada-nymph-variable">*rule-set,size*</span>
  <span class="cicada-nymph-number">1024</span> <span class="cicada-nymph-variable">*jo-size*</span> mul
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable</span>

<span class="cicada-nymph-comment">&lt;&lt; for cursor &gt;&gt;</span>
<span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-allocate">allocate-memory</span> drop

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;pre-module&gt;</span> <span class="cicada-nymph-variable">*rule-set*</span>
  <span class="cicada-nymph-XdataX">&lt;pre-module&gt;</span> <span class="cicada-nymph-variable">*rule-set,size*</span> <span class="cicada-nymph-allocate">allocate-memory</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable</span>

<span class="cicada-nymph-XdataX">&lt;pre-module&gt;</span> <span class="cicada-nymph-variable">*rule-set*</span>
<span class="cicada-nymph-XdataX">&lt;pre-module&gt;</span> <span class="cicada-nymph-variable">*rule-set*</span> <span class="cicada-nymph-variable">*jo-size*</span> sub
set

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;post-module&gt;</span> <span class="cicada-nymph-variable">*rule-set,size*</span>
  <span class="cicada-nymph-number">1024</span> <span class="cicada-nymph-variable">*jo-size*</span> mul
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable</span>

<span class="cicada-nymph-comment">&lt;&lt; for cursor &gt;&gt;</span>
<span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-allocate">allocate-memory</span> drop

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;post-module&gt;</span> <span class="cicada-nymph-variable">*rule-set*</span>
  <span class="cicada-nymph-XdataX">&lt;post-module&gt;</span> <span class="cicada-nymph-variable">*rule-set,size*</span> <span class="cicada-nymph-allocate">allocate-memory</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable</span>

<span class="cicada-nymph-XdataX">&lt;post-module&gt;</span> <span class="cicada-nymph-variable">*rule-set*</span>
<span class="cicada-nymph-XdataX">&lt;post-module&gt;</span> <span class="cicada-nymph-variable">*rule-set*</span> <span class="cicada-nymph-variable">*jo-size*</span> sub
set

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">module-meta-begin-word?</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- bool &gt;&gt;</span>
  dup <span class="cicada-nymph-number">6</span> less-than? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-string">":"</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">byte</span>
  <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">full-of-the-same-byte?</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">module-meta-end-word?</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- bool &gt;&gt;</span>
  dup <span class="cicada-nymph-number">6</span> less-than? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-string">"="</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">byte</span>
  <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">full-of-the-same-byte?</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">module-meta-word?</span>
  <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- bool &gt;&gt;</span>
  dup2 module-meta-begin-word? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-bool">true</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup2 module-meta-end-word? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-bool">true</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">1</span> less-or-equal? <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:address</span>
  <span class="cicada-nymph-fetch-local-variable-1">:address</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span> add sub1 get-byte <span class="cicada-nymph-save-local-variable-1">&gt;:last-byte</span>
  <span class="cicada-nymph-fetch-local-variable-1">:address</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span> add sub1 sub1 get-byte <span class="cicada-nymph-save-local-variable-1">&gt;:the-byte-before-last-byte</span>
  <span class="cicada-nymph-fetch-local-variable-1">:last-byte</span>
  <span class="cicada-nymph-string">":"</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">byte</span> equal? not <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-1">:the-byte-before-last-byte</span>
  <span class="cicada-nymph-string">":"</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">byte</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-bool">true</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;module-buffer&gt; good-format?</span>
  <span class="cicada-nymph-comment">&lt;&lt; module-buffer[address, length] -- bool &gt;&gt;</span>
  dup2 <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">space?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  dup2 <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word</span>
  module-meta-begin-word? not <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-bool">false</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-syntax-key-word">jo</span> module-meta-end-word? <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">any-word</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;module-buffer&gt; get-code-string</span>
  <span class="cicada-nymph-comment">&lt;&lt; module-buffer[address, length] -- meta-string[address, length] &gt;&gt;</span>
  dup2 <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word</span>
  module-meta-end-word? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word-tail</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word-tail</span>
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;module-buffer&gt; get-meta-string,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; module-buffer[address, length] -- cursor &gt;&gt;</span>
  dup2 <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word</span>
  module-meta-end-word? <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word-tail</span>
    drop
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word-tail</span>
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;module-buffer&gt; get-meta-string</span>
  <span class="cicada-nymph-comment">&lt;&lt; module-buffer[address, length] -- meta-string[address, length] &gt;&gt;</span>
  dup2 <span class="cicada-nymph-XdataX">&lt;module-buffer&gt;</span> <span class="cicada-nymph-XdataX">get-meta-string,loop</span> <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
  drop <span class="cicada-nymph-save-local-variable-1">&gt;:address</span>
  <span class="cicada-nymph-fetch-local-variable-1">:address</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:address</span> sub
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">name-&gt;module-prefix</span>
  <span class="cicada-nymph-comment">&lt;&lt; name -- module-prefix &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:name</span>

  <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:buffer</span>

  <span class="cicada-nymph-string">"|"</span> <span class="cicada-nymph-fetch-local-variable-1">:name</span> name-&gt;string <span class="cicada-nymph-string">"|"</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
  <span class="cicada-nymph-number">3</span> n-string-&gt;buffer! <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>

  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
  <span class="cicada-nymph-fetch-local-variable-1">:length</span>
  string-&gt;name
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">import</span>
  <span class="cicada-nymph-comment">&lt;&lt; module-name-string[address, length] -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::module-name-string</span>
  <span class="cicada-nymph-fetch-local-variable-2">::module-name-string</span> string-&gt;name <span class="cicada-nymph-save-local-variable-1">&gt;:module-name-index</span>
  <span class="cicada-nymph-fetch-local-variable-1">:module-name-index</span> name-&gt;module-prefix <span class="cicada-nymph-save-local-variable-1">&gt;:module-prefix</span>

  <span class="cicada-nymph-fetch-local-variable-1">:module-name-index</span> <span class="cicada-nymph-XdataX">&lt;module-stack&gt;</span> <span class="cicada-nymph-XdataX">find</span> <span class="cicada-nymph-syntax-key-word">if</span>
    drop
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-fetch-local-variable-1">:module-name-index</span> <span class="cicada-nymph-XdataX">&lt;importing-stack&gt;</span> <span class="cicada-nymph-XdataX">find</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (import) circular import of : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::module-name-string</span> .s .l
    <span class="cicada-nymph-quote">'fail-to-load</span> <span class="cicada-nymph-end">awake</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-fetch-local-variable-2">::module-name-string</span> <span class="cicada-nymph-XdataX">&lt;moi&gt;</span> <span class="cicada-nymph-XdataX">find</span> not <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (import) can not find module : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::module-name-string</span> .s .l
    <span class="cicada-nymph-quote">'fail-to-load</span> <span class="cicada-nymph-end">awake</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::module-path</span>

  <span class="cicada-nymph-number">64</span> <span class="cicada-nymph-number">1024</span> mul <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:buffer</span>

  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
  <span class="cicada-nymph-number">64</span> <span class="cicada-nymph-number">1024</span> mul
  <span class="cicada-nymph-fetch-local-variable-2">::module-path</span>
  <span class="cicada-nymph-XdataX">&lt;file&gt;</span> <span class="cicada-nymph-XdataX">read</span> <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>

  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span> <span class="cicada-nymph-XdataX">&lt;module-buffer&gt;</span> <span class="cicada-nymph-XdataX">good-format?</span> not <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (import) fail to import module : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::module-name-string</span> .s .l
    <span class="cicada-nymph-string">"  for the file is not well formated cicada-nymph source code"</span> .s .l
    <span class="cicada-nymph-quote">'fail-to-load</span> <span class="cicada-nymph-end">awake</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span> <span class="cicada-nymph-XdataX">&lt;module-buffer&gt;</span> <span class="cicada-nymph-XdataX">get-meta-string</span> <span class="cicada-nymph-save-local-variable-2">&gt;::meta-string</span>
  <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span> <span class="cicada-nymph-XdataX">&lt;module-buffer&gt;</span> <span class="cicada-nymph-XdataX">get-code-string</span> <span class="cicada-nymph-save-local-variable-2">&gt;::code-string</span>

  <span class="cicada-nymph-variable">*importing-stack,pointer*</span> <span class="cicada-nymph-save-local-variable-1">&gt;:importing-record</span>
  <span class="cicada-nymph-variable">*importing-stack,unit*</span> <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*importing-stack,pointer*</span> add-set

  <span class="cicada-nymph-fetch-local-variable-1">:module-name-index</span>
  <span class="cicada-nymph-fetch-local-variable-1">:importing-record</span>
  <span class="cicada-nymph-XdataX">&lt;importing-record&gt;</span> <span class="cicada-nymph-XdataX">set-name</span>

  <span class="cicada-nymph-variable">*global-naming-stack,pointer*</span> <span class="cicada-nymph-save-local-variable-1">&gt;:global-name-record-before-import</span>

  <span class="cicada-nymph-XdataX">&lt;pre-module&gt;</span> <span class="cicada-nymph-variable">*rule-set*</span> push-syntax-stack
  <span class="cicada-nymph-fetch-local-variable-2">::meta-string</span> eval-string
  drop-syntax-stack

  <span class="cicada-nymph-variable">*global-naming-stack,pointer*</span> <span class="cicada-nymph-save-local-variable-1">&gt;:global-name-record-begin</span>
  <span class="cicada-nymph-XdataX">&lt;eval-word&gt;</span> <span class="cicada-nymph-variable">*rule-set*</span> push-syntax-stack
  <span class="cicada-nymph-fetch-local-variable-2">::code-string</span> eval-string
  drop-syntax-stack
  <span class="cicada-nymph-variable">*global-naming-stack,pointer*</span> <span class="cicada-nymph-save-local-variable-1">&gt;:global-name-record-end</span>

  <span class="cicada-nymph-XdataX">&lt;post-module&gt;</span> <span class="cicada-nymph-variable">*rule-set*</span> push-syntax-stack
  <span class="cicada-nymph-fetch-local-variable-2">::meta-string</span> eval-string
  drop-syntax-stack

  <span class="cicada-nymph-XdataX">&lt;importing-record&gt;</span> <span class="cicada-nymph-XdataX">drop</span>

  <span class="cicada-nymph-variable">*module-naming-stack,pointer*</span> <span class="cicada-nymph-save-local-variable-1">&gt;:module-name-record-begin</span>
  <span class="cicada-nymph-fetch-local-variable-1">:global-name-record-begin</span>
  <span class="cicada-nymph-fetch-local-variable-1">:global-name-record-end</span>
  <span class="cicada-nymph-fetch-local-variable-1">:module-prefix</span>
  <span class="cicada-nymph-XdataX">&lt;global-naming-stack&gt;</span> <span class="cicada-nymph-XdataX">prefix-naming</span>
  <span class="cicada-nymph-variable">*module-naming-stack,pointer*</span> <span class="cicada-nymph-save-local-variable-1">&gt;:module-name-record-end</span>

  <span class="cicada-nymph-fetch-local-variable-1">:global-name-record-before-import</span>
  <span class="cicada-nymph-variable">*global-naming-stack,pointer*</span>
  <span class="cicada-nymph-XdataX">&lt;global-naming-stack&gt;</span> <span class="cicada-nymph-XdataX">clear-naming</span>

  <span class="cicada-nymph-fetch-local-variable-1">:global-name-record-before-import</span> <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*global-naming-stack,pointer*</span> set

  <span class="cicada-nymph-variable">*module-stack,pointer*</span> <span class="cicada-nymph-save-local-variable-1">&gt;:module-info</span>
  <span class="cicada-nymph-variable">*module-stack,unit*</span> <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*module-stack,pointer*</span> add-set

  <span class="cicada-nymph-fetch-local-variable-1">:module-name-record-begin</span>
  <span class="cicada-nymph-fetch-local-variable-1">:module-info</span>
  <span class="cicada-nymph-XdataX">&lt;module-info&gt;</span> <span class="cicada-nymph-XdataX">set-name-record-begin</span>

  <span class="cicada-nymph-fetch-local-variable-1">:module-name-record-end</span>
  <span class="cicada-nymph-fetch-local-variable-1">:module-info</span>
  <span class="cicada-nymph-XdataX">&lt;module-info&gt;</span> <span class="cicada-nymph-XdataX">set-name-record-end</span>

  <span class="cicada-nymph-fetch-local-variable-2">::meta-string</span>
  <span class="cicada-nymph-fetch-local-variable-1">:module-info</span>
  <span class="cicada-nymph-XdataX">&lt;module-info&gt;</span> <span class="cicada-nymph-XdataX">set-meta-string</span>

  <span class="cicada-nymph-fetch-local-variable-1">:module-name-index</span>
  <span class="cicada-nymph-fetch-local-variable-1">:module-info</span>
  <span class="cicada-nymph-XdataX">&lt;module-info&gt;</span> <span class="cicada-nymph-XdataX">set-name</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;module-syntax&gt; unknow-meta-word,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  read-word module-meta-word? <span class="cicada-nymph-syntax-key-word">if</span>
    unread-word
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;module-syntax&gt; unknow-meta-word</span>
  <span class="cicada-nymph-comment">&lt;&lt; meta-word -- &gt;&gt;</span>
  drop2
  <span class="cicada-nymph-XdataX">&lt;module-syntax&gt;</span> <span class="cicada-nymph-XdataX">unknow-meta-word,loop</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">meta-word:import?</span>
  <span class="cicada-nymph-comment">&lt;&lt; word[address, length] -- bool &gt;&gt;</span>
  <span class="cicada-nymph-string">"import:"</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;pre-module-syntax&gt; import,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- unknow &gt;&gt;</span>
  read-word <span class="cicada-nymph-save-local-variable-2">&gt;::word</span>
  <span class="cicada-nymph-fetch-local-variable-2">::word</span> string-&gt;name <span class="cicada-nymph-save-local-variable-1">&gt;:name</span>
  <span class="cicada-nymph-fetch-local-variable-2">::word</span> module-meta-word? <span class="cicada-nymph-syntax-key-word">if</span>
    unread-word
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-2">::word</span> import
  <span class="cicada-nymph-fetch-local-variable-1">:name</span> <span class="cicada-nymph-XdataX">&lt;module-stack&gt;</span> <span class="cicada-nymph-XdataX">find</span> not <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"* (&lt;pre-module-syntax&gt; import,loop) after import module : "</span> .s
       <span class="cicada-nymph-fetch-local-variable-1">:name</span> name-&gt;string .s .l
    <span class="cicada-nymph-string">"  still can not find it in the module-stack"</span> .s .l
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:module-info</span>
  <span class="cicada-nymph-fetch-local-variable-1">:module-info</span> <span class="cicada-nymph-XdataX">&lt;module-info&gt;</span> <span class="cicada-nymph-XdataX">get-name-record-begin</span>
  <span class="cicada-nymph-fetch-local-variable-1">:module-info</span> <span class="cicada-nymph-XdataX">&lt;module-info&gt;</span> <span class="cicada-nymph-XdataX">get-name-record-end</span>
  <span class="cicada-nymph-XdataX">&lt;module-naming-stack&gt;</span> <span class="cicada-nymph-XdataX">expose-naming</span>
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;pre-module-syntax&gt; import</span>
  <span class="cicada-nymph-comment">&lt;&lt; meta-word:import -- unknow &gt;&gt;</span>
  drop2
  <span class="cicada-nymph-XdataX">&lt;pre-module-syntax&gt;</span> <span class="cicada-nymph-XdataX">import,loop</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-XdataX">&lt;pre-module&gt;</span> <span class="cicada-nymph-variable">*rule-set*</span>
<span class="cicada-nymph-XdataX">&lt;eval-word&gt;</span> <span class="cicada-nymph-variable">*rule-set*</span>
<span class="cicada-nymph-XdataX">&lt;rule-set&gt;</span> <span class="cicada-nymph-XdataX">mixin</span>

<span class="cicada-nymph-XdataX">&lt;pre-module&gt;</span> <span class="cicada-nymph-variable">*rule-set*</span>
<span class="cicada-nymph-syntax-key-word">jo</span> module-meta-word?
<span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-XdataX">&lt;module-syntax&gt;</span> <span class="cicada-nymph-XdataX">unknow-meta-word</span>
<span class="cicada-nymph-XdataX">&lt;rule&gt;</span> <span class="cicada-nymph-XdataX">add</span>

<span class="cicada-nymph-XdataX">&lt;pre-module&gt;</span> <span class="cicada-nymph-variable">*rule-set*</span>
<span class="cicada-nymph-syntax-key-word">jo</span> module-meta-begin-word?
<span class="cicada-nymph-syntax-key-word">jo</span> drop2
<span class="cicada-nymph-XdataX">&lt;rule&gt;</span> <span class="cicada-nymph-XdataX">add</span>

<span class="cicada-nymph-XdataX">&lt;pre-module&gt;</span> <span class="cicada-nymph-variable">*rule-set*</span>
<span class="cicada-nymph-syntax-key-word">jo</span> module-meta-end-word?
<span class="cicada-nymph-syntax-key-word">jo</span> drop2
<span class="cicada-nymph-XdataX">&lt;rule&gt;</span> <span class="cicada-nymph-XdataX">add</span>

<span class="cicada-nymph-XdataX">&lt;pre-module&gt;</span> <span class="cicada-nymph-variable">*rule-set*</span>
<span class="cicada-nymph-syntax-key-word">jo</span> meta-word:import?
<span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-XdataX">&lt;pre-module-syntax&gt;</span> <span class="cicada-nymph-XdataX">import</span>
<span class="cicada-nymph-XdataX">&lt;rule&gt;</span> <span class="cicada-nymph-XdataX">add</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">meta-word:do?</span>
  <span class="cicada-nymph-comment">&lt;&lt; word[address, length] -- bool &gt;&gt;</span>
  <span class="cicada-nymph-string">"do:"</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;post-module-syntax&gt; do,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  read-word <span class="cicada-nymph-save-local-variable-2">&gt;::word</span>
  <span class="cicada-nymph-fetch-local-variable-2">::word</span> module-meta-word? <span class="cicada-nymph-syntax-key-word">if</span>
    unread-word
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-2">::word</span> eval-word
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;post-module-syntax&gt; do</span>
  <span class="cicada-nymph-comment">&lt;&lt; meta-word:do -- &gt;&gt;</span>
  drop2
  <span class="cicada-nymph-XdataX">&lt;post-module-syntax&gt;</span> <span class="cicada-nymph-XdataX">do,loop</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-XdataX">&lt;post-module&gt;</span> <span class="cicada-nymph-variable">*rule-set*</span>
<span class="cicada-nymph-XdataX">&lt;eval-word&gt;</span> <span class="cicada-nymph-variable">*rule-set*</span>
<span class="cicada-nymph-XdataX">&lt;rule-set&gt;</span> <span class="cicada-nymph-XdataX">mixin</span>

<span class="cicada-nymph-XdataX">&lt;post-module&gt;</span> <span class="cicada-nymph-variable">*rule-set*</span>
<span class="cicada-nymph-syntax-key-word">jo</span> module-meta-word?
<span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-XdataX">&lt;module-syntax&gt;</span> <span class="cicada-nymph-XdataX">unknow-meta-word</span>
<span class="cicada-nymph-XdataX">&lt;rule&gt;</span> <span class="cicada-nymph-XdataX">add</span>

<span class="cicada-nymph-XdataX">&lt;post-module&gt;</span> <span class="cicada-nymph-variable">*rule-set*</span>
<span class="cicada-nymph-syntax-key-word">jo</span> module-meta-begin-word?
<span class="cicada-nymph-syntax-key-word">jo</span> drop2
<span class="cicada-nymph-XdataX">&lt;rule&gt;</span> <span class="cicada-nymph-XdataX">add</span>

<span class="cicada-nymph-XdataX">&lt;post-module&gt;</span> <span class="cicada-nymph-variable">*rule-set*</span>
<span class="cicada-nymph-syntax-key-word">jo</span> module-meta-end-word?
<span class="cicada-nymph-syntax-key-word">jo</span> drop2
<span class="cicada-nymph-XdataX">&lt;rule&gt;</span> <span class="cicada-nymph-XdataX">add</span>

<span class="cicada-nymph-XdataX">&lt;post-module&gt;</span> <span class="cicada-nymph-variable">*rule-set*</span>
<span class="cicada-nymph-syntax-key-word">jo</span> meta-word:do?
<span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-XdataX">&lt;post-module-syntax&gt;</span> <span class="cicada-nymph-XdataX">do</span>
<span class="cicada-nymph-XdataX">&lt;rule&gt;</span> <span class="cicada-nymph-XdataX">add</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">load</span>
  <span class="cicada-nymph-comment">&lt;&lt; module-name-string[address, length] -- &gt;&gt;</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::module-name-string</span>

  <span class="cicada-nymph-fetch-local-variable-2">::module-name-string</span>
  <span class="cicada-nymph-XdataX">&lt;undo-point&gt;</span> <span class="cicada-nymph-XdataX">create</span>
  <span class="cicada-nymph-variable">*reading-stack,pointer*</span>
  <span class="cicada-nymph-comment">&lt;&lt; module-name-string[address, length],
     undo-point
     *reading-stack,pointer*
     -- &gt;&gt;</span>

  <span class="cicada-nymph-square-brackets">[</span> <span class="cicada-nymph-title">action</span>,reset-the-stack
    <span class="cicada-nymph-comment">&lt;&lt; module-name-string[address, length],
       undo-point
       *reading-stack,pointer*
       -- &gt;&gt;</span>
    <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*reading-stack,pointer*</span> set
    undo
    <span class="cicada-nymph-string">"* (load) can not load : "</span> .s .s .l
    <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-square-brackets">]</span>
  <span class="cicada-nymph-quote">'fail-to-load</span> <span class="cicada-nymph-await">await</span>

  <span class="cicada-nymph-fetch-local-variable-2">::module-name-string</span> import

  drop
  drop
  drop2
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;report&gt; memory</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-string">"* *un-initialized-memory*"</span> .s .l
  <span class="cicada-nymph-string">"  * size : "</span> .s
       <span class="cicada-nymph-variable">*un-initialized-memory,size*</span>
       . .l
  <span class="cicada-nymph-string">"  * used : "</span> .s
       <span class="cicada-nymph-variable">*un-initialized-memory,current-free-address*</span>
       <span class="cicada-nymph-variable">*un-initialized-memory*</span>
       sub . .l
  <span class="cicada-nymph-string">"  * free : "</span> .s
       <span class="cicada-nymph-variable">*un-initialized-memory,size*</span>
       <span class="cicada-nymph-variable">*un-initialized-memory,current-free-address*</span>
       <span class="cicada-nymph-variable">*un-initialized-memory*</span>
       sub sub . .l
  <span class="cicada-nymph-string">"* *string-area*"</span> .s .l
  <span class="cicada-nymph-string">"  * size : "</span> .s
       <span class="cicada-nymph-variable">*string-area,size*</span>
       . .l
  <span class="cicada-nymph-string">"  * used : "</span> .s
       <span class="cicada-nymph-variable">*string-area,current-free-address*</span>
       <span class="cicada-nymph-variable">*string-area*</span>
       sub . .l
  <span class="cicada-nymph-string">"  * free : "</span> .s
       <span class="cicada-nymph-variable">*string-area,size*</span>
       <span class="cicada-nymph-variable">*string-area,current-free-address*</span>
       <span class="cicada-nymph-variable">*string-area*</span>
       sub sub . .l
  <span class="cicada-nymph-string">"* *jojo-area*"</span> .s .l
  <span class="cicada-nymph-string">"  * size : "</span> .s
       <span class="cicada-nymph-variable">*jojo-area,size*</span> . .l
  <span class="cicada-nymph-string">"  * used : "</span> .s
       <span class="cicada-nymph-variable">*jojo-area,current-free-address*</span>
       <span class="cicada-nymph-variable">*jojo-area*</span>
       sub . .l
  <span class="cicada-nymph-string">"  * free : "</span> .s
       <span class="cicada-nymph-variable">*jojo-area,size*</span>
       <span class="cicada-nymph-variable">*jojo-area,current-free-address*</span>
       <span class="cicada-nymph-variable">*jojo-area*</span>
       sub sub . .l
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;report&gt; platform</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-string">"* platform : "</span> .s
  platform .s
  .l
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;report&gt; jo-size</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-string">"* jo-size : "</span> .s
  <span class="cicada-nymph-variable">*jo-size*</span> write-number
  <span class="cicada-nymph-string">" bytes"</span> .s
  .l
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;report&gt; machine-word-size</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-string">"* machine-word-size : "</span> .s
  <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">8</span> mul write-number
  <span class="cicada-nymph-string">" bits"</span> .s
  .l
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;report&gt; syntax</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-string">"* *rule-set,make-jojo* :"</span> .s .l
     <span class="cicada-nymph-variable">*rule-set,make-jojo*</span> <span class="cicada-nymph-XdataX">&lt;rule-set&gt;</span> <span class="cicada-nymph-XdataX">list</span>
  <span class="cicada-nymph-string">"* *rule-set,eval-word* :"</span> .s .l
     <span class="cicada-nymph-variable">*rule-set,eval-word*</span> <span class="cicada-nymph-XdataX">&lt;rule-set&gt;</span> <span class="cicada-nymph-XdataX">list</span>
  <span class="cicada-nymph-string">"* tos-syntax-stack :"</span> .s .l
     tos-syntax-stack <span class="cicada-nymph-XdataX">&lt;rule-set&gt;</span> <span class="cicada-nymph-XdataX">list</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;global-naming-stack&gt; list-by-jo-predicate,loop</span>
  <span class="cicada-nymph-comment">&lt;&lt; jo-predicate, counter, cursor -- &gt;&gt;</span>
  dup <span class="cicada-nymph-variable">*global-naming-stack,pointer*</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
    drop
    drop
    drop
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:counter</span>
  <span class="cicada-nymph-save-local-variable-1">&gt;:jo-predicate</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-XdataX">&lt;name-record&gt;</span> <span class="cicada-nymph-XdataX">get-new-jo</span>
  <span class="cicada-nymph-fetch-local-variable-1">:jo-predicate</span> apply <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-string">"  "</span> .s
    <span class="cicada-nymph-fetch-local-variable-1">:counter</span> .i <span class="cicada-nymph-string">". "</span> .s <span class="cicada-nymph-fetch-local-variable-1">:counter</span> add1 <span class="cicada-nymph-save-local-variable-1">&gt;:counter</span>
    <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-XdataX">&lt;name-record&gt;</span> <span class="cicada-nymph-XdataX">get-name</span> name-&gt;string .s
    .l
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-1">:jo-predicate</span>
  <span class="cicada-nymph-fetch-local-variable-1">:counter</span>
  <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-variable">*global-naming-stack,unit*</span> add
  <span class="cicada-nymph-end">loop</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;global-naming-stack&gt; list-by-jo-predicate</span>
  <span class="cicada-nymph-comment">&lt;&lt; jo-predicate -- &gt;&gt;</span>
  <span class="cicada-nymph-number">1</span>
  <span class="cicada-nymph-variable">*global-naming-stack*</span>
  <span class="cicada-nymph-XdataX">&lt;global-naming-stack&gt;</span> <span class="cicada-nymph-XdataX">list-by-jo-predicate,loop</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;report&gt; global-naming-stack</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-string">"* all primitive-function in global-naming-stack :"</span> .s .l
  <span class="cicada-nymph-syntax-key-word">jo</span> primitive-function-jo?
  <span class="cicada-nymph-XdataX">&lt;global-naming-stack&gt;</span> <span class="cicada-nymph-XdataX">list-by-jo-predicate</span>

  <span class="cicada-nymph-string">"* all function in global-naming-stack :"</span> .s .l
  <span class="cicada-nymph-syntax-key-word">jo</span> function-jo?
  <span class="cicada-nymph-XdataX">&lt;global-naming-stack&gt;</span> <span class="cicada-nymph-XdataX">list-by-jo-predicate</span>

  <span class="cicada-nymph-string">"* all variable in global-naming-stack :"</span> .s .l
  <span class="cicada-nymph-syntax-key-word">jo</span> variable-jo?
  <span class="cicada-nymph-XdataX">&lt;global-naming-stack&gt;</span> <span class="cicada-nymph-XdataX">list-by-jo-predicate</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;report&gt; system</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-XdataX">&lt;report&gt;</span> <span class="cicada-nymph-XdataX">platform</span>
  <span class="cicada-nymph-XdataX">&lt;report&gt;</span> <span class="cicada-nymph-XdataX">machine-word-size</span>
  <span class="cicada-nymph-XdataX">&lt;report&gt;</span> <span class="cicada-nymph-XdataX">jo-size</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">welcome</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-string">"* welcome to cicada-nymph"</span> .s .l
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-number">0</span>
<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-variable">*hi,random-base*</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-variable">define-variable,with-tos</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">hi,random</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- random-number &gt;&gt;</span>
  <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-constant">:syscall-number,times:</span>
  <span class="cicada-nymph-number">1</span> syscall
  <span class="cicada-nymph-number">13</span> mod
  <span class="cicada-nymph-comment">&lt;&lt;
   *hi,random-base*
   *hi,random-base* add1 13 mod
   address *hi,random-base* set
  &gt;&gt;</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">hi,say</span>
  <span class="cicada-nymph-comment">&lt;&lt; number -- &gt;&gt;</span>
  dup <span class="cicada-nymph-number">0</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"  cica cica da yaya !!!"</span> .s .l <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">1</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"  hi ^-^"</span> .s .l <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">2</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"  hello :)"</span> .s .l <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">3</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"  hey *^-^*"</span> .s .l <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">4</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"  hiya \^o^/"</span> .s .l <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">5</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"  I wish you a lovely day"</span> .s .l <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">6</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"  I wish you a lovely day { or night :P }"</span> .s .l <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">7</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"  o.o"</span> .s .l <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">8</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"  O.o"</span> .s .l <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
  dup <span class="cicada-nymph-number">9</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"  o.O"</span> .s .l <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
                  drop <span class="cicada-nymph-string">"  lovely ^3^"</span> .s .l <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">hi</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-title">hi</span>,random
  <span class="cicada-nymph-title">hi</span>,say
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">help</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-string">"* helpful documentations will be written soon"</span> .s .l
  <span class="cicada-nymph-string">"  please wait ^-^"</span> .s .l
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;command-function&gt; unknow-function</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-string">"* (cicada-nymph) unknow command-line-function : "</span> .s
  get-command-line
  <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word-tail</span>
  <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word</span> .s .l
  <span class="cicada-nymph-string">"  good bye ^-^/"</span> .s .l
  <span class="cicada-nymph-end">bye</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;command-function&gt; stack-REPL</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  .l
  welcome hi .l
  <span class="cicada-nymph-XdataX">&lt;report&gt;</span> <span class="cicada-nymph-XdataX">system</span> .l
  <span class="cicada-nymph-string">"* you are in the (stack-REPL)"</span> .s .l
  <span class="cicada-nymph-string">"  every time after a word is executed"</span> .s .l
  <span class="cicada-nymph-string">"  the argument-stack get printed"</span> .s .l
  <span class="cicada-nymph-title">print-argument-stack</span>,pretty
  <span class="cicada-nymph-syntax-key-word">jo</span> stack-REPL
  <span class="cicada-nymph-end">reset-top-level-REPL</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;command-function&gt; basic-REPL</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  .l
  welcome hi .l
  <span class="cicada-nymph-XdataX">&lt;report&gt;</span> <span class="cicada-nymph-XdataX">system</span> .l
  <span class="cicada-nymph-string">"* you are in the (basic-REPL)"</span> .s .l
  <span class="cicada-nymph-string">"  this REPL does not print any thing automaticly"</span> .s .l
  <span class="cicada-nymph-syntax-key-word">jo</span> basic-REPL
  <span class="cicada-nymph-end">reset-top-level-REPL</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;command-function&gt; poi</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  get-command-line
  <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word-tail</span>
  <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word-tail</span> <span class="cicada-nymph-save-local-variable-2">&gt;::command-line</span>

  <span class="cicada-nymph-fetch-local-variable-2">::command-line</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">space?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-XdataX">&lt;poi&gt;</span> <span class="cicada-nymph-XdataX">help</span>
    <span class="cicada-nymph-end">bye</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-fetch-local-variable-2">::command-line</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word</span> <span class="cicada-nymph-save-local-variable-2">&gt;::sub-function-name</span>
  <span class="cicada-nymph-fetch-local-variable-2">::command-line</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word-tail</span> <span class="cicada-nymph-save-local-variable-2">&gt;::command-line-arguments</span>

  <span class="cicada-nymph-fetch-local-variable-2">::sub-function-name</span> <span class="cicada-nymph-string">"help"</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-XdataX">&lt;poi&gt;</span> <span class="cicada-nymph-XdataX">help</span>
    <span class="cicada-nymph-end">bye</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-fetch-local-variable-2">::sub-function-name</span> <span class="cicada-nymph-string">"add"</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-2">::command-line-arguments</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word</span>
    <span class="cicada-nymph-fetch-local-variable-2">::command-line-arguments</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word-tail</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word</span>
    <span class="cicada-nymph-XdataX">&lt;poi&gt;</span> <span class="cicada-nymph-XdataX">add</span>
    <span class="cicada-nymph-end">bye</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-fetch-local-variable-2">::sub-function-name</span> <span class="cicada-nymph-string">"sub"</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-2">::command-line-arguments</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word</span>
    <span class="cicada-nymph-XdataX">&lt;poi&gt;</span> <span class="cicada-nymph-XdataX">sub</span>
    <span class="cicada-nymph-end">bye</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-fetch-local-variable-2">::sub-function-name</span> <span class="cicada-nymph-string">"up"</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-2">::command-line-arguments</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word</span>
    <span class="cicada-nymph-fetch-local-variable-2">::command-line-arguments</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word-tail</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word</span>
    <span class="cicada-nymph-XdataX">&lt;poi&gt;</span> <span class="cicada-nymph-XdataX">up</span>
    <span class="cicada-nymph-end">bye</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-fetch-local-variable-2">::sub-function-name</span> <span class="cicada-nymph-string">"find"</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-2">::command-line-arguments</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word</span>
    <span class="cicada-nymph-XdataX">&lt;poi&gt;</span> <span class="cicada-nymph-XdataX">find</span> <span class="cicada-nymph-syntax-key-word">if</span>
      .s .l
    <span class="cicada-nymph-syntax-key-word">else</span>
      <span class="cicada-nymph-string">"no found"</span> .s .l
    <span class="cicada-nymph-syntax-key-word">then</span>
    <span class="cicada-nymph-end">bye</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-fetch-local-variable-2">::sub-function-name</span> <span class="cicada-nymph-string">"list"</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-XdataX">&lt;poi&gt;</span> <span class="cicada-nymph-XdataX">list</span>
    <span class="cicada-nymph-end">bye</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-string">"* (poi) meets argument that (poi) can not understand"</span> .s .l
  <span class="cicada-nymph-string">"  it is the following command-line that is confusing (poi) :"</span> .s .l
  <span class="cicada-nymph-string">"    "</span> .s <span class="cicada-nymph-XdataX">&lt;report&gt;</span> <span class="cicada-nymph-XdataX">command-line</span> .l
  <span class="cicada-nymph-string">"  to get some help info  you can type :"</span> .s .l
  <span class="cicada-nymph-string">"    cn poi help"</span> .s .l
  <span class="cicada-nymph-string">"  good bye ^-^/"</span> .s .l
  <span class="cicada-nymph-end">bye</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;command-function&gt; moi</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  get-command-line
  <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word-tail</span>
  <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word-tail</span> <span class="cicada-nymph-save-local-variable-2">&gt;::command-line</span>

  <span class="cicada-nymph-fetch-local-variable-2">::command-line</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">space?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-XdataX">&lt;moi&gt;</span> <span class="cicada-nymph-XdataX">help</span>
    <span class="cicada-nymph-end">bye</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-fetch-local-variable-2">::command-line</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word</span> <span class="cicada-nymph-save-local-variable-2">&gt;::sub-function-name</span>
  <span class="cicada-nymph-fetch-local-variable-2">::command-line</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word-tail</span> <span class="cicada-nymph-save-local-variable-2">&gt;::command-line-arguments</span>

  <span class="cicada-nymph-fetch-local-variable-2">::sub-function-name</span> <span class="cicada-nymph-string">"help"</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-XdataX">&lt;moi&gt;</span> <span class="cicada-nymph-XdataX">help</span>
    <span class="cicada-nymph-end">bye</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-fetch-local-variable-2">::sub-function-name</span> <span class="cicada-nymph-string">"add"</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-2">::command-line-arguments</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word</span>
    <span class="cicada-nymph-fetch-local-variable-2">::command-line-arguments</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word-tail</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word</span>
    <span class="cicada-nymph-XdataX">&lt;moi&gt;</span> <span class="cicada-nymph-XdataX">add</span>
    <span class="cicada-nymph-end">bye</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-fetch-local-variable-2">::sub-function-name</span> <span class="cicada-nymph-string">"sub"</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-2">::command-line-arguments</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word</span>
    <span class="cicada-nymph-XdataX">&lt;moi&gt;</span> <span class="cicada-nymph-XdataX">sub</span>
    <span class="cicada-nymph-end">bye</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-fetch-local-variable-2">::sub-function-name</span> <span class="cicada-nymph-string">"up"</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-2">::command-line-arguments</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word</span>
    <span class="cicada-nymph-fetch-local-variable-2">::command-line-arguments</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word-tail</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word</span>
    <span class="cicada-nymph-XdataX">&lt;moi&gt;</span> <span class="cicada-nymph-XdataX">up</span>
    <span class="cicada-nymph-end">bye</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-fetch-local-variable-2">::sub-function-name</span> <span class="cicada-nymph-string">"find"</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-fetch-local-variable-2">::command-line-arguments</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word</span>
    <span class="cicada-nymph-XdataX">&lt;moi&gt;</span> <span class="cicada-nymph-XdataX">find</span> <span class="cicada-nymph-syntax-key-word">if</span>
      .s .l
    <span class="cicada-nymph-syntax-key-word">else</span>
      <span class="cicada-nymph-string">"no found"</span> .s .l
    <span class="cicada-nymph-syntax-key-word">then</span>
    <span class="cicada-nymph-end">bye</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-fetch-local-variable-2">::sub-function-name</span> <span class="cicada-nymph-string">"list"</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-XdataX">&lt;moi&gt;</span> <span class="cicada-nymph-XdataX">list</span>
    <span class="cicada-nymph-end">bye</span>
  <span class="cicada-nymph-syntax-key-word">then</span>

  <span class="cicada-nymph-string">"* (module) meets argument that (module) can not understand"</span> .s .l
  <span class="cicada-nymph-string">"  it is the following command-line that is confusing (module) :"</span> .s .l
  <span class="cicada-nymph-string">"    "</span> .s <span class="cicada-nymph-XdataX">&lt;report&gt;</span> <span class="cicada-nymph-XdataX">command-line</span> .l
  <span class="cicada-nymph-string">"  to get some help info  you can type :"</span> .s .l
  <span class="cicada-nymph-string">"    cn module help"</span> .s .l
  <span class="cicada-nymph-string">"  good bye ^-^/"</span> .s .l
  <span class="cicada-nymph-end">bye</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;command-function&gt; no-function</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-XdataX">&lt;command-function&gt;</span> <span class="cicada-nymph-XdataX">stack-REPL</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">&lt;command&gt; dispatch</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  get-command-line
  <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word-tail</span>
  dup2 <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">space?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    drop2
    <span class="cicada-nymph-XdataX">&lt;command-function&gt;</span> <span class="cicada-nymph-XdataX">no-function</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">word</span>
  <span class="cicada-nymph-save-local-variable-2">&gt;::1st-word</span>
  <span class="cicada-nymph-fetch-local-variable-2">::1st-word</span> <span class="cicada-nymph-string">"basic-REPL"</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-XdataX">&lt;command-function&gt;</span> <span class="cicada-nymph-XdataX">basic-REPL</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-2">::1st-word</span> <span class="cicada-nymph-string">"stack-REPL"</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-XdataX">&lt;command-function&gt;</span> <span class="cicada-nymph-XdataX">stack-REPL</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-2">::1st-word</span> <span class="cicada-nymph-string">"poi"</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-XdataX">&lt;command-function&gt;</span> <span class="cicada-nymph-XdataX">poi</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-fetch-local-variable-2">::1st-word</span> <span class="cicada-nymph-string">"moi"</span> <span class="cicada-nymph-XdataX">&lt;string&gt;</span> <span class="cicada-nymph-XdataX">equal?</span> <span class="cicada-nymph-syntax-key-word">if</span>
    <span class="cicada-nymph-XdataX">&lt;command-function&gt;</span> <span class="cicada-nymph-XdataX">moi</span>
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-syntax-key-word">then</span>
  <span class="cicada-nymph-XdataX">&lt;command-function&gt;</span> <span class="cicada-nymph-XdataX">unknow-function</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

<span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-function-to-define">the-story-begin</span>
  <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
  <span class="cicada-nymph-XdataX">&lt;command&gt;</span> <span class="cicada-nymph-XdataX">dispatch</span>
  <span class="cicada-nymph-end">end</span>
<span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-define-function">define-function</span>

the-story-begin
</pre>
  </body>
</html>
