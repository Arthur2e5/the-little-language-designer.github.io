---
---
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
  <head>
    <title>core.org</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <style type="text/css">
    <!--
      body {
        color: #f8f8f0;
        background-color: #1b1d1e;
      }
      .bold {
        /* bold */
        font-weight: bold;
      }
      .cicada-nymph-allocate {
        /* cicada-nymph-allocate-face */
        color: #AE7C3B;
        font-weight: bold;
      }
      .cicada-nymph-bool {
        /* cicada-nymph-bool-face */
        color: #fd971f;
        font-weight: bold;
      }
      .cicada-nymph-comment {
        /* cicada-nymph-comment-face */
        color: #FF8888;
      }
      .cicada-nymph-constant {
        /* cicada-nymph-constant-face */
        color: #fd971f;
        font-weight: bold;
      }
      .cicada-nymph-curly-braces {
        /* cicada-nymph-curly-braces-face */
        color: #aebed8;
      }
      .cicada-nymph-end {
        /* cicada-nymph-end-face */
        color: #00ffff;
        font-weight: bold;
      }
      .cicada-nymph-exception {
        /* cicada-nymph-exception-face */
        color: #00ffff;
        font-weight: bold;
      }
      .cicada-nymph-fetch-local-variable-1 {
        /* cicada-nymph-fetch-local-variable-1-face */
        color: #83EA83;
        font-weight: bold;
      }
      .cicada-nymph-fetch-local-variable-2 {
        /* cicada-nymph-fetch-local-variable-2-face */
        color: #5CDD5C;
        font-weight: bold;
      }
      .cicada-nymph-lexicographer {
        /* cicada-nymph-lexicographer-face */
        color: #ae81ff;
        font-weight: bold;
      }
      .cicada-nymph-number {
        /* cicada-nymph-number-face */
        color: #fd971f;
        font-weight: bold;
      }
      .cicada-nymph-save-local-variable-1 {
        /* cicada-nymph-save-local-variable-1-face */
        color: #FF4C4C;
        font-weight: bold;
      }
      .cicada-nymph-save-local-variable-2 {
        /* cicada-nymph-save-local-variable-2-face */
        color: #dc322f;
        font-weight: bold;
      }
      .cicada-nymph-sentence-reader {
        /* cicada-nymph-sentence-reader-face */
        color: #ffff00;
        font-weight: bold;
      }
      .cicada-nymph-string {
        /* cicada-nymph-string-face */
        color: #e6db74;
      }
      .cicada-nymph-syntax-key-word {
        /* cicada-nymph-syntax-key-word-face */
        color: #f92672;
        font-weight: bold;
      }
      .cicada-nymph-variable {
        /* cicada-nymph-variable-face */
        color: #fd971f;
      }
      .cicada-nymph-wody {
        /* cicada-nymph-wody-face */
        color: #a6e22e;
        font-weight: bold;
      }
      .cicada-nymph-word-to-define {
        /* cicada-nymph-word-to-define-face */
        color: #ef5939;
        font-weight: bold;
      }
      .italic {
        /* italic */
        font-style: italic;
      }
      .org-block-begin-line {
        /* org-block-begin-line */
        color: #FF8888;
      }
      .org-block-end-line {
        /* org-block-end-line */
        color: #FF8888;
      }
      .org-document-info {
        /* org-document-info */
        color: #afeeee;
      }
      .org-document-info-keyword {
        /* org-document-info-keyword */
        color: #b3b3b3;
      }
      .org-document-title {
        /* org-document-title */
        color: #afeeee;
        font-weight: bold;
      }
      .org-done {
        /* org-done */
        color: #98fb98;
        font-weight: bold;
      }
      .org-level-1 {
        /* org-level-1 */
        color: #a6e22e;
      }
      .org-level-2 {
        /* org-level-2 */
        color: #fd971f;
      }
      .org-level-3 {
        /* org-level-3 */
        color: #f92672;
        font-weight: bold;
      }
      .org-table {
        /* org-table */
        color: #87cefa;
      }
      .org-tag {
        /* org-tag */
        font-weight: bold;
      }
      .org-todo {
        /* org-todo */
        color: #ffc0cb;
        font-weight: bold;
      }

      a {
        color: inherit;
        background-color: inherit;
        font: inherit;
        text-decoration: inherit;
      }
      a:hover {
        text-decoration: underline;
      }
    -->
    </style>
{% include in-org-head.html %}
  </head>
  <body>
    {% include before-pre.html %}
<pre>
<span class="org-document-info-keyword">#+TITLE:</span>  <span class="org-document-title">&#23567;&#34796;&#35486;&#26680; / core of cicada-nymph
</span><span class="org-document-info-keyword">#+AUTHOR:</span> <span class="org-document-info">&#35613;&#23431;&#24646; / XIE Yuheng
</span><span class="org-document-info-keyword">#+EMAIL:</span>  <span class="org-document-info">xyheme@gmail.com
</span>
<span class="org-level-1">* </span><span class="org-done">todo</span>
<span class="org-level-2">** about load-file</span>
   * nested load-file
     a stack of allocate buffers in another local-data-heap
     the previous local-data-heap maybe should be called local-data-vector
   * load-file should maintain a list of loaded files
     what else meta data should be maintained ?
     can them make up a well module system ?
<span class="org-level-2">** if else then and double-quote in REPL</span>
   * round-heap for string literal in REPL
     * &#20351;&#29992;&#26032;&#30340;&#35486;&#27861;&#25844;&#23637;&#27231;&#21046;
       &#36889;&#22312;&#26044;&#23565; '"' &#36889;&#20491;&#35486;&#38364;&#37749;&#35422;&#30340;&#35722;&#26356;
     * &#20063;&#23601;&#26159;&#35498;
       &#36996;&#26159;&#35201;&#23526;&#29694;&#36889;&#20491;&#35486;&#27861;&#20841;&#27425;&#20102;
     * &#20063;&#23601;&#26159;&#35498;&#22312;&#32232;&#35695;&#22120;&#38283;&#22987;&#22519;&#34892;&#30340;&#26178;&#20505;
       &#26371;&#20837;&#26855;&#19968;&#20123;&#32232;&#35695;&#22120;&#25152;&#38656;&#35201;&#29992;&#21040;&#30340;&#35486;&#27861;
       &#32780;&#36939;&#34892;&#32080;&#26463;&#20043;&#24460;
       &#21448;&#25226;&#36889;&#20123;&#35486;&#27861;&#20986;&#26855;
<span class="org-level-2">** more and better report</span>
   * rule-sets in syntax-stack
     and
     rule-set useing (top of syntax-stack)
<span class="org-level-2">** &#26356;&#22909;&#30340;&#37679;&#35492;&#34389;&#29702;&#27231;&#21046;</span>
   1. &#30070;&#19968;&#20491; exception &#25214;&#19981;&#21040;&#33258;&#24049;&#22312; return-stack &#20013;&#30340;&#36864;&#20986;&#40670;&#26178;
      &#25033;&#35442;&#26377;&#26356;&#22909;&#22320;&#34389;&#29702;&#26041;&#24335; &#32780;&#19981;&#26159;&#19981;&#34389;&#29702;&#36889;&#31278;&#24773;&#27841;
   2. &#30446;&#21069;
      &#30070;&#19968;&#20491; exception &#34987;&#22519;&#34892;&#30340;&#26178;&#20505;
      &#35519;&#29992;&#36889;&#20491; exception &#30340;&#20989;&#25976;&#26159;&#27794;&#27861;&#20659;&#36958;&#21443;&#25976;&#32102;&#36889;&#20491; exception &#30340;
      [&#38500;&#38750;&#29234;&#36889;&#20491; exception &#20013;&#35373;&#32622;&#20840;&#23616;&#35722;&#37327;]
      &#20854;&#21407;&#22240;&#22312;&#26044;
      &#30070; exception &#34987;&#22519;&#34892;&#30340;&#26178;&#20505; &#21443;&#25976;&#26855;&#24050;&#32147;&#34987;&#37325;&#32622;&#20102;
      &#25152;&#20197;&#20854;&#23526;&#35299;&#27861;&#24456;&#31777;&#21934;
      &#21482;&#35201;&#25552;&#20379;&#19968;&#20491;&#20989;&#25976;&#32102; exception
      &#35731;&#27599;&#20491; exception &#29992;&#36889;&#20491;&#20989;&#25976;&#20358;&#20197;&#26126;&#39023;&#30340;&#26041;&#24335;&#37325;&#32622;&#21443;&#25976;&#26855;&#23601;&#34892;&#20102;
      &#36889;&#27171;&#30070;&#19968;&#20491; exception &#34987;&#22519;&#34892;&#30340;&#26178;&#20505;
      &#23427;&#21487;&#20197;
      1. &#20808;&#20197;&#26410;&#34987;&#37325;&#32622;&#26178;&#30340;&#21443;&#25976;&#26855;&#20013;&#30340;&#20540;&#29234;&#21443;&#25976;
         &#36889;&#20123;&#21443;&#25976;&#21487;&#20197;&#26159;&#35519;&#29992;&#36889;&#20491; exception &#30340;&#20989;&#20659;&#36958;&#32102; exception &#30340;
      2. &#20043;&#24460;&#20877;&#20197;&#37325;&#32622;&#20043;&#24460;&#30340;&#21443;&#25976;&#26855;&#20013;&#30340;&#20540;&#29234;&#21443;&#25976;
         &#36889;&#20123;&#21443;&#25976;&#26159;&#31561;&#24453; exception &#30340;&#20989;&#29234; exception &#25152;&#28310;&#20633;&#30340;
<span class="org-level-2">** little-tester                      </span><span class="org-level-2"><span class="org-tag">:needed:</span></span>
<span class="org-level-2">** fixnum in other base               </span><span class="org-level-2"><span class="org-tag">:needed:</span></span>
<span class="org-level-2">** home-path &amp; search-path to load files</span>
   * poi denotes path-organizer
   * &#23526;&#29694; &#26781;&#20214;&#24615;&#30340;&#34987;&#35299;&#37323;&#30340;&#20195;&#30908;
     &#36889;&#27171;&#23601;&#33021;&#23526;&#29694;
     1. little-tester
     2. &#22312;&#19981;&#21516;&#30340;&#24179;&#33274;&#19979;&#22519;&#34892;&#19981;&#21516;&#30340;&#20195;&#30908;
<span class="org-level-2">** debug-REPL</span>
<span class="org-level-2">** [really needed] error handling for io function</span>
   * write-file &#21487;&#33021;&#36935;&#21040;&#30913;&#30436;&#28415;&#36617;&#30340;&#24773;&#27841;
<span class="org-level-2">** fixnum in other base</span>
<span class="org-level-2">** more design about the command-line-interface</span>
<span class="org-level-2">** re-design the color of cicada-nymph-mode and re-write the emacs-lisp code</span>
<span class="org-level-2">** [how] variable must be able to store string</span>
<span class="org-level-2">** name-hash-table</span>
   * better factoring
   * better naming
<span class="org-level-2">** title-name-table</span>
<span class="org-level-2">** data-giver</span>
<span class="org-level-2">** big number and &#21516;&#39192;&#26041;&#31243;</span>
   * &#29234;&#20102;&#29609; hash-table
<span class="org-level-1">* ===================================</span>
<span class="org-level-1">* </span><span class="org-todo">note</span>
<span class="org-level-2">** notation</span>
   * use ","
<span class="org-level-2">** data section in cicada-nymph</span>
<span class="org-level-1">* ===================================</span>
<span class="org-level-1">* misc</span>
<span class="org-block-begin-line">  #+begin_src cicada-nymph :tangle core.cn
</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">cr</span> <span class="cicada-nymph-comment">&lt;&lt; cr denotes carriage return &gt;&gt;</span>
    <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
    <span class="cicada-nymph-number">10</span> write-byte
    <span class="cicada-nymph-end">end</span>
  <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">  #+end_src
</span><span class="org-level-1">* more syntax for make-jojo</span>
<span class="org-level-2">** word:[if|else|then]?</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">word:if?</span>
     <span class="cicada-nymph-comment">&lt;&lt; word[address, length] -- bool &gt;&gt;</span>
     <span class="cicada-nymph-string">"if"</span> string-equal?
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">word:else?</span>
     <span class="cicada-nymph-comment">&lt;&lt; word[address, length] -- bool &gt;&gt;</span>
     <span class="cicada-nymph-string">"else"</span> string-equal?
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">word:then?</span>
     <span class="cicada-nymph-comment">&lt;&lt; word[address, length] -- bool &gt;&gt;</span>
     <span class="cicada-nymph-string">"then"</span> string-equal?
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** syntax,[if|else|then],make-jojo</span>
   * one predicate can make two branchs
     three predicates can make four branchs
     three predicates may only make three branchs
     but indeed there must be an invisible branch
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">syntax,if,make-jojo</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length], word:if --
        address, string[address, length] &gt;&gt;</span>
     drop2
     <span class="cicada-nymph-variable">*false?branch*</span> save-into,jo-heap
     <span class="cicada-nymph-variable">*current-free-address,jo-heap*</span> xx|swap|x
     <span class="cicada-nymph-number">0</span> save-into,jo-heap
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">syntax,else,make-jojo</span>
     <span class="cicada-nymph-comment">&lt;&lt; address, string[address, length], word:else --
        address, string[address, length] &gt;&gt;</span>
     drop2
     <span class="cicada-nymph-variable">*branch*</span> save-into,jo-heap
     x|swap|xx
     <span class="cicada-nymph-variable">*current-free-address,jo-heap*</span> xxx|swap|x
     <span class="cicada-nymph-number">0</span> save-into,jo-heap
     <span class="cicada-nymph-comment">&lt;&lt; address, string[address, length], address &gt;&gt;</span>
     <span class="cicada-nymph-variable">*current-free-address,jo-heap*</span>
     over sub <span class="cicada-nymph-variable">*jo-size*</span> div
     swap save
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">syntax,then,make-jojo</span>
     <span class="cicada-nymph-comment">&lt;&lt; address, string[address, length], word:then --
        string[address, length] &gt;&gt;</span>
     drop2
     x|swap|xx
     <span class="cicada-nymph-variable">*current-free-address,jo-heap*</span>
     over sub <span class="cicada-nymph-variable">*jo-size*</span> div
     swap save
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span><span class="org-level-2"> if &amp; else &amp; then</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">kkk</span>
     <span class="cicada-nymph-string">"kkk took my baby away !"</span> write-string
     cr
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   kkk

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">factorial</span>
     <span class="cicada-nymph-comment">&lt;&lt; number -- number &gt;&gt;</span>
     dup
     one? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     dup sub1 factorial
     mul
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">factorial,test</span>
     cr
     <span class="cicada-nymph-number">1</span> factorial . cr
     <span class="cicada-nymph-number">2</span> factorial . cr
     <span class="cicada-nymph-number">3</span> factorial . cr
     <span class="cicada-nymph-number">4</span> factorial . cr
     <span class="cicada-nymph-number">5</span> factorial . cr
     <span class="cicada-nymph-number">6</span> factorial . cr
     <span class="cicada-nymph-number">7</span> factorial . cr
     <span class="cicada-nymph-number">8</span> factorial . cr
     <span class="cicada-nymph-number">9</span> factorial . cr
     <span class="cicada-nymph-number">10</span> factorial . cr
     <span class="cicada-nymph-number">11</span> factorial . cr
     <span class="cicada-nymph-number">12</span> factorial . cr
     <span class="cicada-nymph-number">13</span> factorial . cr
     <span class="cicada-nymph-number">14</span> factorial . cr
     <span class="cicada-nymph-number">15</span> factorial . cr
     <span class="cicada-nymph-number">16</span> factorial . cr
     <span class="cicada-nymph-number">17</span> factorial . cr
     <span class="cicada-nymph-number">18</span> factorial . cr
     <span class="cicada-nymph-number">19</span> factorial . cr
     <span class="cicada-nymph-number">20</span> factorial . cr
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">.12</span>
     <span class="cicada-nymph-comment">&lt;&lt; 1 2 -- &gt;&gt;</span>
     <span class="cicada-nymph-number">2</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-string">"(^-^)"</span> write-string
       <span class="cicada-nymph-number">1</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
         <span class="cicada-nymph-string">"\^o^/"</span> write-string
       <span class="cicada-nymph-syntax-key-word">else</span>
         <span class="cicada-nymph-string">"     "</span> write-string
       <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-syntax-key-word">else</span>
       <span class="cicada-nymph-string">"     "</span> write-string
       <span class="cicada-nymph-number">1</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
         <span class="cicada-nymph-string">"\^o^/"</span> write-string
       <span class="cicada-nymph-syntax-key-word">else</span>
         <span class="cicada-nymph-string">"     "</span> write-string
       <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">.12,test</span>
     cr
     <span class="cicada-nymph-number">1</span> <span class="cicada-nymph-number">2</span> .12 cr
     <span class="cicada-nymph-number">6</span> <span class="cicada-nymph-number">2</span> .12 cr
     <span class="cicada-nymph-number">1</span> <span class="cicada-nymph-number">6</span> .12 cr
     <span class="cicada-nymph-number">6</span> <span class="cicada-nymph-number">6</span> .12 cr
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>


   factorial,test
   .12,test
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-todo">&#35352;</span><span class="org-level-2"> exception handling</span>
   * &#22312;&#35486;&#35328;&#20013;&#35373;&#35336;&#33391;&#22909;&#30340;&#37679;&#35492;&#34389;&#29702;
     &#26159;&#40723;&#21237;&#31243;&#24207;&#21729;&#23531;&#20986;&#30382;&#23526;&#30340;&#31243;&#24207;&#30340;&#38364;&#37749;
   * &#30446;&#21069;&#30340;
     &#21033;&#29992; prepare-for &#20358;&#23526;&#29694;&#30340;&#37679;&#35492;&#34389;&#29702;&#27231;&#21046;
     &#21487;&#33021;&#36996;&#36960;&#36960;&#19981;&#22816;&#33391;&#22909;
<span class="org-level-2">** word:prepare-for?</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">word:prepare-for?</span>
     <span class="cicada-nymph-comment">&lt;&lt; word[address, length] -- bool &gt;&gt;</span>
     <span class="cicada-nymph-string">"prepare-for"</span> string-equal?
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** syntax,prepare-for,make-jojo</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">syntax,prepare-for,make-jojo</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length], word:prepare-for --
        string[address, length] &gt;&gt;</span>
     drop2
     <span class="cicada-nymph-variable">*prepare-for*</span>    save-into,jo-heap
     <span class="cicada-nymph-variable">*exception-head*</span> save-into,jo-heap
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** more,rule-set,make-jojo</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">more,rule-set,make-jojo</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-syntax-key-word">jo</span> word:if?   <span class="cicada-nymph-syntax-key-word">jo</span> syntax,if,make-jojo    <span class="cicada-nymph-variable">*rule-set,make-jojo*</span> add-rule
     <span class="cicada-nymph-syntax-key-word">jo</span> word:else? <span class="cicada-nymph-syntax-key-word">jo</span> syntax,else,make-jojo  <span class="cicada-nymph-variable">*rule-set,make-jojo*</span> add-rule
     <span class="cicada-nymph-syntax-key-word">jo</span> word:then? <span class="cicada-nymph-syntax-key-word">jo</span> syntax,then,make-jojo  <span class="cicada-nymph-variable">*rule-set,make-jojo*</span> add-rule

     <span class="cicada-nymph-syntax-key-word">jo</span> word:prepare-for? <span class="cicada-nymph-syntax-key-word">jo</span> syntax,prepare-for,make-jojo <span class="cicada-nymph-variable">*rule-set,make-jojo*</span> add-rule
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   more,rule-set,make-jojo
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* allocate</span>
<span class="org-level-2">** </span><span class="org-todo">note</span>
   * an interface of <span class="bold">*un-initialized-memory*</span>
<span class="org-level-2">** clear-memory [not using]</span>
   * this kinds of functions
     must be implemented in assembly code
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">clear-memory</span>
     <span class="cicada-nymph-comment">&lt;&lt; size, address -- &gt;&gt;</span>
     over zero? <span class="cicada-nymph-syntax-key-word">if</span>
       drop2
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-number">0</span> over save
     add1 swap
     sub1 swap
     <span class="cicada-nymph-end">&lt;&gt;</span> clear-memory
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** allocate-memory</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">allocate-memory</span>
     <span class="cicada-nymph-comment">&lt;&lt; size -- address &gt;&gt;</span>
     dup <span class="cicada-nymph-variable">*current-free-address,un-initialized-memory*</span> clear-memory
     <span class="cicada-nymph-variable">*current-free-address,un-initialized-memory*</span> swap <span class="cicada-nymph-comment">&lt;&lt; address as return value &gt;&gt;</span>
     <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*current-free-address,un-initialized-memory*</span> add-save
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* basic-REPL                          </span><span class="org-level-1"><span class="org-tag">:redefine:</span></span>
<span class="org-level-2">** </span><span class="org-level-2"><span class="bold">*rule-set,basic-REPL*</span></span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-number">1024</span> <span class="cicada-nymph-variable">*jo-size*</span> mul
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*size,rule-set,basic-REPL*</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>

   <span class="cicada-nymph-comment">&lt;&lt; for cursor &gt;&gt;</span>
   <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-allocate">allocate-memory</span> drop

   <span class="cicada-nymph-variable">*size,rule-set,basic-REPL*</span>
   <span class="cicada-nymph-allocate">allocate-memory</span>
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*rule-set,basic-REPL*</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>

   <span class="cicada-nymph-variable">*rule-set,basic-REPL*</span>
   <span class="cicada-nymph-variable">*rule-set,basic-REPL*</span> <span class="cicada-nymph-variable">*jo-size*</span> sub
   save
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** execute-word</span>
   * to protect exception-jo from be called from basic-REPL
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">execute-word</span>
     <span class="cicada-nymph-comment">&lt;&lt; word[address, length] -- unknown &gt;&gt;</span>
     dup2
     find <span class="cicada-nymph-syntax-key-word">if</span>
       dup exception-jo? <span class="cicada-nymph-syntax-key-word">if</span>
         drop
         <span class="cicada-nymph-string">"* (execute-word) can not execute exception directly : "</span> write-string
         write-string cr
         <span class="cicada-nymph-end">end</span>
       <span class="cicada-nymph-syntax-key-word">then</span>
       <span class="cicada-nymph-comment">&lt;&lt; function &amp; primitive-function &amp; variable &gt;&gt;</span>
       xx|swap|x drop2
       execute-jo
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">else</span>
     <span class="cicada-nymph-string">"* (execute-word) meets undefined word : "</span> write-string
     write-string cr
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** word:bye?</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">word:bye?</span>
     <span class="cicada-nymph-comment">&lt;&lt; word[address, length] -- bool &gt;&gt;</span>
     <span class="cicada-nymph-string">"bye"</span> string-equal?
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** !bye,basic-REPL</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">!bye,basic-REPL</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     drop-syntax-stack
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-exception</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** syntax,bye,basic-REPL</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">syntax,bye,basic-REPL</span>
     <span class="cicada-nymph-comment">&lt;&lt; word:bye -- &gt;&gt;</span>
     drop2
     <span class="cicada-nymph-exception">!bye,basic-REPL</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** init,rule-set,basic-REPL</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">init,rule-set,basic-REPL</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-syntax-key-word">jo</span> integer-string? <span class="cicada-nymph-syntax-key-word">jo</span> string-&gt;integer       <span class="cicada-nymph-variable">*rule-set,basic-REPL*</span> add-rule
     <span class="cicada-nymph-syntax-key-word">jo</span> word:bye?       <span class="cicada-nymph-syntax-key-word">jo</span> syntax,bye,basic-REPL <span class="cicada-nymph-variable">*rule-set,basic-REPL*</span> add-rule
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   init,rule-set,basic-REPL
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** basic-REPL</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">basic-REPL,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; unknown -- unknown &gt;&gt;</span>
     read-word-for-REPL
     dup2 find-syntax <span class="cicada-nymph-syntax-key-word">if</span>
       execute-jo
     <span class="cicada-nymph-syntax-key-word">else</span>
       execute-word
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-end">&lt;&gt;</span> basic-REPL,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">basic-REPL</span>
     <span class="cicada-nymph-comment">&lt;&lt; unknown -- unknown &gt;&gt;</span>
     prepare-for
       <span class="cicada-nymph-exception">!bye,basic-REPL</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-variable">*rule-set,basic-REPL*</span> push-syntax-stack
     basic-REPL,loop
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   basic-REPL
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* stack-REPL</span>
<span class="org-level-2">** </span><span class="org-todo">note</span>
   * print argument-stack in every loop
<span class="org-level-2">** print-argument-stack</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">print-argument-stack,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; address, counter -- &gt;&gt;</span>
     dup zero? <span class="cicada-nymph-syntax-key-word">if</span>
       drop2
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     sub1 swap
       dup fetch .
     <span class="cicada-nymph-variable">*jo-size*</span> add
     swap
     <span class="cicada-nymph-end">&lt;&gt;</span> print-argument-stack,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">print-argument-stack</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     snapshot-the-stack-pointer
     <span class="cicada-nymph-variable">*the-stack-pointer-snapshot*</span>
     <span class="cicada-nymph-variable">*the-stack*</span> greater-or-equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-variable">*the-stack*</span>   <span class="cicada-nymph-comment">&lt;&lt; address as return value &gt;&gt;</span>
       <span class="cicada-nymph-variable">*the-stack-pointer-snapshot*</span> <span class="cicada-nymph-variable">*the-stack*</span> sub
       <span class="cicada-nymph-variable">*jo-size*</span> div <span class="cicada-nymph-comment">&lt;&lt; counter as return value &gt;&gt;</span>
       print-argument-stack,loop
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-string">"below the stack "</span> write-string
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** print-argument-stack,pretty</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">print-argument-stack,pretty</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     snapshot-the-stack-pointer
     cr
     <span class="cicada-nymph-string">" * "</span> write-string
        <span class="cicada-nymph-variable">*the-stack-pointer-snapshot*</span>
        <span class="cicada-nymph-variable">*the-stack*</span> sub
        <span class="cicada-nymph-comment">&lt;&lt; ad hoc for the BUG of div &gt;&gt;</span>
        dup negative? <span class="cicada-nymph-syntax-key-word">if</span>
          negate
          <span class="cicada-nymph-variable">*jo-size*</span> div
          negate
        <span class="cicada-nymph-syntax-key-word">else</span>
          <span class="cicada-nymph-variable">*jo-size*</span> div
        <span class="cicada-nymph-syntax-key-word">then</span>
        write-integer
     <span class="cicada-nymph-string">" * "</span> write-string
     <span class="cicada-nymph-string">" -- "</span> write-string
       print-argument-stack
     <span class="cicada-nymph-string">"--"</span> write-string
     cr
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** stack-REPL</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">stack-REPL,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; unknown -- unknown &gt;&gt;</span>
     read-word-for-REPL
     dup2 find-syntax <span class="cicada-nymph-syntax-key-word">if</span>
       execute-jo
     <span class="cicada-nymph-syntax-key-word">else</span>
       execute-word
     <span class="cicada-nymph-syntax-key-word">then</span>
     print-argument-stack,pretty
     <span class="cicada-nymph-end">&lt;&gt;</span> stack-REPL,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">stack-REPL</span>
     <span class="cicada-nymph-comment">&lt;&lt; unknown -- unknown &gt;&gt;</span>
     prepare-for
       <span class="cicada-nymph-exception">!bye,basic-REPL</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-variable">*rule-set,basic-REPL*</span> push-syntax-stack
     stack-REPL,loop
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* constant for linux                  </span><span class="org-level-1"><span class="org-tag">:linux:</span></span>
<span class="org-level-2">** init-syscall-number</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,open:</span>  <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,close:</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,read:</span>  <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,write:</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,stat:</span>  <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,exit:</span>  <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,times:</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">init-syscall-number</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">4</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-number">5</span>   <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">:syscall-number,open:</span>  save
       <span class="cicada-nymph-number">6</span>   <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">:syscall-number,close:</span> save
       <span class="cicada-nymph-number">3</span>   <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">:syscall-number,read:</span>  save
       <span class="cicada-nymph-number">4</span>   <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">:syscall-number,write:</span> save
       <span class="cicada-nymph-number">106</span> <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">:syscall-number,stat:</span>  save
       <span class="cicada-nymph-number">1</span>   <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">:syscall-number,exit:</span>  save
       <span class="cicada-nymph-number">43</span>  <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">:syscall-number,times:</span> save
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">8</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-number">2</span>   <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">:syscall-number,open:</span>  save
       <span class="cicada-nymph-number">3</span>   <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">:syscall-number,close:</span> save
       <span class="cicada-nymph-number">0</span>   <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">:syscall-number,read:</span>  save
       <span class="cicada-nymph-number">1</span>   <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">:syscall-number,write:</span> save
       <span class="cicada-nymph-number">4</span>   <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">:syscall-number,stat:</span>  save
       <span class="cicada-nymph-number">60</span>  <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">:syscall-number,exit:</span>  save
       <span class="cicada-nymph-number">100</span> <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">:syscall-number,times:</span> save
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   init-syscall-number
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** error-code-&gt;string</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">error-code-&gt;string</span>
     <span class="cicada-nymph-comment">&lt;&lt; error-code -- string[address, length] &gt;&gt;</span>
     dup <span class="cicada-nymph-number">-1</span>  equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"EPERM    Operation not permitted "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-2</span>  equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"ENOENT   No such file or directory "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-3</span>  equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"ESRCH    No such process "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-4</span>  equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"EINTR    Interrupted system call "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-5</span>  equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"EIO      I/O error "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-6</span>  equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"ENXIO    No such device or address "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-7</span>  equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"E2BIG    Argument list too long "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-8</span>  equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"ENOEXEC  Exec format error "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-9</span>  equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"EBADF    Bad file number "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-10</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"ECHILD   No child processes "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-11</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"EAGAIN   Try again "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-12</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"ENOMEM   Out of memory "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-13</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"EACCES   Permission denied "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-14</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"EFAULT   Bad address "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-15</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"ENOTBLK  Block device required "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-16</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"EBUSY    Device or resource busy "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-17</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"EEXIST   File exists "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-18</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"EXDEV    Cross-device link "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-19</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"ENODEV   No such device "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-20</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"ENOTDIR  Not a directory "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-21</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"EISDIR   Is a directory "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-22</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"EINVAL   Invalid argument "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-23</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"ENFILE   File table overflow "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-24</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"EMFILE   Too many open files "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-25</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"ENOTTY   Not a typewriter "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-26</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"ETXTBSY  Text file busy "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-27</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"EFBIG    File too large "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-28</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"ENOSPC   No space left on device "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-29</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"ESPIPE   Illegal seek "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-30</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"EROFS    Read-only file system "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-31</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"EMLINK   Too many links "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-32</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"EPIPE    Broken pipe "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-33</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"EDOM     Math argument out of domain of func "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-34</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"ERANGE   Math result not representable "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-string">"unknow error-code : "</span> write-string
     write-integer cr
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* report</span>
<span class="org-level-2">** welcome</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">welcome</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"* welcome to cicada-nymph ^-^"</span> .s
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** report-dictionary</span>
<span class="org-level-3">*** report-dictionary,primitive-function</span>
<span class="org-block-begin-line">    #+begin_src cicada-nymph :tangle core.cn
</span>    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">loop,report-dictionary,primitive-function</span>
      <span class="cicada-nymph-comment">&lt;&lt; counter, jo -- total &gt;&gt;</span>
      dup zero? <span class="cicada-nymph-syntax-key-word">if</span>
        drop
        <span class="cicada-nymph-end">end</span>
      <span class="cicada-nymph-syntax-key-word">then</span>
      dup primitive-function-jo? false? <span class="cicada-nymph-syntax-key-word">if</span>
        jo-&gt;pre-jo
        <span class="cicada-nymph-end">&lt;&gt;</span> loop,report-dictionary,primitive-function
      <span class="cicada-nymph-syntax-key-word">then</span>
      swap
        <span class="cicada-nymph-string">"  "</span> write-string
        add1 dup .
      swap
      dup jo-&gt;name
      dup2 space-string? <span class="cicada-nymph-syntax-key-word">if</span>
        drop2
        <span class="cicada-nymph-string">" un-named "</span> write-string cr
      <span class="cicada-nymph-syntax-key-word">else</span>
        write-string cr
      <span class="cicada-nymph-syntax-key-word">then</span>
      jo-&gt;pre-jo
      <span class="cicada-nymph-end">&lt;&gt;</span> loop,report-dictionary,primitive-function
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">report-dictionary,primitive-function</span>
      <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
      <span class="cicada-nymph-string">"* all primitive-function in dictionary :"</span> write-string cr
      <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-variable">*first-jo-in-dictionary*</span>
      loop,report-dictionary,primitive-function
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">    #+end_src
</span><span class="org-level-3">*** report-dictionary,function</span>
<span class="org-block-begin-line">    #+begin_src cicada-nymph :tangle core.cn
</span>    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">loop,report-dictionary,function</span>
      <span class="cicada-nymph-comment">&lt;&lt; counter, jo -- total &gt;&gt;</span>
      dup zero? <span class="cicada-nymph-syntax-key-word">if</span>
        drop
        <span class="cicada-nymph-end">end</span>
      <span class="cicada-nymph-syntax-key-word">then</span>
      dup function-jo? false? <span class="cicada-nymph-syntax-key-word">if</span>
        jo-&gt;pre-jo
        <span class="cicada-nymph-end">&lt;&gt;</span> loop,report-dictionary,function
      <span class="cicada-nymph-syntax-key-word">then</span>
      swap
        <span class="cicada-nymph-string">"  "</span> write-string
        add1 dup .
      swap
      dup jo-&gt;name
      dup2 space-string? <span class="cicada-nymph-syntax-key-word">if</span>
        drop2
        <span class="cicada-nymph-string">" un-named "</span> write-string cr
      <span class="cicada-nymph-syntax-key-word">else</span>
        write-string cr
      <span class="cicada-nymph-syntax-key-word">then</span>
      jo-&gt;pre-jo
      <span class="cicada-nymph-end">&lt;&gt;</span> loop,report-dictionary,function
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">report-dictionary,function</span>
      <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
      <span class="cicada-nymph-string">"* all function in dictionary :"</span> write-string cr
      <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-variable">*first-jo-in-dictionary*</span>
      loop,report-dictionary,function
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">    #+end_src
</span><span class="org-level-3">*** report-dictionary,exception</span>
<span class="org-block-begin-line">    #+begin_src cicada-nymph :tangle core.cn
</span>    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">loop,report-dictionary,exception</span>
      <span class="cicada-nymph-comment">&lt;&lt; counter, jo -- total &gt;&gt;</span>
      dup zero? <span class="cicada-nymph-syntax-key-word">if</span>
        drop
        <span class="cicada-nymph-end">end</span>
      <span class="cicada-nymph-syntax-key-word">then</span>
      dup exception-jo? false? <span class="cicada-nymph-syntax-key-word">if</span>
        jo-&gt;pre-jo
        <span class="cicada-nymph-end">&lt;&gt;</span> loop,report-dictionary,exception
      <span class="cicada-nymph-syntax-key-word">then</span>
      swap
        <span class="cicada-nymph-string">"  "</span> write-string
        add1 dup .
      swap
      dup jo-&gt;name
      dup2 space-string? <span class="cicada-nymph-syntax-key-word">if</span>
        drop2
        <span class="cicada-nymph-string">" un-named "</span> write-string cr
      <span class="cicada-nymph-syntax-key-word">else</span>
        write-string cr
      <span class="cicada-nymph-syntax-key-word">then</span>
      jo-&gt;pre-jo
      <span class="cicada-nymph-end">&lt;&gt;</span> loop,report-dictionary,exception
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">report-dictionary,exception</span>
      <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
      <span class="cicada-nymph-string">"* all exception in dictionary :"</span> write-string cr
      <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-variable">*first-jo-in-dictionary*</span>
      loop,report-dictionary,exception
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">    #+end_src
</span><span class="org-level-3">*** report-dictionary,variable</span>
<span class="org-block-begin-line">    #+begin_src cicada-nymph :tangle core.cn
</span>    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">loop,report-dictionary,variable</span>
      <span class="cicada-nymph-comment">&lt;&lt; counter, jo -- total &gt;&gt;</span>
      dup zero? <span class="cicada-nymph-syntax-key-word">if</span>
        drop
        <span class="cicada-nymph-end">end</span>
      <span class="cicada-nymph-syntax-key-word">then</span>
      dup variable-jo? false? <span class="cicada-nymph-syntax-key-word">if</span>
        jo-&gt;pre-jo
        <span class="cicada-nymph-end">&lt;&gt;</span> loop,report-dictionary,variable
      <span class="cicada-nymph-syntax-key-word">then</span>
      swap
        <span class="cicada-nymph-string">"  "</span> write-string
        add1 dup .
      swap
      dup jo-&gt;name
      dup2 space-string? <span class="cicada-nymph-syntax-key-word">if</span>
        drop2
        <span class="cicada-nymph-string">" un-named "</span> write-string cr
      <span class="cicada-nymph-syntax-key-word">else</span>
        write-string cr
      <span class="cicada-nymph-syntax-key-word">then</span>
      jo-&gt;pre-jo
      <span class="cicada-nymph-end">&lt;&gt;</span> loop,report-dictionary,variable
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">report-dictionary,variable</span>
      <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
      <span class="cicada-nymph-string">"* all variable in dictionary :"</span> write-string cr
      <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-variable">*first-jo-in-dictionary*</span>
      loop,report-dictionary,variable
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">    #+end_src
</span><span class="org-level-3">*** report-dictionary</span>
    * different types of words in dictionary
      are showed separately
<span class="org-block-begin-line">    #+begin_src cicada-nymph :tangle core.cn
</span>    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">report-dictionary</span>
      <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
      report-dictionary,primitive-function
      report-dictionary,function add
      report-dictionary,exception add
      report-dictionary,variable add
      <span class="cicada-nymph-string">"* totally : "</span> write-string
      write-integer cr
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">    #+end_src
</span><span class="org-level-2">** report-memory</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">report-memory</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"* *un-initialized-memory*"</span> write-string cr
     <span class="cicada-nymph-string">"  * size : "</span> write-string
          <span class="cicada-nymph-variable">*size,un-initialized-memory*</span>
          . cr
     <span class="cicada-nymph-string">"  * used : "</span> write-string
          <span class="cicada-nymph-variable">*current-free-address,un-initialized-memory*</span>
          <span class="cicada-nymph-variable">*un-initialized-memory*</span>
          sub . cr
     <span class="cicada-nymph-string">"  * free : "</span> write-string
          <span class="cicada-nymph-variable">*size,un-initialized-memory*</span>
          <span class="cicada-nymph-variable">*current-free-address,un-initialized-memory*</span>
          <span class="cicada-nymph-variable">*un-initialized-memory*</span>
          sub sub . cr
     <span class="cicada-nymph-string">"* *primitive-string-heap*"</span> write-string cr
     <span class="cicada-nymph-string">"  * size : "</span> write-string
          <span class="cicada-nymph-variable">*size,primitive-string-heap*</span>
          . cr
     <span class="cicada-nymph-string">"  * used : "</span> write-string
          <span class="cicada-nymph-variable">*current-free-address,primitive-string-heap*</span>
          <span class="cicada-nymph-variable">*primitive-string-heap*</span>
          sub . cr
     <span class="cicada-nymph-string">"  * free : "</span> write-string
          <span class="cicada-nymph-variable">*size,primitive-string-heap*</span>
          <span class="cicada-nymph-variable">*current-free-address,primitive-string-heap*</span>
          <span class="cicada-nymph-variable">*primitive-string-heap*</span>
          sub sub . cr
     <span class="cicada-nymph-string">"* *jo-heap*"</span> write-string cr
     <span class="cicada-nymph-string">"  * size : "</span> write-string
          <span class="cicada-nymph-variable">*size,jo-heap*</span> . cr
     <span class="cicada-nymph-string">"  * used : "</span> write-string
          <span class="cicada-nymph-variable">*current-free-address,jo-heap*</span>
          <span class="cicada-nymph-variable">*jo-heap*</span>
          sub . cr
     <span class="cicada-nymph-string">"  * free : "</span> write-string
          <span class="cicada-nymph-variable">*size,jo-heap*</span>
          <span class="cicada-nymph-variable">*current-free-address,jo-heap*</span>
          <span class="cicada-nymph-variable">*jo-heap*</span>
          sub sub . cr
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** report-platform</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">report-platform</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"* platform : "</span> write-string
     platform write-string
     cr
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** report-jo-size</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">report-jo-size</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"* jo-size : "</span> write-string
     <span class="cicada-nymph-variable">*jo-size*</span> write-nature-number
     <span class="cicada-nymph-string">" bytes"</span> write-string
     cr
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** report-machine-word-size</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">report-machine-word-size</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"* machine-word-size : "</span> write-string
     <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">8</span> mul write-nature-number
     <span class="cicada-nymph-string">" bits"</span> write-string
     cr
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** report-syntax-set                  </span><span class="org-level-2"><span class="org-tag">:not_using:</span></span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">report-syntax-set,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; counter, cursor -- &gt;&gt;</span>
     dup <span class="cicada-nymph-variable">*syntax-set*</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
       drop2
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-string">"  "</span> write-string
     swap add1 dup . swap
     dup <span class="cicada-nymph-variable">*jo-size*</span> sub fetch
     jo-&gt;name write-string <span class="cicada-nymph-string">" "</span> write-string
     dup <span class="cicada-nymph-variable">*jo-size*</span> sub <span class="cicada-nymph-variable">*jo-size*</span> sub fetch
     jo-&gt;name write-string cr
     <span class="cicada-nymph-variable">*jo-size*</span> sub <span class="cicada-nymph-variable">*jo-size*</span> sub
     <span class="cicada-nymph-end">&lt;&gt;</span> report-syntax-set,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">report-syntax-set</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"* syntax-set : "</span> .s
     <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-variable">*current-free-address,syntax-set*</span>
     report-syntax-set,loop
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** initial-report</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">initial-report</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"* initial-report : "</span> write-string cr
     <span class="cicada-nymph-string">"  "</span> write-string report-platform
     <span class="cicada-nymph-string">"  "</span> write-string report-machine-word-size
     <span class="cicada-nymph-string">"  "</span> write-string report-jo-size
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** report-loaded-core-file</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">report-loaded-core-file</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"* loaded-core-file : "</span> .s
     <span class="cicada-nymph-string">"    "</span> write-string
     get-path,loaded-core-file .s
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** hi</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-number">0</span>
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*hi,random-base*</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">hi,random</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- random-number &gt;&gt;</span>
     <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-constant">:syscall-number,times:</span>
     <span class="cicada-nymph-number">1</span> syscall
     <span class="cicada-nymph-number">13</span> mod
     <span class="cicada-nymph-comment">&lt;&lt;
      *hi,random-base*
      *hi,random-base* add1 13 mod
      address *hi,random-base* save
     &gt;&gt;</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">hi,say</span>
     <span class="cicada-nymph-comment">&lt;&lt; number -- &gt;&gt;</span>
     dup <span class="cicada-nymph-number">0</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"* do not forget to eat good good coder !"</span> .s <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">1</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"* me wile moku e pona moku ^-^"</span> .s <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">2</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"* cica cica da yaya !!!"</span> .s <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">3</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"* hi ^-^"</span> .s <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">4</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"* hello :)"</span> .s <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">5</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"* hey *^-^*"</span> .s <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">6</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"* hiya \^o^/"</span> .s <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">7</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"* I wish you a lovely day"</span> .s <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">8</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"* I wish you a lovely day { or night :P }"</span> .s <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">9</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"* o.o"</span> .s <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     drop <span class="cicada-nymph-string">"* lovely ^3^"</span> .s <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">hi</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     hi,random
     hi,say
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* -----------------------------------</span>
<span class="org-level-1">* port</span>
<span class="org-level-2">** </span><span class="org-todo">&#35352;</span><span class="org-level-2"> &#38364;&#26044;&#36664;&#20837;&#36664;&#20986;</span>
   * &#25509;&#21475;&#35373;&#35336;&#20998;&#20841;&#20491;&#23652;&#27425;
     1. &#24213;&#23652;&#30340;&#20197; port &#29234;&#22522;&#30990;&#30340;&#25509;&#21475;
        &#36889;&#35023;&#25033;&#35442;&#22914;&#20309;&#35373;&#35336;&#36996;&#19981;&#30906;&#23450;
        &#21487;&#33021;&#26371;&#27169;&#20223;&#25805;&#20316;&#31995;&#32113;&#25152;&#25552;&#20379;&#30340;&#25509;&#21475;
     2. &#39640;&#23652;&#30340;&#20197; path &#29234;&#22522;&#30990;&#30340;&#25509;&#21475;
        &#36889;&#35023;&#23559;&#25277;&#35937;&#25481; port &#36889;&#20491;&#27010;&#24565;
        &#20063;&#23601;&#26159;&#27599;&#27425;&#31777;&#21934;&#30340;&#35712;&#23531;&#37117;&#20276;&#38568;&#20841;&#20491;&#23565; port &#30340;&#25805;&#20316;
        &#36889;&#27171;&#25509;&#21475;&#23601;&#24456;&#31777;&#21934; &#20294;&#26159;&#36895;&#24230;&#21487;&#33021;&#26371;&#38750;&#24120;&#24930;
<span class="org-level-2">** open-input-port</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">open-input-port</span>
     <span class="cicada-nymph-comment">&lt;&lt; path[address, length]
        -- port, true
        -- error-code, false &gt;&gt;</span>
     string-&gt;syscall-string
     <span class="cicada-nymph-save-local-variable-1">&gt;:syscall-path</span>
     <span class="cicada-nymph-number">0</span>
     <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-comment">&lt;&lt;
     O_RDONLY      0000h
     &gt;&gt;</span>
     <span class="cicada-nymph-fetch-local-variable-1">:syscall-path</span>
     <span class="cicada-nymph-constant">:syscall-number,open:</span>
     <span class="cicada-nymph-number">3</span> syscall
     dup
     negative? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-bool">true</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** open-output-port,[creat|update]</span>
   * interface
     <span class="org-table">|--------+-----------------------|</span>
     <span class="org-table">| creat  | fail if already exist |</span>
     <span class="org-table">| update | fail if nor exist     |</span>
     <span class="org-table">|--------+-----------------------|</span>
   * one should always know if a file exist or not
     when open it as output-port
     predicates are provided to help you to do so
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">open-output-port,creat</span>
     <span class="cicada-nymph-comment">&lt;&lt; path[address, length]
        -- port, true
        -- error-code, false &gt;&gt;</span>
     string-&gt;syscall-string
     <span class="cicada-nymph-save-local-variable-1">&gt;:syscall-path</span>
     <span class="cicada-nymph-number">420</span> <span class="cicada-nymph-comment">&lt;&lt;
     110100100b
     644o
     6 8 2 power mul
     4 8 1 power mul add
     4 8 0 power mul add
     &gt;&gt;</span>
     <span class="cicada-nymph-number">578</span> <span class="cicada-nymph-comment">&lt;&lt;
     O_RDWR  0002h 0002o
     O_CREAT 0100h 0100o
     O_TRUNC 0800h 1000o
     1102o
     1 8 3 power mul
     1 8 2 power mul add
     0 8 1 power mul add
     2 8 0 power mul add
     &gt;&gt;</span>
     <span class="cicada-nymph-fetch-local-variable-1">:syscall-path</span>
     <span class="cicada-nymph-constant">:syscall-number,open:</span>
     <span class="cicada-nymph-number">3</span> syscall
     dup
     negative? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-bool">true</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">open-output-port,update</span>
     <span class="cicada-nymph-comment">&lt;&lt; path[address, length]
        -- port, true
        -- error-code, false &gt;&gt;</span>
     string-&gt;syscall-string
     <span class="cicada-nymph-save-local-variable-1">&gt;:syscall-path</span>
     <span class="cicada-nymph-number">420</span> <span class="cicada-nymph-comment">&lt;&lt;
     110100100b
     644o
     6 8 2 power mul
     4 8 1 power mul add
     4 8 0 power mul add
     &gt;&gt;</span>
     <span class="cicada-nymph-number">514</span> <span class="cicada-nymph-comment">&lt;&lt;
     O_RDWR  0002h 0002o
     O_TRUNC 0800h 1000o
     1002o
     1 8 3 power mul
     0 8 2 power mul add
     0 8 1 power mul add
     2 8 0 power mul add
     &gt;&gt;</span>
     <span class="cicada-nymph-fetch-local-variable-1">:syscall-path</span>
     <span class="cicada-nymph-constant">:syscall-number,open:</span>
     <span class="cicada-nymph-number">3</span> syscall
     dup
     negative? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-bool">true</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** close-port</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">close-port</span>
     <span class="cicada-nymph-comment">&lt;&lt; port
        -- true
        -- error-code, false &gt;&gt;</span>
     <span class="cicada-nymph-constant">:syscall-number,close:</span>
     <span class="cicada-nymph-number">1</span> syscall
     dup
     negative? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     drop <span class="cicada-nymph-bool">true</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">test,open-output-port,creat</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"kkk~"</span> open-output-port,creat <span class="cicada-nymph-syntax-key-word">if</span>
       close-port <span class="cicada-nymph-syntax-key-word">if</span>
         <span class="cicada-nymph-end">end</span>
       <span class="cicada-nymph-syntax-key-word">then</span> error-code-&gt;string .s <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span> error-code-&gt;string .s <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
   test,open-output-port,creat

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">test,open-output-port,update</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"kkk~"</span> open-output-port,update <span class="cicada-nymph-syntax-key-word">if</span>
       close-port <span class="cicada-nymph-syntax-key-word">if</span>
         <span class="cicada-nymph-end">end</span>
       <span class="cicada-nymph-syntax-key-word">then</span> error-code-&gt;string .s <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span> error-code-&gt;string .s <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
   test,open-output-port,update
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** read-port</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">read-port</span>
     <span class="cicada-nymph-comment">&lt;&lt; buffer, max-size, port
        -- counter, true
        -- error-code, false &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:port</span>
     swap
     <span class="cicada-nymph-fetch-local-variable-1">:port</span>
     <span class="cicada-nymph-constant">:syscall-number,read:</span>
     <span class="cicada-nymph-number">3</span> syscall
     dup
     negative? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-bool">true</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** write-port</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">write-port</span>
     <span class="cicada-nymph-comment">&lt;&lt; buffer, max-size, port
        -- counter, true
        -- error-code, false &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:port</span>
     swap
     <span class="cicada-nymph-fetch-local-variable-1">:port</span>
     <span class="cicada-nymph-constant">:syscall-number,write:</span>
     <span class="cicada-nymph-number">3</span> syscall
     dup
     negative? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-bool">true</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">test,read-port</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-number">64</span> <span class="cicada-nymph-allocate">allocate-local-memory</span>
     dup
     <span class="cicada-nymph-string">"kkk~"</span> open-input-port <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-number">64</span> swap read-port <span class="cicada-nymph-syntax-key-word">if</span>
         .s
         <span class="cicada-nymph-end">end</span>
       <span class="cicada-nymph-syntax-key-word">then</span> error-code-&gt;string .s <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span> error-code-&gt;string .s <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
   test,read-port
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* path</span>
<span class="org-level-2">** </span><span class="org-todo">&#35352;</span><span class="org-level-2"> syntax about path</span>
   * &#21033;&#29992;&#20102;&#31995;&#32113;&#30340;&#36335;&#24465;&#26684;&#24335;
     &#21516;&#26178;&#21448;&#25226;&#31995;&#32113;&#30340;&#36335;&#24465;&#26684;&#24335;&#25277;&#35937;&#25481;&#20102;
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-curly-braces">{</span><span class="cicada-nymph-wody">path:</span> home xyh cicada core.cn<span class="cicada-nymph-curly-braces">}</span>
   <span class="cicada-nymph-string">"/home/xyh/cicada/core.cn"</span>

   <span class="cicada-nymph-curly-braces">{</span><span class="cicada-nymph-wody">path:</span> home xyh cicada<span class="cicada-nymph-curly-braces">}</span>
   <span class="cicada-nymph-string">"/home/xyh/cicada"</span>

   <span class="cicada-nymph-curly-braces">{</span><span class="cicada-nymph-wody">path:</span> <span class="cicada-nymph-constant">+working+</span> core.cn<span class="cicada-nymph-curly-braces">}</span>
   <span class="cicada-nymph-string">"./core.cn"</span>

   <span class="cicada-nymph-curly-braces">{</span><span class="cicada-nymph-wody">path:</span> <span class="cicada-nymph-constant">+parent+</span> cicada core.cn<span class="cicada-nymph-curly-braces">}</span>
   <span class="cicada-nymph-string">"../cicada/core.cn"</span>

   <span class="cicada-nymph-curly-braces">{</span><span class="cicada-nymph-wody">path:</span> <span class="cicada-nymph-constant">+library+</span> kkk main.cn<span class="cicada-nymph-curly-braces">}</span>
   <span class="cicada-nymph-string">"/home/xyh/.cicada/library/kkk/main.cn"</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** relative-path?</span>
<span class="org-level-2">** full-path?</span>
<span class="org-level-2">** stat structure</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_dev+</span>        <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_ino+</span>        <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_mode+</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_nlink+</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_uid+</span>        <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_gid+</span>        <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_rdev+</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_size+</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_blksize+</span>    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_blocks+</span>     <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_atime+</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_atime_nsec+</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_mtime+</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_mtime_nsec+</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_ctime+</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_ctime_nsec+</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,__unused4+</span>     <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,__unused5+</span>     <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,end+</span>           <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">init,stat</span>
     <span class="cicada-nymph-comment">&lt;&lt; offset -- &gt;&gt;</span>
     <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">4</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_dev+</span>        save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_ino+</span>        save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_mode+</span>       save <span class="cicada-nymph-number">2</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_nlink+</span>      save <span class="cicada-nymph-number">2</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_uid+</span>        save <span class="cicada-nymph-number">2</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_gid+</span>        save <span class="cicada-nymph-number">2</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_rdev+</span>       save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_size+</span>       save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_blksize+</span>    save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_blocks+</span>     save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_atime+</span>      save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_atime_nsec+</span> save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_mtime+</span>      save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_mtime_nsec+</span> save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_ctime+</span>      save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_ctime_nsec+</span> save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,__unused4+</span>     save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,__unused5+</span>     save <span class="cicada-nymph-variable">*jo-size*</span> add
           <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,end+</span>           save
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">8</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_dev+</span>        save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_ino+</span>        save <span class="cicada-nymph-variable">*jo-size*</span> add
       <span class="cicada-nymph-comment">&lt;&lt;
       note the following order changing
       this is linux' bad
       &gt;&gt;</span>
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_nlink+</span>      save <span class="cicada-nymph-number">8</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_mode+</span>       save <span class="cicada-nymph-number">4</span> add

       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_uid+</span>        save <span class="cicada-nymph-number">4</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_gid+</span>        save <span class="cicada-nymph-number">4</span> add
                                             <span class="cicada-nymph-number">4</span> add <span class="cicada-nymph-comment">&lt;&lt; padding &gt;&gt;</span>
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_rdev+</span>       save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_size+</span>       save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_blksize+</span>    save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_blocks+</span>     save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_atime+</span>      save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_atime_nsec+</span> save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_mtime+</span>      save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_mtime_nsec+</span> save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_ctime+</span>      save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_ctime_nsec+</span> save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,__unused4+</span>     save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,__unused5+</span>     save <span class="cicada-nymph-variable">*jo-size*</span> add
           <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,end+</span>           save
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-number">0</span> init,stat
   <span class="cicada-nymph-constant">+stat,end+</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,length+</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">test,stat</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     string-&gt;syscall-string
     <span class="cicada-nymph-save-local-variable-1">&gt;:syscall-path</span>
     <span class="cicada-nymph-constant">+stat,length+</span> <span class="cicada-nymph-allocate">allocate-local-memory</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:stat-structure</span>
     <span class="cicada-nymph-fetch-local-variable-1">:stat-structure</span>
     <span class="cicada-nymph-fetch-local-variable-1">:syscall-path</span>
     <span class="cicada-nymph-constant">:syscall-number,stat:</span>
     <span class="cicada-nymph-number">2</span> syscall
     dup
     negative? <span class="cicada-nymph-syntax-key-word">if</span>
       dup .
       error-code-&gt;string .s
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     drop
     <span class="cicada-nymph-fetch-local-variable-1">:stat-structure</span> init,stat
     <span class="cicada-nymph-constant">+stat,st_dev+</span>        fetch . <span class="cicada-nymph-string">"+stat,st_dev+"</span> .s
     <span class="cicada-nymph-constant">+stat,st_ino+</span>        fetch . <span class="cicada-nymph-string">"+stat,st_ino+"</span> .s
     <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">4</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
     <span class="cicada-nymph-constant">+stat,st_mode+</span>       fetch-two-bytes  . <span class="cicada-nymph-string">"+stat,st_mode+"</span> .s
     <span class="cicada-nymph-constant">+stat,st_nlink+</span>      fetch-two-bytes  . <span class="cicada-nymph-string">"+stat,st_nlink+"</span> .s
     <span class="cicada-nymph-constant">+stat,st_uid+</span>        fetch-two-bytes  . <span class="cicada-nymph-string">"+stat,st_uid+"</span> .s
     <span class="cicada-nymph-constant">+stat,st_gid+</span>        fetch-two-bytes  . <span class="cicada-nymph-string">"+stat,st_gid+"</span> .s
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">8</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
     <span class="cicada-nymph-constant">+stat,st_nlink+</span>      fetch  . <span class="cicada-nymph-string">"+stat,st_nlink+"</span> .s
     <span class="cicada-nymph-constant">+stat,st_mode+</span>       fetch-four-bytes  . <span class="cicada-nymph-string">"+stat,st_mode+"</span> .s
     <span class="cicada-nymph-constant">+stat,st_uid+</span>        fetch-four-bytes  . <span class="cicada-nymph-string">"+stat,st_uid+"</span> .s
     <span class="cicada-nymph-constant">+stat,st_gid+</span>        fetch-four-bytes  . <span class="cicada-nymph-string">"+stat,st_gid+"</span> .s
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-constant">+stat,st_rdev+</span>       fetch . <span class="cicada-nymph-string">"+stat,st_rdev+"</span> .s
     <span class="cicada-nymph-constant">+stat,st_size+</span>       fetch . <span class="cicada-nymph-string">"+stat,st_size+"</span> .s
     <span class="cicada-nymph-constant">+stat,st_blksize+</span>    fetch . <span class="cicada-nymph-string">"+stat,st_blksize+"</span> .s
     <span class="cicada-nymph-constant">+stat,st_blocks+</span>     fetch . <span class="cicada-nymph-string">"+stat,st_blocks+"</span> .s
     <span class="cicada-nymph-constant">+stat,st_atime+</span>      fetch . <span class="cicada-nymph-string">"+stat,st_atime+"</span> .s
     <span class="cicada-nymph-constant">+stat,st_atime_nsec+</span> fetch . <span class="cicada-nymph-string">"+stat,st_atime_nsec+"</span> .s
     <span class="cicada-nymph-constant">+stat,st_mtime+</span>      fetch . <span class="cicada-nymph-string">"+stat,st_mtime+"</span> .s
     <span class="cicada-nymph-constant">+stat,st_mtime_nsec+</span> fetch . <span class="cicada-nymph-string">"+stat,st_mtime_nsec+"</span> .s
     <span class="cicada-nymph-constant">+stat,st_ctime+</span>      fetch . <span class="cicada-nymph-string">"+stat,st_ctime+"</span> .s
     <span class="cicada-nymph-constant">+stat,st_ctime_nsec+</span> fetch . <span class="cicada-nymph-string">"+stat,st_ctime_nsec+"</span> .s
     <span class="cicada-nymph-constant">+stat,__unused4+</span>     fetch . <span class="cicada-nymph-string">"+stat,__unused4+"</span> .s
     <span class="cicada-nymph-constant">+stat,__unused5+</span>     fetch . <span class="cicada-nymph-string">"+stat,__unused5+"</span> .s
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">cn</span> <span class="cicada-nymph-sentence-reader">;</span>
   test,stat

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">no</span> <span class="cicada-nymph-sentence-reader">;</span>
   test,stat
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-todo">note</span><span class="org-level-2"> predicate</span>
   * to use predicate to know more about the file-tree
     before calling a function that makes action on the file-tree
<span class="org-level-2">** path-to-nothing?</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">path-to-nothing?</span>
     <span class="cicada-nymph-comment">&lt;&lt; path[address, length] -- bool &gt;&gt;</span>

     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** path-to-file?</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">path-to-file?</span>
     <span class="cicada-nymph-comment">&lt;&lt; path[address, length] -- bool &gt;&gt;</span>

     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** path-to-directory?</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">path-to-directory?</span>
     <span class="cicada-nymph-comment">&lt;&lt; path[address, length] -- bool &gt;&gt;</span>

     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* file-tree</span>
<span class="org-level-2">** </span><span class="org-todo">note</span>
   * file-tree
     two types of nodes
     1. file
     2. directory
     a leaf must be a file
   * the following interface is provided
     * they use path as an argument
     * they print error message on error
       instead of return error info
       or rise exception
     * the concept of port is
       completely removed from the interface
     --------------------------------
     1. creat-file
        creat-directory
        update-file
        update-directory
     2. remove-file
        remove-directory
     3. find-file-in-directory
     4. list-file-in-directory
<span class="org-level-2">** </span><span class="org-todo">&#35352;</span><span class="org-level-2"> &#37679;&#35492;&#34389;&#29702;</span>
   * &#20841;&#31278;&#39080;&#26684;
     IO &#30456;&#38364;&#30340;&#20989;&#25976;&#22312;&#20986;&#37679;&#26178;
     1. &#31435;&#21363;&#22577;&#37679;
     2. &#36820;&#22238;&#20986;&#37679;&#20449;&#24687;
   * &#31532;&#19968;&#31278;&#24456;&#31777;&#21934;
     &#23427;&#20551;&#35373;&#20102;&#25152;&#26377;&#30340;&#37679;&#35492;&#37117;&#26159;&#19981;&#21487;&#24573;&#30053;&#30340;
<span class="org-level-2">** </span><span class="org-todo">&#35352;</span><span class="org-level-2"> &#20803;&#25976;&#25818;</span>
   * &#35370;&#21839;&#31649;&#29702;
     1. &#35504;&#26377;&#27402;&#35370;&#21839;&#36889;&#20491;&#25991;&#20214;
     2. &#20182;&#30340;&#27402;&#21033;&#26159;&#20160;&#40636;
   * &#25991;&#20214;&#39006;&#22411;
     [linux &#27794;&#26377;]
   * &#25991;&#20214;&#22823;&#23567;
   * &#25991;&#20214;&#20351;&#29992;&#35387;&#37323;
     [linux &#27794;&#26377;]
<span class="org-level-1">* poi</span>
<span class="org-level-2">** </span><span class="org-todo">note</span>
   * poi denotes path-organizer
     it can give a name to a path
     one path one name
     it is designed for (load-file)
<span class="org-level-2">** </span><span class="org-todo">note</span><span class="org-level-2"> two directories</span>
   * two directories to store the name path record
     1. user :
        "<span class="italic">/home/&lt;user&gt;/</span>.cicada/poi"
     2. system :
        "/etc/cicada/poi"
   * note that
     these two directories are viewed as one by poi
     no such things like
     user overriding system will happen
     one name can only exist in one of the two directories
     more on this in the following note
<span class="org-level-2">** </span><span class="org-todo">note</span><span class="org-level-2"> interface for command-line-function</span>
   * cn poi add  &lt;name&gt; &lt;relative-path&gt;
   * cn poi sub  &lt;name&gt;
   * cn poi up   &lt;name&gt; &lt;relative-path&gt;
   * cn poi show &lt;name&gt;
   * cn poi list
   * &lt;relative-path&gt; is converted to &lt;full-path&gt;
     with the help of working-directory
   * &lt;relative-path&gt; is in the format of
     "./dictionary/file"
     "./dictionary/dictionary"
     note that
     for a &lt;relative-path&gt; of dictionary
     not tailing "/" should be added
<span class="org-level-2">** </span><span class="org-todo">note</span><span class="org-level-2"> interface for load-file</span>
   * a path can be a file or a directory
     1. file
        "name" load-file
     2. directory
        "name/file" load-file
        note that
        use "name/file"
        instead of "name/file.cn"
<span class="org-level-2">** </span><span class="org-todo">note</span><span class="org-level-2"> interface in cicada-nymph code</span>
   * poi should not be called in cicada-nymph code
<span class="org-level-2">** help</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">poi,help</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>

     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** add</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">poi,add</span>
     <span class="cicada-nymph-comment">&lt;&lt; name[address, length], relative-path[address, length] -- &gt;&gt;</span>

     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** sub</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">poi,sub</span>
     <span class="cicada-nymph-comment">&lt;&lt; name[address, length] -- &gt;&gt;</span>

     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** up</span>
   * up denotes update
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">poi,up</span>
     <span class="cicada-nymph-comment">&lt;&lt; name[address, length], relative-path[address, length] -- &gt;&gt;</span>

     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** list</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">poi,list</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>

     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** show</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">poi,show</span>
     <span class="cicada-nymph-comment">&lt;&lt; name[address, length] -- &gt;&gt;</span>

     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* load-file</span>
<span class="org-level-2">** </span><span class="org-todo">&gt;&lt;</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">load-file</span>
     <span class="cicada-nymph-comment">&lt;&lt; ??? -- &gt;&gt;</span>

     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* -----------------------------------</span>
<span class="org-level-1">* name-hash-table</span>
<span class="org-level-2">** </span><span class="org-todo">note</span><span class="org-level-2"> naming &amp; factoring</span>
   * open addressing
     for we do not need to delete
   * math
     * hash
     * probe
   * memory
     * insert
     * search
   * function
     * map
     * reverse
<span class="org-level-2">** memory allocation</span>
   * the following are some prime number
     ready to be used
     * 1000003   about 976 k
     * 1000033
     * 1000333
     * 100003    about 97 k
     * 100333
     * 997
     * 499
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-number">100333</span> drop
   <span class="cicada-nymph-number">13</span>
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*name-hash-table,size*</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>

   <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">4</span> mul
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*name-hash-table,unit*</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>

   <span class="cicada-nymph-variable">*name-hash-table,size*</span>
   <span class="cicada-nymph-variable">*name-hash-table,unit*</span> mul
   <span class="cicada-nymph-allocate">allocate-memory</span>
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*name-hash-table*</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>

   <span class="cicada-nymph-number">0</span>
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*name-hash-table,counter*</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** hash</span>
   * prime table size
   * linear probing
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-hash-table,hash</span>
     <span class="cicada-nymph-comment">&lt;&lt; number, counter -- index &gt;&gt;</span>
     add <span class="cicada-nymph-variable">*name-hash-table,size*</span> mod
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** string-&gt;finite-carry-sum</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-number">16</span>
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*max-carry-position*</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">string-&gt;finite-carry-sum,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; carry-sum, string[address, length], counter -- carry-sum &gt;&gt;</span>
     over zero? <span class="cicada-nymph-syntax-key-word">if</span>
       drop drop2
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-variable">*max-carry-position*</span> greater-than? <span class="cicada-nymph-syntax-key-word">if</span>
       drop <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-comment">&lt;&lt; re-start from 0 &gt;&gt;</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     xx|over|x
     string-head,char over
     <span class="cicada-nymph-number">2</span> swap power
     mul
     x|swap|xxxx add xxx|swap|x
     add1 xx|swap|x
     string-tail,char x|swap|xx
     <span class="cicada-nymph-end">&lt;&gt;</span> string-&gt;finite-carry-sum,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">string-&gt;finite-carry-sum</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- carry-sum &gt;&gt;</span>
     <span class="cicada-nymph-number">0</span> xx|swap|x <span class="cicada-nymph-comment">&lt;&lt; carry-sum &gt;&gt;</span>
     <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-comment">&lt;&lt; counter &gt;&gt;</span>
     string-&gt;finite-carry-sum,loop
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** name</span>
<span class="org-level-3">*** </span><span class="org-todo">note</span>
    * a name is an index into name-hash-table
    * an entry can be viewed
      1. as a point
      2. as an orbit
    * in a name entry we have the following fields
      <span class="org-table">|-------------------------------+-------------------------|</span>
      <span class="org-table">|                               | note                    |</span>
      <span class="org-table">|-------------------------------+-------------------------|</span>
      <span class="org-table">| primitive-string              | 0 denotes               |</span>
      <span class="org-table">| [address]                     | name not used           |</span>
      <span class="org-table">|-------------------------------+-------------------------|</span>
      <span class="org-table">| title                         | 0 denotes               |</span>
      <span class="org-table">| [index into name-title-table] | name not used as title  |</span>
      <span class="org-table">|-------------------------------+-------------------------|</span>
      <span class="org-table">| orbit-length                  | as an orbit             |</span>
      <span class="org-table">| [number]                      | its length gets updated |</span>
      <span class="org-table">|-------------------------------+-------------------------|</span>
      <span class="org-table">| orbiton                       | as a point              |</span>
      <span class="org-table">| [address]                     | it is on an orbit       |</span>
      <span class="org-table">|-------------------------------+-------------------------|</span>
<span class="org-level-3">*** name-&gt;address</span>
<span class="org-block-begin-line">    #+begin_src cicada-nymph :tangle core.cn
</span>    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-&gt;address</span>
      <span class="cicada-nymph-comment">&lt;&lt; name -- address &gt;&gt;</span>
      <span class="cicada-nymph-variable">*name-hash-table,unit*</span> mul
      <span class="cicada-nymph-variable">*name-hash-table*</span> add
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">    #+end_src
</span><span class="org-level-3">*** name,used?</span>
<span class="org-block-begin-line">    #+begin_src cicada-nymph :tangle core.cn
</span>    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,used?</span>
      <span class="cicada-nymph-comment">&lt;&lt; name -- bool &gt;&gt;</span>
      name-&gt;address
      fetch zero? false?
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">    #+end_src
</span><span class="org-level-3">*** name,used-as-title?</span>
<span class="org-block-begin-line">    #+begin_src cicada-nymph :tangle core.cn
</span>    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,used-as-title?</span>
      <span class="cicada-nymph-comment">&lt;&lt; name -- bool &gt;&gt;</span>
      name-&gt;address
      <span class="cicada-nymph-variable">*jo-size*</span> add
      fetch zero?
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">    #+end_src
</span><span class="org-level-3">*** name,fetch-string</span>
<span class="org-block-begin-line">    #+begin_src cicada-nymph :tangle core.cn
</span>    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,fetch-string</span>
      <span class="cicada-nymph-comment">&lt;&lt; name -- string[address, length] &gt;&gt;</span>
      name-&gt;address
      fetch
      address-&gt;primitive-string
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">    #+end_src
</span><span class="org-level-3">*** name,fetch-title-index sadsfiljdasd</span>
<span class="org-block-begin-line">    #+begin_src cicada-nymph :tangle core.cn
</span>    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,fetch-title-index</span>
      <span class="cicada-nymph-comment">&lt;&lt; name -- index &gt;&gt;</span>
      name-&gt;address
      <span class="cicada-nymph-variable">*jo-size*</span> add
      fetch
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">    #+end_src
</span><span class="org-level-3">*** name,fetch-orbit-length</span>
<span class="org-block-begin-line">    #+begin_src cicada-nymph :tangle core.cn
</span>    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,fetch-orbit-length</span>
      <span class="cicada-nymph-comment">&lt;&lt; name -- length &gt;&gt;</span>
      name-&gt;address
      <span class="cicada-nymph-variable">*jo-size*</span> add
      <span class="cicada-nymph-variable">*jo-size*</span> add
      fetch
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">    #+end_src
</span><span class="org-level-3">*** name,fetch-orbiton</span>
<span class="org-block-begin-line">    #+begin_src cicada-nymph :tangle core.cn
</span>    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,fetch-orbiton</span>
      <span class="cicada-nymph-comment">&lt;&lt; name -- address &gt;&gt;</span>
      name-&gt;address
      <span class="cicada-nymph-variable">*jo-size*</span> add
      <span class="cicada-nymph-variable">*jo-size*</span> add
      <span class="cicada-nymph-variable">*jo-size*</span> add
      fetch
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">    #+end_src
</span><span class="org-level-3">*** name,save-string</span>
    * note that
      primitive-string-heap is used
<span class="org-block-begin-line">    #+begin_src cicada-nymph :tangle core.cn
</span>    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,save-string</span>
      <span class="cicada-nymph-comment">&lt;&lt; string[address, length], name -- &gt;&gt;</span>
      <span class="cicada-nymph-variable">*current-free-address,primitive-string-heap*</span>
      xx|swap|xx
      save-into,primitive-string-heap
      swap
      name-&gt;address
      save
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">    #+end_src
</span><span class="org-level-3">*** name,save-title-index</span>
<span class="org-block-begin-line">    #+begin_src cicada-nymph :tangle core.cn
</span>    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,save-title-index</span>
      <span class="cicada-nymph-comment">&lt;&lt; index, name -- &gt;&gt;</span>
      name-&gt;address
      <span class="cicada-nymph-variable">*jo-size*</span> add
      save
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">    #+end_src
</span><span class="org-level-3">*** name,save-orbit-length</span>
<span class="org-block-begin-line">    #+begin_src cicada-nymph :tangle core.cn
</span>    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,save-orbit-length</span>
      <span class="cicada-nymph-comment">&lt;&lt; index, name -- &gt;&gt;</span>
      name-&gt;address
      <span class="cicada-nymph-variable">*jo-size*</span> add
      <span class="cicada-nymph-variable">*jo-size*</span> add
      save
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">    #+end_src
</span><span class="org-level-3">*** name,save-orbiton</span>
<span class="org-block-begin-line">    #+begin_src cicada-nymph :tangle core.cn
</span>    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,save-orbiton</span>
      <span class="cicada-nymph-comment">&lt;&lt; index, name -- &gt;&gt;</span>
      name-&gt;address
      <span class="cicada-nymph-variable">*jo-size*</span> add
      <span class="cicada-nymph-variable">*jo-size*</span> add
      <span class="cicada-nymph-variable">*jo-size*</span> add
      save
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">    #+end_src
</span><span class="org-level-3">*** name,no-collision?</span>
<span class="org-block-begin-line">    #+begin_src cicada-nymph :tangle core.cn
</span>    <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,no-collision?</span>
      <span class="cicada-nymph-comment">&lt;&lt; name -- bool &gt;&gt;</span>
      dup name,fetch-orbiton
      equal?
      <span class="cicada-nymph-end">end</span>
    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">    #+end_src
</span><span class="org-level-2">** search</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-hash-table,search,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length], number, counter
        -- name, true
        -- name, false &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:counter</span> <span class="cicada-nymph-save-local-variable-1">&gt;:number</span> <span class="cicada-nymph-save-local-variable-2">&gt;::string</span>
     <span class="cicada-nymph-fetch-local-variable-1">:number</span> <span class="cicada-nymph-fetch-local-variable-1">:counter</span> name-hash-table,hash
     <span class="cicada-nymph-save-local-variable-1">&gt;:name</span>
     <span class="cicada-nymph-fetch-local-variable-1">:number</span> <span class="cicada-nymph-number">0</span> name-hash-table,hash
     <span class="cicada-nymph-save-local-variable-1">&gt;:orbit</span>
     <span class="cicada-nymph-fetch-local-variable-1">:name</span> name,used? false? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-fetch-local-variable-1">:name</span> <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-1">:name</span> name,fetch-string
     <span class="cicada-nymph-fetch-local-variable-2">::string</span> string-equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-fetch-local-variable-1">:name</span> <span class="cicada-nymph-bool">true</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-1">:name</span> name,fetch-orbit-length
     <span class="cicada-nymph-fetch-local-variable-1">:counter</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-fetch-local-variable-1">:name</span> <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-2">::string</span>
     <span class="cicada-nymph-fetch-local-variable-1">:number</span> <span class="cicada-nymph-fetch-local-variable-1">:counter</span> add1
     <span class="cicada-nymph-end">&lt;&gt;</span> name-hash-table,search,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-hash-table,search</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length]
        -- name, true
        -- false &gt;&gt;</span>
     dup2 string-&gt;finite-carry-sum
     <span class="cicada-nymph-number">0</span> name-hash-table,search,loop
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** insert</span>
   * I found that (insert) can not re-use (search)
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-hash-table,insert,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length], number, counter
        -- name, true
        -- name, false &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:counter</span> <span class="cicada-nymph-save-local-variable-1">&gt;:number</span> <span class="cicada-nymph-save-local-variable-2">&gt;::string</span>
     <span class="cicada-nymph-fetch-local-variable-1">:number</span> <span class="cicada-nymph-fetch-local-variable-1">:counter</span> name-hash-table,hash
     <span class="cicada-nymph-save-local-variable-1">&gt;:name</span>
     <span class="cicada-nymph-fetch-local-variable-1">:number</span> <span class="cicada-nymph-number">0</span> name-hash-table,hash
     <span class="cicada-nymph-save-local-variable-1">&gt;:orbit</span>
     <span class="cicada-nymph-fetch-local-variable-1">:name</span> name,used? false? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-fetch-local-variable-2">::string</span> <span class="cicada-nymph-fetch-local-variable-1">:name</span>
       name,save-string
       <span class="cicada-nymph-fetch-local-variable-1">:orbit</span> <span class="cicada-nymph-fetch-local-variable-1">:name</span>
       name,save-orbiton
       <span class="cicada-nymph-fetch-local-variable-1">:counter</span> <span class="cicada-nymph-fetch-local-variable-1">:orbit</span>
       name,save-orbit-length
       <span class="cicada-nymph-number">1</span> <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*name-hash-table,counter*</span> add-save
       <span class="cicada-nymph-fetch-local-variable-1">:name</span> <span class="cicada-nymph-bool">true</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-1">:name</span> name,fetch-string
     <span class="cicada-nymph-fetch-local-variable-2">::string</span> string-equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-fetch-local-variable-1">:name</span> <span class="cicada-nymph-bool">true</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-1">:counter</span> <span class="cicada-nymph-variable">*name-hash-table,size*</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-fetch-local-variable-1">:name</span> <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-2">::string</span>
     <span class="cicada-nymph-fetch-local-variable-1">:number</span> <span class="cicada-nymph-fetch-local-variable-1">:counter</span> add1
     <span class="cicada-nymph-end">&lt;&gt;</span> name-hash-table,insert,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-hash-table,insert</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length]
        -- name, true
        -- name, false &gt;&gt;</span>
     dup2 string-&gt;finite-carry-sum
     <span class="cicada-nymph-number">0</span> name-hash-table,insert,loop
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** string-&gt;name &amp; name-&gt;string</span>
   * error handling here
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">string-&gt;name</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- name &gt;&gt;</span>
     name-hash-table,insert
     false? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-string">"* (string-&gt;name) *name-hash-table* is full!"</span> .s
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-&gt;string</span>
     <span class="cicada-nymph-comment">&lt;&lt; name -- string[address, length]] &gt;&gt;</span>
     name,fetch-string
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
   * set <span class="bold">*name-hash-table,size*</span> to a small number [for example 13]
     then use the following function
     and (name-hash-table,report) to do test
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-hash-table,test</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"a-000"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"a-111"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"a-222"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"a-333"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"a-444"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"a-555"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"a-666"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"a-777"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"a-888"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"a-999"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"b-000"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"b-111"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"b-222"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"b-333"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"b-444"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"b-555"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"b-666"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"b-777"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"b-888"</span> string-&gt;name . cr
     <span class="cicada-nymph-string">"b-999"</span> string-&gt;name . cr
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-todo">note</span><span class="org-level-2"> about report</span>
   * report point orbit by orbit
     in the following format
   * {index} string # orbit-lenght
     * {index} string
     * {index} string
     * {index} string
   * if used as title
     add a (AS TITLE) as postfix
<span class="org-level-2">** report</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-hash-table,report,orbit</span>
     <span class="cicada-nymph-comment">&lt;&lt; name, counter -- &gt;&gt;</span>
     over name,fetch-orbit-length
     over less-than? <span class="cicada-nymph-syntax-key-word">if</span>
       drop2
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     over name,fetch-string string-&gt;finite-carry-sum
     over name-hash-table,hash
     dup name,fetch-orbiton
     <span class="cicada-nymph-comment">&lt;&lt; name, counter, new-name, orbiton &gt;&gt;</span>
     x|over|xxx name,fetch-string string-&gt;finite-carry-sum
     <span class="cicada-nymph-number">0</span> name-hash-table,hash
     equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-string">"  {"</span> write-string
       dup write-nature-number
       <span class="cicada-nymph-string">"} "</span> write-string
       name,fetch-string write-string
       cr
     <span class="cicada-nymph-syntax-key-word">else</span>
       drop
     <span class="cicada-nymph-syntax-key-word">then</span>
     add1 <span class="cicada-nymph-end">&lt;&gt;</span> name-hash-table,report,orbit
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-hash-table,report,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; name -- &gt;&gt;</span>
     dup <span class="cicada-nymph-variable">*name-hash-table,size*</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
       drop
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     dup name,used? <span class="cicada-nymph-syntax-key-word">if</span>
     dup name,no-collision? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-comment">&lt;&lt; * {index} string # orbit-lenght &gt;&gt;</span>
       <span class="cicada-nymph-string">"* {"</span> write-string
       dup write-nature-number
       <span class="cicada-nymph-string">"} "</span> write-string
       dup name,fetch-string write-string
       <span class="cicada-nymph-string">" # "</span> write-string
       dup name,fetch-orbit-length
       write-nature-number
       cr
       dup <span class="cicada-nymph-number">1</span> name-hash-table,report,orbit
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     add1 <span class="cicada-nymph-end">&lt;&gt;</span> name-hash-table,report,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-hash-table,report</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-number">0</span> name-hash-table,report,loop
     <span class="cicada-nymph-string">"* totally : "</span> write-string
     <span class="cicada-nymph-variable">*name-hash-table,counter*</span> write-nature-number
     cr
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* -----------------------------------</span>
<span class="org-level-1">* command-line-interface</span>
<span class="org-level-2">** </span><span class="org-todo">note</span>
<span class="org-level-2">** command-line,unknow-function</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">command-line,unknow-function</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"* (cicada-nymph) unknow command-line-function : "</span> write-string
     get-command-line
     string-tail,word
     string-head,word .s
     <span class="cicada-nymph-string">"* good bye ^-^/"</span> .s
     bye
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** command-line,stack-REPL</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">command-line,stack-REPL</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     welcome
     report-loaded-core-file
     initial-report
     hi
     <span class="cicada-nymph-string">"* you are in the (stack-REPL)"</span> .s
     <span class="cicada-nymph-string">"  every time after a word is executed"</span> .s
     <span class="cicada-nymph-string">"  the argument-stack get printed"</span> .s
     print-argument-stack,pretty
     <span class="cicada-nymph-syntax-key-word">jo</span> stack-REPL
     reset-top-level-REPL
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** command-line,basic-REPL</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">command-line,basic-REPL</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     welcome
     report-loaded-core-file
     initial-report
     hi
     <span class="cicada-nymph-string">"* you are in the (basic-REPL)"</span> .s
     <span class="cicada-nymph-string">"  this REPL does not print any thing automaticly"</span> .s
     <span class="cicada-nymph-syntax-key-word">jo</span> basic-REPL
     reset-top-level-REPL
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** command-line,poi</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">command-line,poi</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"* poi byebye"</span> .s
     bye
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** command-line,no-function</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">command-line,no-function</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-end">&lt;&gt;</span> command-line,stack-REPL
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** command-line-dispatcher</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">command-line-dispatcher</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     get-command-line
     string-tail,word
     dup2 space-string? <span class="cicada-nymph-syntax-key-word">if</span>
       drop2
       <span class="cicada-nymph-end">&lt;&gt;</span> command-line,no-function
     <span class="cicada-nymph-syntax-key-word">then</span>
     string-head,word
     <span class="cicada-nymph-save-local-variable-2">&gt;::1st-word</span>
     <span class="cicada-nymph-fetch-local-variable-2">::1st-word</span> <span class="cicada-nymph-string">"basic-REPL"</span> string-equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-end">&lt;&gt;</span> command-line,basic-REPL
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-2">::1st-word</span> <span class="cicada-nymph-string">"stack-REPL"</span> string-equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-end">&lt;&gt;</span> command-line,stack-REPL
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-2">::1st-word</span> <span class="cicada-nymph-string">"poi"</span> string-equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-end">&lt;&gt;</span> command-line,poi
     <span class="cicada-nymph-syntax-key-word">then</span>
       <span class="cicada-nymph-end">&lt;&gt;</span> command-line,unknow-function
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* </span><span class="org-level-1"><span class="bold">*the-story-begin*</span></span>
<span class="org-block-begin-line">  #+begin_src cicada-nymph :tangle core.cn
</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">the-story-begin</span>
    <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
    <span class="cicada-nymph-end">&lt;&gt;</span> command-line-dispatcher
  <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

  the-story-begin
<span class="org-block-end-line">  #+end_src
</span><span class="org-level-1">* ===================================</span>
<span class="org-level-1">* </span><span class="org-done">test</span>
<span class="org-block-begin-line">  #+begin_src cicada-nymph
</span>  name-hash-table,test
  name-hash-table,report

  report-memory
  report-dictionary
<span class="org-block-end-line">  #+end_src
</span><span class="org-level-1">* ===================================</span>
</pre>
  </body>
</html>
