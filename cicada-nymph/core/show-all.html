---
---
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN">
<html>
  <head>
    <title>core.org</title>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <style type="text/css">
    <!--
      body {
        color: #f8f8f0;
        background-color: #1b1d1e;
      }
      .bold {
        /* bold */
        font-weight: bold;
      }
      .cicada-nymph-allocate {
        /* cicada-nymph-allocate-face */
        color: #AE7C3B;
        font-weight: bold;
      }
      .cicada-nymph-bool {
        /* cicada-nymph-bool-face */
        color: #fd971f;
        font-weight: bold;
      }
      .cicada-nymph-comment {
        /* cicada-nymph-comment-face */
        color: #FF8888;
      }
      .cicada-nymph-constant {
        /* cicada-nymph-constant-face */
        color: #fd971f;
        font-weight: bold;
      }
      .cicada-nymph-end {
        /* cicada-nymph-end-face */
        color: #00ffff;
        font-weight: bold;
      }
      .cicada-nymph-exception {
        /* cicada-nymph-exception-face */
        color: #00ffff;
        font-weight: bold;
      }
      .cicada-nymph-fetch-local-variable-1 {
        /* cicada-nymph-fetch-local-variable-1-face */
        color: #83EA83;
        font-weight: bold;
      }
      .cicada-nymph-fetch-local-variable-2 {
        /* cicada-nymph-fetch-local-variable-2-face */
        color: #5CDD5C;
        font-weight: bold;
      }
      .cicada-nymph-lexicographer {
        /* cicada-nymph-lexicographer-face */
        color: #ae81ff;
        font-weight: bold;
      }
      .cicada-nymph-number {
        /* cicada-nymph-number-face */
        color: #fd971f;
        font-weight: bold;
      }
      .cicada-nymph-number-light {
        /* cicada-nymph-number-light-face */
        color: #ffff00;
      }
      .cicada-nymph-save-local-variable-1 {
        /* cicada-nymph-save-local-variable-1-face */
        color: #FF4C4C;
        font-weight: bold;
      }
      .cicada-nymph-save-local-variable-2 {
        /* cicada-nymph-save-local-variable-2-face */
        color: #dc322f;
        font-weight: bold;
      }
      .cicada-nymph-sentence-reader {
        /* cicada-nymph-sentence-reader-face */
        color: #ffff00;
        font-weight: bold;
      }
      .cicada-nymph-string {
        /* cicada-nymph-string-face */
        color: #e6db74;
      }
      .cicada-nymph-syntax-key-word {
        /* cicada-nymph-syntax-key-word-face */
        color: #f92672;
        font-weight: bold;
      }
      .cicada-nymph-title {
        /* cicada-nymph-title-face */
        color: #ffffff;
        font-weight: bold;
      }
      .cicada-nymph-variable {
        /* cicada-nymph-variable-face */
        color: #fd971f;
      }
      .cicada-nymph-wody {
        /* cicada-nymph-wody-face */
        color: #a6e22e;
        font-weight: bold;
      }
      .cicada-nymph-word-to-define {
        /* cicada-nymph-word-to-define-face */
        color: #ef5939;
        font-weight: bold;
      }
      .italic {
        /* italic */
        font-style: italic;
      }
      .org-block-begin-line {
        /* org-block-begin-line */
        color: #FF8888;
      }
      .org-block-end-line {
        /* org-block-end-line */
        color: #FF8888;
      }
      .org-document-info {
        /* org-document-info */
        color: #afeeee;
      }
      .org-document-info-keyword {
        /* org-document-info-keyword */
        color: #b3b3b3;
      }
      .org-document-title {
        /* org-document-title */
        color: #afeeee;
        font-weight: bold;
      }
      .org-done {
        /* org-done */
        color: #98fb98;
        font-weight: bold;
      }
      .org-level-1 {
        /* org-level-1 */
        color: #a6e22e;
      }
      .org-level-2 {
        /* org-level-2 */
        color: #fd971f;
      }
      .org-table {
        /* org-table */
        color: #87cefa;
      }
      .org-tag {
        /* org-tag */
        font-weight: bold;
      }
      .org-todo {
        /* org-todo */
        color: #ffc0cb;
        font-weight: bold;
      }

      a {
        color: inherit;
        background-color: inherit;
        font: inherit;
        text-decoration: inherit;
      }
      a:hover {
        text-decoration: underline;
      }
    -->
    </style>
{% include in-org-head.html %}
  </head>
  <body>
    {% include before-pre.html %}
<pre>
<span class="org-document-info-keyword">#+TITLE:</span>  <span class="org-document-title">&#23567;&#34796;&#35486;&#26680; / core of cicada-nymph
</span><span class="org-document-info-keyword">#+AUTHOR:</span> <span class="org-document-info">&#35613;&#23431;&#24646; / XIE Yuheng
</span><span class="org-document-info-keyword">#+EMAIL:</span>  <span class="org-document-info">xyheme@gmail.com
</span>
<span class="org-level-1">* </span><span class="org-done">todo</span>
<span class="org-level-2">** &#22312; primitive-string-area &#20013;&#20989;&#25976;&#30340;&#22995;&#21517;&#22312;&#34987;&#21152;&#36617;&#21040; name-hash-table &#26178; &#34987;&#37325;&#26032;&#35079;&#35069;&#20102;&#19968;&#36941;</span>
<span class="org-level-2">** &#26681;&#30446;&#37636;&#26377;&#38364;&#30340;&#20989;&#25976; &#25033;&#35442;&#24573;&#30053; linux &#20013;&#30340; "." &#21644; ".."</span>
<span class="org-level-2">** &#25105;&#26377;&#40670;&#19981;&#28415;&#24847; address &#20570;&#29234;&#32102;&#35722;&#20803;&#36070;&#20540;&#30340;&#35486;&#27861;</span>
   * &#20063;&#35377;&#25033;&#35442;&#25563;&#19968;&#20491;&#35422;
     &#22240;&#29234; address &#36889;&#20491;&#35422; &#23565;&#26044; variable-jo &#32780;&#35328; &#22826;&#19968;&#33324;&#20102;
   * &#20063;&#35377;&#25972;&#20491; &#20840;&#23616; variable &#30340;&#27231;&#21046;&#37117;&#25033;&#35442;&#25913;&#35722;
     &#27604;&#22914;&#20801;&#35377; variable &#20013;&#23384;&#20786; string
<span class="org-level-2">** what happens when executing (end) in REPL ? </span><span class="org-level-2"><span class="org-tag">:question:</span></span>
<span class="org-level-2">** only one error-code-&gt;string is not enough</span>
<span class="org-level-2">** &#20998;&#26512;&#23616;&#37096;&#35722;&#20803;&#30340;&#33391;&#22909;&#24615;               </span><span class="org-level-2"><span class="org-tag">:question:</span></span>
   * &#23565; &#21253;&#21547; &gt;:name &#30340;&#20989;&#25976;&#39636;&#30340;&#32020;&#32218;&#24615;&#34389;&#29702;
     &#30070;&#36935;&#21040; if &#25152;&#24418;&#25104;&#30340;&#20998;&#25903;&#30340;&#26178;&#20505;
     &#26371;&#19981;&#26371;&#26377;&#21839;&#38988; ???
<span class="org-level-2">** about load-file</span>
   * nested load-file
     a stack of allocate buffers in another local-byte
     the previous local-byte maybe should be called local-jo
   * load-file should maintain a list of loaded files
     what else meta data should be maintained ?
     can them make up a well module system ?
<span class="org-level-2">** &#26356;&#22909;&#30340;&#37679;&#35492;&#34389;&#29702;&#27231;&#21046;</span>
   1. &#30070;&#19968;&#20491; exception &#25214;&#19981;&#21040;&#33258;&#24049;&#22312; return-stack &#20013;&#30340;&#36864;&#20986;&#40670;&#26178;
      &#25033;&#35442;&#26377;&#26356;&#22909;&#22320;&#34389;&#29702;&#26041;&#24335; &#32780;&#19981;&#26159;&#19981;&#34389;&#29702;&#36889;&#31278;&#24773;&#27841;
   2. &#30446;&#21069;
      &#30070;&#19968;&#20491; exception &#34987;&#22519;&#34892;&#30340;&#26178;&#20505;
      &#35519;&#29992;&#36889;&#20491; exception &#30340;&#20989;&#25976;&#26159;&#27794;&#27861;&#20659;&#36958;&#21443;&#25976;&#32102;&#36889;&#20491; exception &#30340;
      [&#38500;&#38750;&#29234;&#36889;&#20491; exception &#20013;&#35373;&#32622;&#20840;&#23616;&#35722;&#37327;]
      &#20854;&#21407;&#22240;&#22312;&#26044;
      &#30070; exception &#34987;&#22519;&#34892;&#30340;&#26178;&#20505; &#21443;&#25976;&#26855;&#24050;&#32147;&#34987;&#37325;&#32622;&#20102;
      &#25152;&#20197;&#20854;&#23526;&#35299;&#27861;&#24456;&#31777;&#21934;
      &#21482;&#35201;&#25552;&#20379;&#19968;&#20491;&#20989;&#25976;&#32102; exception
      &#35731;&#27599;&#20491; exception &#29992;&#36889;&#20491;&#20989;&#25976;&#20358;&#20197;&#26126;&#39023;&#30340;&#26041;&#24335;&#37325;&#32622;&#21443;&#25976;&#26855;&#23601;&#34892;&#20102;
      &#36889;&#27171;&#30070;&#19968;&#20491; exception &#34987;&#22519;&#34892;&#30340;&#26178;&#20505;
      &#23427;&#21487;&#20197;
      1. &#20808;&#20197;&#26410;&#34987;&#37325;&#32622;&#26178;&#30340;&#21443;&#25976;&#26855;&#20013;&#30340;&#20540;&#29234;&#21443;&#25976;
         &#36889;&#20123;&#21443;&#25976;&#21487;&#20197;&#26159;&#35519;&#29992;&#36889;&#20491; exception &#30340;&#20989;&#20659;&#36958;&#32102; exception &#30340;
      2. &#20043;&#24460;&#20877;&#20197;&#37325;&#32622;&#20043;&#24460;&#30340;&#21443;&#25976;&#26855;&#20013;&#30340;&#20540;&#29234;&#21443;&#25976;
         &#36889;&#20123;&#21443;&#25976;&#26159;&#31561;&#24453; exception &#30340;&#20989;&#29234; exception &#25152;&#28310;&#20633;&#30340;
<span class="org-level-2">** little-tester                      </span><span class="org-level-2"><span class="org-tag">:needed:</span></span>
<span class="org-level-2">** home-path &amp; search-path to load files</span>
   * poi denotes path-organizer
   * &#23526;&#29694; &#26781;&#20214;&#24615;&#30340;&#34987;&#35299;&#37323;&#30340;&#20195;&#30908;
     &#36889;&#27171;&#23601;&#33021;&#23526;&#29694;
     1. little-tester
     2. &#22312;&#19981;&#21516;&#30340;&#24179;&#33274;&#19979;&#22519;&#34892;&#19981;&#21516;&#30340;&#20195;&#30908;
<span class="org-level-2">** debug-REPL</span>
<span class="org-level-2">** language-level support for creating and managing processes</span>
<span class="org-level-2">** more design about the command-line-interface</span>
<span class="org-level-2">** title-name-table</span>
<span class="org-level-2">** data-giver</span>
<span class="org-level-2">** big number and &#21516;&#39192;&#26041;&#31243;</span>
   * &#29234;&#20102;&#29609; hash-table
<span class="org-level-1">* ===================================</span>
<span class="org-level-1">* </span><span class="org-todo">note</span>
<span class="org-level-2">** notation</span>
   * use ","
<span class="org-level-2">** data section in cicada-nymph</span>
<span class="org-level-1">* ===================================</span>
<span class="org-level-1">* writers</span>
<span class="org-level-2">** </span><span class="org-todo">note</span><span class="org-level-2"> name of writers</span>
   * the use of "." as prefix
     is inherited from Forth
   * table
     <span class="org-table">| .  | pretty_write_integer | assembly |</span>
     <span class="org-table">| .i | write_integer        | core     |</span>
     <span class="org-table">| .s | write_string         | assembly |</span>
     <span class="org-table">| .l | linefeed             | core     |</span>
<span class="org-level-2">** .l .i</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">.l</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-number">10</span> write-byte
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">.i</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     write-integer
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* -----------------------------------</span>
<span class="org-level-1">* </span><span class="org-level-1"><span class="bold">*rule-set,make-jojo*</span></span><span class="org-level-1"> : if &amp; else &amp; then</span>
<span class="org-level-2">** </span><span class="org-todo">&#35352;</span><span class="org-level-2"> &#26781;&#20214;&#36681;&#36339;</span>
   * one predicate can make two branchs
     three predicates can make four branchs
     three predicates may only make three branchs
     but indeed there must be an invisible branch
<span class="org-level-2">** word:[if|else|then]?</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">word:if?</span>
     <span class="cicada-nymph-comment">&lt;&lt; word[address, length] -- bool &gt;&gt;</span>
     <span class="cicada-nymph-string">"if"</span> string-equal?
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">word:else?</span>
     <span class="cicada-nymph-comment">&lt;&lt; word[address, length] -- bool &gt;&gt;</span>
     <span class="cicada-nymph-string">"else"</span> string-equal?
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">word:then?</span>
     <span class="cicada-nymph-comment">&lt;&lt; word[address, length] -- bool &gt;&gt;</span>
     <span class="cicada-nymph-string">"then"</span> string-equal?
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** syntax,[if|else|then],make-jojo</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">syntax,if,make-jojo</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length], word:if --
        address, string[address, length] &gt;&gt;</span>
     drop2
     <span class="cicada-nymph-variable">*false?branch*</span> <span class="cicada-nymph-title">save-into</span>,jo-area
     <span class="cicada-nymph-variable">*current-free-address,jo-area*</span> xx|swap|x
     <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-title">save-into</span>,jo-area
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">syntax,else,make-jojo</span>
     <span class="cicada-nymph-comment">&lt;&lt; address, string[address, length], word:else --
        address, string[address, length] &gt;&gt;</span>
     drop2
     <span class="cicada-nymph-variable">*branch*</span> <span class="cicada-nymph-title">save-into</span>,jo-area
     x|swap|xx
     <span class="cicada-nymph-variable">*current-free-address,jo-area*</span> xxx|swap|x
     <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-title">save-into</span>,jo-area
     <span class="cicada-nymph-comment">&lt;&lt; address, string[address, length], address &gt;&gt;</span>
     <span class="cicada-nymph-variable">*current-free-address,jo-area*</span>
     over sub <span class="cicada-nymph-variable">*jo-size*</span> div
     swap save
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">syntax,then,make-jojo</span>
     <span class="cicada-nymph-comment">&lt;&lt; address, string[address, length], word:then --
        string[address, length] &gt;&gt;</span>
     drop2
     x|swap|xx
     <span class="cicada-nymph-variable">*current-free-address,jo-area*</span>
     over sub <span class="cicada-nymph-variable">*jo-size*</span> div
     swap save
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span><span class="org-level-2"> if &amp; else &amp; then</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">kkk</span>
     <span class="cicada-nymph-string">"kkk took my baby away !"</span> .s
     .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   kkk

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">factorial</span>
     <span class="cicada-nymph-comment">&lt;&lt; number -- number &gt;&gt;</span>
     dup
     one? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     dup sub1 factorial
     mul
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">factorial,test</span>
     .l
     <span class="cicada-nymph-number">1</span> factorial . .l
     <span class="cicada-nymph-number">2</span> factorial . .l
     <span class="cicada-nymph-number">3</span> factorial . .l
     <span class="cicada-nymph-number">4</span> factorial . .l
     <span class="cicada-nymph-number">5</span> factorial . .l
     <span class="cicada-nymph-number">6</span> factorial . .l
     <span class="cicada-nymph-number">7</span> factorial . .l
     <span class="cicada-nymph-number">8</span> factorial . .l
     <span class="cicada-nymph-number">9</span> factorial . .l
     <span class="cicada-nymph-number">10</span> factorial . .l
     <span class="cicada-nymph-number">11</span> factorial . .l
     <span class="cicada-nymph-number">12</span> factorial . .l
     <span class="cicada-nymph-number">13</span> factorial . .l
     <span class="cicada-nymph-number">14</span> factorial . .l
     <span class="cicada-nymph-number">15</span> factorial . .l
     <span class="cicada-nymph-number">16</span> factorial . .l
     <span class="cicada-nymph-number">17</span> factorial . .l
     <span class="cicada-nymph-number">18</span> factorial . .l
     <span class="cicada-nymph-number">19</span> factorial . .l
     <span class="cicada-nymph-number">20</span> factorial . .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">.12</span>
     <span class="cicada-nymph-comment">&lt;&lt; 1 2 -- &gt;&gt;</span>
     <span class="cicada-nymph-number">2</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-string">"(^-^)"</span> .s
       <span class="cicada-nymph-number">1</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
         <span class="cicada-nymph-string">"\^o^/"</span> .s
       <span class="cicada-nymph-syntax-key-word">else</span>
         <span class="cicada-nymph-string">"     "</span> .s
       <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-syntax-key-word">else</span>
       <span class="cicada-nymph-string">"     "</span> .s
       <span class="cicada-nymph-number">1</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
         <span class="cicada-nymph-string">"\^o^/"</span> .s
       <span class="cicada-nymph-syntax-key-word">else</span>
         <span class="cicada-nymph-string">"     "</span> .s
       <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">.12,test</span>
     .l
     <span class="cicada-nymph-number">1</span> <span class="cicada-nymph-number">2</span> .12 .l
     <span class="cicada-nymph-number">6</span> <span class="cicada-nymph-number">2</span> .12 .l
     <span class="cicada-nymph-number">1</span> <span class="cicada-nymph-number">6</span> .12 .l
     <span class="cicada-nymph-number">6</span> <span class="cicada-nymph-number">6</span> .12 .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>


   <span class="cicada-nymph-title">factorial</span>,test
   <span class="cicada-nymph-title">.12</span>,test
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** more,rule-set,make-jojo</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">more,rule-set,make-jojo</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-syntax-key-word">jo</span> word:if?   <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">syntax</span>,if,make-jojo    <span class="cicada-nymph-variable">*rule-set,make-jojo*</span> add-rule
     <span class="cicada-nymph-syntax-key-word">jo</span> word:else? <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">syntax</span>,else,make-jojo  <span class="cicada-nymph-variable">*rule-set,make-jojo*</span> add-rule
     <span class="cicada-nymph-syntax-key-word">jo</span> word:then? <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">syntax</span>,then,make-jojo  <span class="cicada-nymph-variable">*rule-set,make-jojo*</span> add-rule
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-title">more</span>,rule-set,make-jojo
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* </span><span class="org-level-1"><span class="bold">*rule-set,make-jojo*</span></span><span class="org-level-1"> : prepare-for</span>
<span class="org-level-2">** </span><span class="org-todo">&#35352;</span><span class="org-level-2"> &#30064;&#24120;&#34389;&#29702;</span>
   * &#22312;&#35486;&#35328;&#20013;&#35373;&#35336;&#33391;&#22909;&#30340;&#30064;&#24120;&#34389;&#29702;
     &#26159;&#40723;&#21237;&#31243;&#24207;&#21729;&#23531;&#20986;&#30382;&#23526;&#30340;&#31243;&#24207;&#30340;&#38364;&#37749;
   * &#30446;&#21069;&#30340;
     &#21033;&#29992; prepare-for &#20358;&#23526;&#29694;&#30340;&#30064;&#24120;&#34389;&#29702;&#27231;&#21046;
     &#21487;&#33021;&#36996;&#36960;&#36960;&#19981;&#22816;&#33391;&#22909;
<span class="org-level-2">** word:prepare-for?</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">word:prepare-for?</span>
     <span class="cicada-nymph-comment">&lt;&lt; word[address, length] -- bool &gt;&gt;</span>
     <span class="cicada-nymph-string">"prepare-for"</span> string-equal?
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** syntax,prepare-for,make-jojo</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">syntax,prepare-for,make-jojo</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length], word:prepare-for --
        string[address, length] &gt;&gt;</span>
     drop2
     <span class="cicada-nymph-variable">*prepare-for*</span>    <span class="cicada-nymph-title">save-into</span>,jo-area
     <span class="cicada-nymph-variable">*exception-head*</span> <span class="cicada-nymph-title">save-into</span>,jo-area
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** more,rule-set,make-jojo</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">more,rule-set,make-jojo</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-syntax-key-word">jo</span> word:prepare-for?
     <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">syntax</span>,prepare-for,make-jojo
     <span class="cicada-nymph-variable">*rule-set,make-jojo*</span> add-rule
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-title">more</span>,rule-set,make-jojo
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* -----------------------------------</span>
<span class="org-level-1">* allocate</span>
<span class="org-level-2">** </span><span class="org-todo">note</span>
   * an interface of <span class="bold">*un-initialized-memory*</span>
<span class="org-level-2">** clear-memory [not using]</span>
   * this kinds of functions
     must be implemented in assembly code
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">clear-memory</span>
     <span class="cicada-nymph-comment">&lt;&lt; size, address -- &gt;&gt;</span>
     over zero? <span class="cicada-nymph-syntax-key-word">if</span>
       drop2
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-number">0</span> over save
     add1 swap
     sub1 swap
     <span class="cicada-nymph-end">&lt;&gt;</span> clear-memory
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** allocate-memory</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">allocate-memory</span>
     <span class="cicada-nymph-comment">&lt;&lt; size -- address &gt;&gt;</span>
     dup <span class="cicada-nymph-variable">*current-free-address,un-initialized-memory*</span> clear-memory
     <span class="cicada-nymph-variable">*current-free-address,un-initialized-memory*</span> swap <span class="cicada-nymph-comment">&lt;&lt; address as return value &gt;&gt;</span>
     <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*current-free-address,un-initialized-memory*</span> add-save
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* </span><span class="org-level-1"><span class="bold">*name-hash-table*</span></span>
<span class="org-level-2">** </span><span class="org-todo">note</span>
   * the name-hash-table
     is used both in cicada-nymph and cicada-language
<span class="org-level-2">** memory allocation</span>
   * the following are some prime number
     ready to be used
     * 1000003   about 976 k
     * 1000033
     * 1000333
     * 100003    about 97 k
     * 100333
     * 997
     * 499
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-number">100333</span>
   <span class="cicada-nymph-comment">&lt;&lt; drop 13 &gt;&gt;</span>
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*name-hash-table,size*</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>

   <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">5</span> mul
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*name-hash-table,unit*</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>

   <span class="cicada-nymph-variable">*name-hash-table,size*</span>
   <span class="cicada-nymph-variable">*name-hash-table,unit*</span> mul
   <span class="cicada-nymph-allocate">allocate-memory</span>
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*name-hash-table*</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>

   <span class="cicada-nymph-number">0</span>
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*name-hash-table,counter*</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* name</span>
<span class="org-level-2">** </span><span class="org-todo">note</span>
   * a name is an index into name-hash-table
   * an entry can be viewed
     1. as a point
     2. as an orbit
   * in a name entry we have the following fields
     <span class="org-table">|-------------------------------+------------------------------|</span>
     <span class="org-table">|                               | note                         |</span>
     <span class="org-table">|-------------------------------+------------------------------|</span>
     <span class="org-table">| primitive-string              | 0 denotes                    |</span>
     <span class="org-table">| [address]                     | name not used                |</span>
     <span class="org-table">|-------------------------------+------------------------------|</span>
     <span class="org-table">| title                         | 0 denotes                    |</span>
     <span class="org-table">| [index into name-title-table] | name not used as title       |</span>
     <span class="org-table">|-------------------------------+------------------------------|</span>
     <span class="org-table">| orbit-length                  | as an orbit                  |</span>
     <span class="org-table">| [number]                      | its length gets updated      |</span>
     <span class="org-table">|-------------------------------+------------------------------|</span>
     <span class="org-table">| orbiton                       | as a point                   |</span>
     <span class="org-table">| [address]                     | it is on an orbit            |</span>
     <span class="org-table">|-------------------------------+------------------------------|</span>
     <span class="org-table">| jo                            | 0 denotes                    |</span>
     <span class="org-table">| [address]                     | name not used as jo in nymph |</span>
     <span class="org-table">|-------------------------------+------------------------------|</span>
<span class="org-level-2">** name-&gt;address</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-&gt;address</span>
     <span class="cicada-nymph-comment">&lt;&lt; name -- address &gt;&gt;</span>
     <span class="cicada-nymph-variable">*name-hash-table,unit*</span> mul
     <span class="cicada-nymph-variable">*name-hash-table*</span> add
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** name,used?</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,used?</span>
     <span class="cicada-nymph-comment">&lt;&lt; name -- bool &gt;&gt;</span>
     name-&gt;address
     fetch zero? false?
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** name,used-as-title?</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,used-as-title?</span>
     <span class="cicada-nymph-comment">&lt;&lt; name -- bool &gt;&gt;</span>
     name-&gt;address
     <span class="cicada-nymph-variable">*jo-size*</span> add
     fetch zero? not
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** name,used-as-nymph-jo?</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,used-as-nymph-jo?</span>
     <span class="cicada-nymph-comment">&lt;&lt; name -- bool &gt;&gt;</span>
     name-&gt;address
     <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">4</span> mul add
     fetch zero? not
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** name,fetch-string</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,fetch-string</span>
     <span class="cicada-nymph-comment">&lt;&lt; name -- string[address, length] &gt;&gt;</span>
     name-&gt;address
     fetch
     address-&gt;primitive-string
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** name,fetch-title-index</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,fetch-title-index</span>
     <span class="cicada-nymph-comment">&lt;&lt; name -- title-index &gt;&gt;</span>
     name-&gt;address
     <span class="cicada-nymph-variable">*jo-size*</span> add
     fetch
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** name,fetch-orbit-length</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,fetch-orbit-length</span>
     <span class="cicada-nymph-comment">&lt;&lt; name -- orbit-length &gt;&gt;</span>
     name-&gt;address
     <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">2</span> mul add
     fetch
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** name,fetch-orbiton</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,fetch-orbiton</span>
     <span class="cicada-nymph-comment">&lt;&lt; name -- orbiton &gt;&gt;</span>
     name-&gt;address
     <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">3</span> mul add
     fetch
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** name,fetch-nymph-jo</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,fetch-nymph-jo</span>
     <span class="cicada-nymph-comment">&lt;&lt; name -- nymph-jo &gt;&gt;</span>
     name-&gt;address
     <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">4</span> mul add
     fetch
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** name,save-string</span>
   * note that
     primitive-string-area is used
   * currently (name,save-string) is to
     copy string into primitive-string-area
     maybe a better interface should be designed for this
     for some strings are already staticly allocated
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,save-string</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length], name -- &gt;&gt;</span>
     <span class="cicada-nymph-variable">*current-free-address,primitive-string-area*</span>
     xx|swap|xx
     <span class="cicada-nymph-title">save-into</span>,primitive-string-area
     swap
     name-&gt;address
     save
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** name,save-title-index</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,save-title-index</span>
     <span class="cicada-nymph-comment">&lt;&lt; title-index, name -- &gt;&gt;</span>
     name-&gt;address
     <span class="cicada-nymph-variable">*jo-size*</span> add
     save
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** name,save-orbit-length</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,save-orbit-length</span>
     <span class="cicada-nymph-comment">&lt;&lt; orbit-length, name -- &gt;&gt;</span>
     name-&gt;address
     <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">2</span> mul add
     save
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** name,save-orbiton</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,save-orbiton</span>
     <span class="cicada-nymph-comment">&lt;&lt; orbiton, name -- &gt;&gt;</span>
     name-&gt;address
     <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">3</span> mul add
     save
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** name,save-nymph-jo</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,save-nymph-jo</span>
     <span class="cicada-nymph-comment">&lt;&lt; nymph-jo, name -- &gt;&gt;</span>
     name-&gt;address
     <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">4</span> mul add
     save
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** name,no-collision?</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name,no-collision?</span>
     <span class="cicada-nymph-comment">&lt;&lt; name -- bool &gt;&gt;</span>
     dup <span class="cicada-nymph-title">name</span>,fetch-orbiton
     equal?
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* name-hash-table</span>
<span class="org-level-2">** </span><span class="org-todo">note</span><span class="org-level-2"> interface</span>
   * open addressing
     for we do not need to delete
   * math
     * hash
   * memory
     * insert
     * search
   * function
     * string-&gt;name
     * name-&gt;string
<span class="org-level-2">** name-hash-table,hash</span>
   * prime table size
   * linear probing
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-hash-table,hash</span>
     <span class="cicada-nymph-comment">&lt;&lt; number, counter -- index &gt;&gt;</span>
     add <span class="cicada-nymph-variable">*name-hash-table,size*</span> mod
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** string-&gt;finite-carry-sum</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-number">16</span>
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*max-carry-position*</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">string-&gt;finite-carry-sum,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; carry-sum, string[address, length], counter -- carry-sum &gt;&gt;</span>
     over zero? <span class="cicada-nymph-syntax-key-word">if</span>
       drop drop2
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-variable">*max-carry-position*</span> greater-than? <span class="cicada-nymph-syntax-key-word">if</span>
       drop <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-comment">&lt;&lt; re-start from 0 &gt;&gt;</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     xx|over|x
     <span class="cicada-nymph-title">string-head</span>,char over
     <span class="cicada-nymph-number">2</span> swap power
     mul
     x|swap|xxxx add xxx|swap|x
     add1 xx|swap|x
     <span class="cicada-nymph-title">string-tail</span>,char x|swap|xx
     <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">string-&gt;finite-carry-sum</span>,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">string-&gt;finite-carry-sum</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- carry-sum &gt;&gt;</span>
     <span class="cicada-nymph-number">0</span> xx|swap|x <span class="cicada-nymph-comment">&lt;&lt; carry-sum &gt;&gt;</span>
     <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-comment">&lt;&lt; counter &gt;&gt;</span>
     <span class="cicada-nymph-title">string-&gt;finite-carry-sum</span>,loop
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** name-hash-table,search</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-hash-table,search,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length], number, counter
        -- name, true
        -- name, false &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:counter</span> <span class="cicada-nymph-save-local-variable-1">&gt;:number</span> <span class="cicada-nymph-save-local-variable-2">&gt;::string</span>
     <span class="cicada-nymph-fetch-local-variable-1">:number</span> <span class="cicada-nymph-fetch-local-variable-1">:counter</span> <span class="cicada-nymph-title">name-hash-table</span>,hash
     <span class="cicada-nymph-save-local-variable-1">&gt;:name</span>
     <span class="cicada-nymph-fetch-local-variable-1">:number</span> <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-title">name-hash-table</span>,hash
     <span class="cicada-nymph-save-local-variable-1">&gt;:orbit</span>
     <span class="cicada-nymph-fetch-local-variable-1">:name</span> <span class="cicada-nymph-title">name</span>,used? false? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-fetch-local-variable-1">:name</span> <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-1">:name</span> <span class="cicada-nymph-title">name</span>,fetch-string
     <span class="cicada-nymph-fetch-local-variable-2">::string</span> string-equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-fetch-local-variable-1">:name</span> <span class="cicada-nymph-bool">true</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-1">:name</span> <span class="cicada-nymph-title">name</span>,fetch-orbit-length
     <span class="cicada-nymph-fetch-local-variable-1">:counter</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-fetch-local-variable-1">:name</span> <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-2">::string</span>
     <span class="cicada-nymph-fetch-local-variable-1">:number</span> <span class="cicada-nymph-fetch-local-variable-1">:counter</span> add1
     <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">name-hash-table</span>,search,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-hash-table,search</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length]
        -- name, true
        -- name, false &gt;&gt;</span>
     dup2 string-&gt;finite-carry-sum
     <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-title">name-hash-table</span>,search,loop
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** name-hash-table,insert</span>
   * I found that (insert) can not re-use (search)
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-hash-table,insert,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length], number, counter
        -- name, true
        -- name, false &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:counter</span> <span class="cicada-nymph-save-local-variable-1">&gt;:number</span> <span class="cicada-nymph-save-local-variable-2">&gt;::string</span>
     <span class="cicada-nymph-fetch-local-variable-1">:number</span> <span class="cicada-nymph-fetch-local-variable-1">:counter</span> <span class="cicada-nymph-title">name-hash-table</span>,hash
     <span class="cicada-nymph-save-local-variable-1">&gt;:name</span>
     <span class="cicada-nymph-fetch-local-variable-1">:number</span> <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-title">name-hash-table</span>,hash
     <span class="cicada-nymph-save-local-variable-1">&gt;:orbit</span>
     <span class="cicada-nymph-fetch-local-variable-1">:name</span> <span class="cicada-nymph-title">name</span>,used? false? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-fetch-local-variable-2">::string</span> <span class="cicada-nymph-fetch-local-variable-1">:name</span>
       <span class="cicada-nymph-title">name</span>,save-string
       <span class="cicada-nymph-fetch-local-variable-1">:orbit</span> <span class="cicada-nymph-fetch-local-variable-1">:name</span>
       <span class="cicada-nymph-title">name</span>,save-orbiton
       <span class="cicada-nymph-fetch-local-variable-1">:counter</span> <span class="cicada-nymph-fetch-local-variable-1">:orbit</span>
       <span class="cicada-nymph-title">name</span>,save-orbit-length
       <span class="cicada-nymph-number">1</span> <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*name-hash-table,counter*</span> add-save
       <span class="cicada-nymph-fetch-local-variable-1">:name</span> <span class="cicada-nymph-bool">true</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-1">:name</span> <span class="cicada-nymph-title">name</span>,fetch-string
     <span class="cicada-nymph-fetch-local-variable-2">::string</span> string-equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-fetch-local-variable-1">:name</span> <span class="cicada-nymph-bool">true</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-1">:counter</span> <span class="cicada-nymph-variable">*name-hash-table,size*</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-fetch-local-variable-1">:name</span> <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-2">::string</span>
     <span class="cicada-nymph-fetch-local-variable-1">:number</span> <span class="cicada-nymph-fetch-local-variable-1">:counter</span> add1
     <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">name-hash-table</span>,insert,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-hash-table,insert</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length]
        -- name, true
        -- name, false &gt;&gt;</span>
     dup2 string-&gt;finite-carry-sum
     <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-title">name-hash-table</span>,insert,loop
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** string-&gt;name &amp; name-&gt;string</span>
   * error handling here
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">string-&gt;name</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- name &gt;&gt;</span>
     <span class="cicada-nymph-title">name-hash-table</span>,insert
     false? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-string">"* (string-&gt;name) *name-hash-table* is full!"</span> .s .l
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-&gt;string</span>
     <span class="cicada-nymph-comment">&lt;&lt; name -- string[address, length]] &gt;&gt;</span>
     <span class="cicada-nymph-title">name</span>,fetch-string
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-todo">note</span><span class="org-level-2"> about report</span>
   * report point orbit by orbit
     in the following format
   * {index} string # orbit-lenght
     * {index} string
     * {index} string
     * {index} string
   * if used as title
     add a (AS TITLE) as postfix
<span class="org-level-2">** name-hash-table,report</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-hash-table,report,orbit</span>
     <span class="cicada-nymph-comment">&lt;&lt; name, counter -- &gt;&gt;</span>
     over <span class="cicada-nymph-title">name</span>,fetch-orbit-length
     over less-than? <span class="cicada-nymph-syntax-key-word">if</span>
       drop2
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     over <span class="cicada-nymph-title">name</span>,fetch-string string-&gt;finite-carry-sum
     over <span class="cicada-nymph-title">name-hash-table</span>,hash
     dup <span class="cicada-nymph-title">name</span>,fetch-orbiton
     <span class="cicada-nymph-comment">&lt;&lt; name, counter, new-name, orbiton &gt;&gt;</span>
     x|over|xxx <span class="cicada-nymph-title">name</span>,fetch-string string-&gt;finite-carry-sum
     <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-title">name-hash-table</span>,hash
     equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-string">"  {"</span> .s
       dup write-number
       <span class="cicada-nymph-string">"} "</span> .s
       <span class="cicada-nymph-title">name</span>,fetch-string .s
       .l
     <span class="cicada-nymph-syntax-key-word">else</span>
       drop
     <span class="cicada-nymph-syntax-key-word">then</span>
     add1 <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">name-hash-table</span>,report,orbit
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-hash-table,report,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; name -- &gt;&gt;</span>
     dup <span class="cicada-nymph-variable">*name-hash-table,size*</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
       drop
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-title">name</span>,used? <span class="cicada-nymph-syntax-key-word">if</span>
     dup <span class="cicada-nymph-title">name</span>,no-collision? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-comment">&lt;&lt; * {index} string # orbit-lenght &gt;&gt;</span>
       <span class="cicada-nymph-string">"* {"</span> .s
       dup write-number
       <span class="cicada-nymph-string">"} "</span> .s
       dup <span class="cicada-nymph-title">name</span>,fetch-string .s
       <span class="cicada-nymph-string">" # "</span> .s
       dup <span class="cicada-nymph-title">name</span>,fetch-orbit-length
       write-number
       .l
       dup <span class="cicada-nymph-number">1</span> <span class="cicada-nymph-title">name-hash-table</span>,report,orbit
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     add1 <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">name-hash-table</span>,report,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">name-hash-table,report</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-title">name-hash-table</span>,report,loop
     <span class="cicada-nymph-string">"* totally : "</span> .s
     <span class="cicada-nymph-variable">*name-hash-table,counter*</span> write-number
     .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
   * set <span class="bold">*name-hash-table,size*</span> to a small number [for example 13]
     then use the following function
     and (name-hash-table,report) to do test
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">test,name-hash-table</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"a-000"</span> string-&gt;name . .l
     <span class="cicada-nymph-string">"a-111"</span> string-&gt;name . .l
     <span class="cicada-nymph-string">"a-222"</span> string-&gt;name . .l
     <span class="cicada-nymph-string">"a-333"</span> string-&gt;name . .l
     <span class="cicada-nymph-string">"a-444"</span> string-&gt;name . .l
     <span class="cicada-nymph-string">"a-555"</span> string-&gt;name . .l
     <span class="cicada-nymph-string">"a-666"</span> string-&gt;name . .l
     <span class="cicada-nymph-string">"a-777"</span> string-&gt;name . .l
     <span class="cicada-nymph-string">"a-888"</span> string-&gt;name . .l
     <span class="cicada-nymph-string">"a-999"</span> string-&gt;name . .l
     <span class="cicada-nymph-string">"b-000"</span> string-&gt;name . .l
     <span class="cicada-nymph-string">"b-111"</span> string-&gt;name . .l
     <span class="cicada-nymph-string">"b-222"</span> string-&gt;name . .l
     <span class="cicada-nymph-string">"b-333"</span> string-&gt;name . .l
     <span class="cicada-nymph-string">"b-444"</span> string-&gt;name . .l
     <span class="cicada-nymph-string">"b-555"</span> string-&gt;name . .l
     <span class="cicada-nymph-string">"b-666"</span> string-&gt;name . .l
     <span class="cicada-nymph-string">"b-777"</span> string-&gt;name . .l
     <span class="cicada-nymph-string">"b-888"</span> string-&gt;name . .l
     <span class="cicada-nymph-string">"b-999"</span> string-&gt;name . .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
   <span class="cicada-nymph-title">test</span>,name-hash-table

   <span class="cicada-nymph-title">name-hash-table</span>,report
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* -----------------------------------</span>
<span class="org-level-1">* jo in name-hash-table</span>
<span class="org-level-2">** jo,save-into,name-hash-table</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">jo,save-into,name-hash-table</span>
     <span class="cicada-nymph-comment">&lt;&lt; jo -- &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:jo</span>
     <span class="cicada-nymph-fetch-local-variable-1">:jo</span> jo-&gt;name string-&gt;name <span class="cicada-nymph-save-local-variable-1">&gt;:name</span>
     <span class="cicada-nymph-fetch-local-variable-1">:jo</span> <span class="cicada-nymph-fetch-local-variable-1">:name</span> <span class="cicada-nymph-title">name</span>,save-nymph-jo
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** find-jo</span>
   * as find-jo in name-hash-table
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">find-jo</span>
     <span class="cicada-nymph-comment">&lt;&lt; word[address, length]
        -- jo, true
        -- false &gt;&gt;</span>
     <span class="cicada-nymph-title">name-hash-table</span>,search <span class="cicada-nymph-syntax-key-word">if</span>
     <span class="cicada-nymph-syntax-key-word">else</span>
       drop
       <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-title">name</span>,used-as-nymph-jo? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-title">name</span>,fetch-nymph-jo
       <span class="cicada-nymph-bool">true</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     drop
     <span class="cicada-nymph-bool">false</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-string">"add"</span> find-jo
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* make-jojo                           </span><span class="org-level-1"><span class="org-tag">:redefine:</span></span>
<span class="org-level-2">** make-jojo,dispatch-syntax-word</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">make-jojo,dispatch-syntax-word</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length], word[address, length] --
        string[address, length] &gt;&gt;</span>
     dup2 find-syntax <span class="cicada-nymph-syntax-key-word">if</span>
       execute-jo
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     dup2 find-jo <span class="cicada-nymph-syntax-key-word">if</span>
       xx|swap|x drop2
       <span class="cicada-nymph-title">save-into</span>,jo-area
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-string">"* (make-jojo) meets undefined word : "</span> .s .s .l
     <span class="cicada-nymph-exception">!undo-make-jojo</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** make-jojo</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">make-jojo,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- &gt;&gt;</span>
     dup2 space-string? <span class="cicada-nymph-syntax-key-word">if</span>
       drop2
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     dup2
     <span class="cicada-nymph-title">string-tail</span>,word
     xx|swap|xx
     <span class="cicada-nymph-title">string-head</span>,word
     <span class="cicada-nymph-title">make-jojo</span>,dispatch-syntax-word
     <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">make-jojo</span>,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">make-jojo</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- &gt;&gt;</span>
     <span class="cicada-nymph-title">local-variable-table</span>,clear
     <span class="cicada-nymph-variable">*rule-set,make-jojo*</span>
     push-syntax-stack
     <span class="cicada-nymph-title">make-jojo</span>,loop
     drop-syntax-stack
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* define-[function|exception]         </span><span class="org-level-1"><span class="org-tag">:redefine:</span></span>
<span class="org-level-2">** init,name-hash-table,nymph-jo</span>
   * the function should be executed right after
     (define-function) is redefined
   * the function loads a nymph-jo into a entry in the name-hash-table
     only when the entry is not already used as nymph-jo
     thus
     it should only be called once
   * you can see
     how the features above
     make the re-definition of (define-function) hard to test
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">init,name-hash-table,nymph-jo,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; jo -- &gt;&gt;</span>
     dup jo-&gt;name
     <span class="cicada-nymph-title">name-hash-table</span>,search <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-title">name</span>,used-as-nymph-jo? <span class="cicada-nymph-syntax-key-word">if</span>
         dup <span class="cicada-nymph-title">last-jo</span>,jotionary? <span class="cicada-nymph-syntax-key-word">if</span>
           drop
           <span class="cicada-nymph-end">end</span>
         <span class="cicada-nymph-syntax-key-word">then</span>
         jo-&gt;pre-jo
         <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">init</span>,name-hash-table,nymph-jo,loop
       <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-syntax-key-word">else</span>
       drop
     <span class="cicada-nymph-syntax-key-word">then</span>

     dup <span class="cicada-nymph-title">jo</span>,save-into,name-hash-table

     dup <span class="cicada-nymph-title">last-jo</span>,jotionary? <span class="cicada-nymph-syntax-key-word">if</span>
       drop
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     jo-&gt;pre-jo
     <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">init</span>,name-hash-table,nymph-jo,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">init,name-hash-table,nymph-jo</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-variable">*first-jo-in-jotionary*</span>
     <span class="cicada-nymph-title">init</span>,name-hash-table,nymph-jo,loop
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** define-variable,with-tos</span>
   * not undo is needed for define-variable,with-tos
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">define-variable,with-tos</span>
     <span class="cicada-nymph-comment">&lt;&lt; variable, string[address, length] -- &gt;&gt;</span>
     <span class="cicada-nymph-number">1</span> <span class="cicada-nymph-title">save-into</span>,jo-area

     <span class="cicada-nymph-variable">*current-free-address,primitive-string-area*</span>
       <span class="cicada-nymph-title">save-into</span>,jo-area
     dup2 <span class="cicada-nymph-title">string-head</span>,word
       <span class="cicada-nymph-title">save-into</span>,primitive-string-area

     <span class="cicada-nymph-variable">*first-jo-in-jotionary*</span>
     jo-&gt;link
       <span class="cicada-nymph-title">save-into</span>,jo-area

     <span class="cicada-nymph-variable">*current-free-address,jo-area*</span>
     dup <span class="cicada-nymph-title">jo</span>,save-into,name-hash-table
     <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*first-jo-in-jotionary*</span> save

     <span class="cicada-nymph-variable">*explainer,variable*</span>
       <span class="cicada-nymph-title">save-into</span>,jo-area

     drop2
     <span class="cicada-nymph-title">save-into</span>,jo-area
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** define-exception</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">define-exception</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- &gt;&gt;</span>
     <span class="cicada-nymph-variable">*current-free-address,primitive-string-area*</span> xx|swap|x
     <span class="cicada-nymph-variable">*current-free-address,jo-area*</span> xx|swap|x
     <span class="cicada-nymph-variable">*first-jo-in-jotionary*</span> xx|swap|x
     <span class="cicada-nymph-comment">&lt;&lt; *current-free-address,primitive-string-area*
        *current-free-address,jo-area*
        *first-jo-in-jotionary*
        string[address, length] &gt;&gt;</span>
     prepare-for
       <span class="cicada-nymph-exception">!undo-make-jojo</span>
       <span class="cicada-nymph-end">end</span>

     <span class="cicada-nymph-variable">*current-free-address,primitive-string-area*</span>
       <span class="cicada-nymph-title">save-into</span>,jo-area
     dup2 <span class="cicada-nymph-title">string-head</span>,word
       <span class="cicada-nymph-title">save-into</span>,primitive-string-area

     <span class="cicada-nymph-variable">*first-jo-in-jotionary*</span>
     jo-&gt;link
       <span class="cicada-nymph-title">save-into</span>,jo-area

     <span class="cicada-nymph-variable">*current-free-address,jo-area*</span>
     dup <span class="cicada-nymph-title">jo</span>,save-into,name-hash-table
     <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*first-jo-in-jotionary*</span> save

     <span class="cicada-nymph-variable">*explainer,exception*</span>
       <span class="cicada-nymph-title">save-into</span>,jo-area

     dup2
     <span class="cicada-nymph-title">string-tail</span>,word
     make-jojo

     drop2
     drop
     drop
     drop
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** define-function</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">define-function</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- &gt;&gt;</span>
     <span class="cicada-nymph-variable">*current-free-address,primitive-string-area*</span> xx|swap|x
     <span class="cicada-nymph-variable">*current-free-address,jo-area*</span> xx|swap|x
     <span class="cicada-nymph-variable">*first-jo-in-jotionary*</span> xx|swap|x
     <span class="cicada-nymph-comment">&lt;&lt; *current-free-address,primitive-string-area*
        *current-free-address,jo-area*
        *first-jo-in-jotionary*
        string[address, length] &gt;&gt;</span>
     prepare-for
       <span class="cicada-nymph-exception">!undo-make-jojo</span>
       <span class="cicada-nymph-end">end</span>

     <span class="cicada-nymph-variable">*current-free-address,primitive-string-area*</span>
       <span class="cicada-nymph-title">save-into</span>,jo-area
     dup2 <span class="cicada-nymph-title">string-head</span>,word
       <span class="cicada-nymph-title">save-into</span>,primitive-string-area

     <span class="cicada-nymph-variable">*first-jo-in-jotionary*</span>
     jo-&gt;link
       <span class="cicada-nymph-title">save-into</span>,jo-area

     <span class="cicada-nymph-variable">*current-free-address,jo-area*</span>
     dup <span class="cicada-nymph-title">jo</span>,save-into,name-hash-table
     <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*first-jo-in-jotionary*</span> save

     <span class="cicada-nymph-variable">*explainer,function*</span>
       <span class="cicada-nymph-title">save-into</span>,jo-area

     dup2
     <span class="cicada-nymph-title">string-tail</span>,word
     make-jojo

     drop2
     drop
     drop
     drop
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** to load jotionary into name-hash-table</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-title">init</span>,name-hash-table,nymph-jo
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">k</span> <span class="cicada-nymph-number">1</span> <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">3</span> add add . <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
   k

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">k</span> <span class="cicada-nymph-number">1</span> <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">3</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
   k add add .

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">k</span> no <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* -----------------------------------</span>
<span class="org-level-1">* number with base</span>
<span class="org-level-2">** </span><span class="org-todo">&#35352;</span><span class="org-level-2"> &#21407;&#29702;</span>
   * &#29694;&#22312; &#30340; number &#23601;&#21482;&#26159; "integer" &#32780;&#24050;
     &#26356;&#22810;&#30340;&#36319;&#25976;&#23416;&#26377;&#38364;&#30340;&#26481;&#35199;&#23559;&#22312; cicada &#20013;&#35373;&#35336;&#26032;&#30340;&#35486;&#27861;&#20358;&#23526;&#29694;
   * &#22312; "integer" &#36889;&#20491;&#20989;&#25976;&#20013; &#25105;&#23559;&#21482;&#25903;&#25345; &#23565;&#22235;&#31278;&#36914;&#20301;&#21046;&#30340; &#23383;&#31526;&#20018;&#30340; &#38321;&#35712;
     * &#21313;&#36914;&#21046;
       10#1231
       10#-1231
       1231
       -1231
     * &#20108;&#36914;&#21046;
       2#101001
       2#-101001
       2#-1011_1001
       "-" &#21644; "_" &#30340;&#21516;&#26178;&#23384;&#22312;&#26377;&#40670;&#38627;&#35712;
       &#27492;&#26178;&#21487;&#20197;&#29992; 2#1011_1001 negate
       &#20063;&#23601;&#26159;&#35498;&#38614;&#28982;&#20801;&#35377;&#29992; "-" &#20358;&#34920;&#31034;&#36000;&#25976;
       &#20294;&#26159;&#19981;&#40723;&#21237;&#36889;&#27171;&#20570;
       &#20043;&#25152;&#20197;&#20801;&#35377;&#36889;&#27171;&#20570;
       &#26159;&#22240;&#29234;&#22312;&#25171;&#21360;&#36000;&#25976;&#30340;&#26178;&#20505;&#38656;&#35201;&#36889;&#31278;&#34920;&#31034;&#26041;&#24335;
       &#19981;&#33021;&#25226; "-123" &#25171;&#21360;&#25104; "123 negate"
     * &#20843;&#36914;&#21046;
       8#712537
       8#-712537
     * &#21313;&#20845;&#36914;&#21046;
       16#f123acb3
       16#-F123ACB3
       &#22823;&#23531;&#23567;&#23531;&#23383;&#27597;&#37117;&#21487;&#20197;
   * one can use "_" to separate the number
     to make it more readable
     for example
     2#1111_0101_0001
   * actually, the base can be any 10 based number
     even greater then 36
     but when the base is greater then 36
     not all integer can be represented under this base
     for we only have 36 chars
<span class="org-level-2">** remove-char!</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">remove-char!,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; cursor, length, char -- cursor &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:char</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
     <span class="cicada-nymph-fetch-local-variable-1">:length</span> zero? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-fetch-local-variable-1">:cursor</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> fetch-byte <span class="cicada-nymph-fetch-local-variable-1">:char</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> add1 <span class="cicada-nymph-fetch-local-variable-1">:length</span> sub1
       <span class="cicada-nymph-fetch-local-variable-1">:cursor</span>
       string-&gt;buffer!
       <span class="cicada-nymph-fetch-local-variable-1">:cursor</span>
       <span class="cicada-nymph-fetch-local-variable-1">:length</span> sub1
       <span class="cicada-nymph-fetch-local-variable-1">:char</span>
     <span class="cicada-nymph-syntax-key-word">else</span>
       <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> add1
       <span class="cicada-nymph-fetch-local-variable-1">:length</span> sub1
       <span class="cicada-nymph-fetch-local-variable-1">:char</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">remove-char!</span>,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">remove-char!</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length], char -- string[address, length] &gt;&gt;</span>
     x|over|xx <span class="cicada-nymph-save-local-variable-1">&gt;:address</span>
     <span class="cicada-nymph-title">remove-char!</span>,loop <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
     <span class="cicada-nymph-fetch-local-variable-1">:address</span>
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:address</span> sub
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">test,remove-char!</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"2#1001_1001"</span>
     <span class="cicada-nymph-string">"_"</span> <span class="cicada-nymph-title">string-head</span>,char
     remove-char! .s <span class="cicada-nymph-comment">&lt;&lt; 2#1001_1001 &gt;&gt;</span>
     .l
     <span class="cicada-nymph-string">"___2#1001___1001___"</span>
     <span class="cicada-nymph-string">"_"</span> <span class="cicada-nymph-title">string-head</span>,char
     remove-char! .s <span class="cicada-nymph-comment">&lt;&lt; 2#1001_1001 &gt;&gt;</span>
     .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
   <span class="cicada-nymph-title">test</span>,remove-char!
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** latin-char?</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">latin-char?</span>
     <span class="cicada-nymph-comment">&lt;&lt; char -- bool &gt;&gt;</span>
     dup <span class="cicada-nymph-string">"A"</span> <span class="cicada-nymph-title">string-head</span>,char less-than? <span class="cicada-nymph-syntax-key-word">false?branch</span> <span class="cicada-nymph-number">4</span>
       drop <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     dup <span class="cicada-nymph-string">"Z"</span> <span class="cicada-nymph-title">string-head</span>,char less-or-equal? <span class="cicada-nymph-syntax-key-word">false?branch</span> <span class="cicada-nymph-number">4</span>
       drop <span class="cicada-nymph-bool">true</span>
       <span class="cicada-nymph-end">end</span>
     dup <span class="cicada-nymph-string">"a"</span> <span class="cicada-nymph-title">string-head</span>,char less-than? <span class="cicada-nymph-syntax-key-word">false?branch</span> <span class="cicada-nymph-number">4</span>
       drop <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     dup <span class="cicada-nymph-string">"z"</span> <span class="cicada-nymph-title">string-head</span>,char less-or-equal? <span class="cicada-nymph-syntax-key-word">false?branch</span> <span class="cicada-nymph-number">4</span>
       drop <span class="cicada-nymph-bool">true</span>
       <span class="cicada-nymph-end">end</span>
     drop <span class="cicada-nymph-bool">false</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** latin-char-&gt;number</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">latin-char-&gt;number</span>
     <span class="cicada-nymph-comment">&lt;&lt; latin-char -- number &gt;&gt;</span>
     dup <span class="cicada-nymph-string">"A"</span> <span class="cicada-nymph-title">string-head</span>,char less-than? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-string">"* (latin-char-&gt;number) the argument must be a latin-char"</span> .s .l
       <span class="cicada-nymph-string">"  but the following char is less-than 'A' : "</span> .s
       .i .l
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-string">"Z"</span> <span class="cicada-nymph-title">string-head</span>,char less-or-equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-string">"A"</span> <span class="cicada-nymph-title">string-head</span>,char
       sub
       <span class="cicada-nymph-number">10</span> add
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-string">"a"</span> <span class="cicada-nymph-title">string-head</span>,char less-than? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-string">"* (latin-char-&gt;number) the argument must be a latin-char"</span> .s .l
       <span class="cicada-nymph-string">"  but the following char is less-than 'a' but greater-then 'Z' : "</span> .s
       .i .l
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-string">"z"</span> <span class="cicada-nymph-title">string-head</span>,char less-or-equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-string">"a"</span> <span class="cicada-nymph-title">string-head</span>,char
       sub
       <span class="cicada-nymph-number">10</span> add
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-string">"* (latin-char-&gt;number) the argument must be a latin-char"</span> .s .l
     <span class="cicada-nymph-string">"  but the following char is greater-then 'z' : "</span> .s
     .i .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** number-&gt;latin-char</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">number-&gt;latin-char</span>
     <span class="cicada-nymph-comment">&lt;&lt; number -- latin-char &gt;&gt;</span>
     <span class="cicada-nymph-number">10</span> sub
     <span class="cicada-nymph-string">"a"</span> <span class="cicada-nymph-title">string-head</span>,char
     add
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** wild-digit-string?</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">wild-digit-string?</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- bool &gt;&gt;</span>
     dup zero? <span class="cicada-nymph-syntax-key-word">if</span>
       drop2 <span class="cicada-nymph-bool">true</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     over fetch-byte
     dup digit-char?
     swap latin-char?
     or <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-title">string-tail</span>,char
       <span class="cicada-nymph-end">&lt;&gt;</span> wild-digit-string?
     <span class="cicada-nymph-syntax-key-word">then</span>
     drop2
     <span class="cicada-nymph-bool">false</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** wild-integer-string?</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">wild-integer-string?</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- bool &gt;&gt;</span>
     dup zero? <span class="cicada-nymph-syntax-key-word">if</span>
       drop2 <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     dup2 <span class="cicada-nymph-title">string-head</span>,char
     <span class="cicada-nymph-string">"-"</span> <span class="cicada-nymph-title">string-head</span>,char
     equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-title">string-tail</span>,char
       wild-digit-string?
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     wild-digit-string?
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">test,wild-integer-string?</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     "" wild-integer-string? . <span class="cicada-nymph-comment">&lt;&lt; 1 &gt;&gt;</span>
     .l
     <span class="cicada-nymph-string">" "</span> wild-integer-string? . <span class="cicada-nymph-comment">&lt;&lt; 0 &gt;&gt;</span>
     <span class="cicada-nymph-string">"_asd"</span> wild-integer-string? . <span class="cicada-nymph-comment">&lt;&lt; 0 &gt;&gt;</span>
     <span class="cicada-nymph-string">" asd"</span> wild-integer-string? . <span class="cicada-nymph-comment">&lt;&lt; 0 &gt;&gt;</span>
     .l
     <span class="cicada-nymph-string">"asd"</span> wild-integer-string? . <span class="cicada-nymph-comment">&lt;&lt; 1 &gt;&gt;</span>
     <span class="cicada-nymph-string">"123"</span> wild-integer-string? . <span class="cicada-nymph-comment">&lt;&lt; 1 &gt;&gt;</span>
     <span class="cicada-nymph-string">"123asd"</span> wild-integer-string? . <span class="cicada-nymph-comment">&lt;&lt; 1 &gt;&gt;</span>
     .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
   <span class="cicada-nymph-title">test</span>,wild-integer-string?
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** base#wild-integer-string?</span>
   * a string for the following format
     is viewed as a base#digit-string
     &lt;digit-string&gt;#[-]&lt;wild-integer-string-string&gt;
     any "_" in the anywhere of the above string
     will be ignored
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">base#wild-integer-string?</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- bool &gt;&gt;</span>
     <span class="cicada-nymph-number">128</span> <span class="cicada-nymph-allocate">allocate-local-memory</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:string-address</span>
     tuck
     <span class="cicada-nymph-fetch-local-variable-1">:string-address</span>
     string-&gt;buffer!
     <span class="cicada-nymph-fetch-local-variable-1">:string-address</span> swap
     <span class="cicada-nymph-string">"_"</span> <span class="cicada-nymph-title">string-head</span>,char
     remove-char!
     <span class="cicada-nymph-save-local-variable-1">&gt;:new-string-length</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:new-string-address</span>
     <span class="cicada-nymph-comment">&lt;&lt; dup2 .s .l 0 end &gt;&gt;</span>
     <span class="cicada-nymph-fetch-local-variable-1">:new-string-address</span>
     <span class="cicada-nymph-fetch-local-variable-1">:new-string-length</span>
     <span class="cicada-nymph-string">"#"</span> <span class="cicada-nymph-title">string-head</span>,char
     <span class="cicada-nymph-title">string</span>,find-char <span class="cicada-nymph-syntax-key-word">if</span>
     <span class="cicada-nymph-syntax-key-word">else</span>
       <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:address-of-#</span>
     <span class="cicada-nymph-fetch-local-variable-1">:new-string-address</span>
     <span class="cicada-nymph-fetch-local-variable-1">:address-of-#</span> <span class="cicada-nymph-fetch-local-variable-1">:new-string-address</span> sub
     <span class="cicada-nymph-save-local-variable-2">&gt;::base-string</span>
     <span class="cicada-nymph-fetch-local-variable-1">:address-of-#</span> add1
     <span class="cicada-nymph-fetch-local-variable-1">:address-of-#</span> <span class="cicada-nymph-fetch-local-variable-1">:new-string-address</span> sub add1
     <span class="cicada-nymph-fetch-local-variable-1">:new-string-length</span> swap sub
     <span class="cicada-nymph-save-local-variable-2">&gt;::wild-integer-string</span>
     <span class="cicada-nymph-fetch-local-variable-2">::base-string</span> digit-string?
     <span class="cicada-nymph-fetch-local-variable-2">::base-string</span> empty-string? not
     and <span class="cicada-nymph-syntax-key-word">if</span>
     <span class="cicada-nymph-syntax-key-word">else</span>
       <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-2">::wild-integer-string</span> wild-integer-string?
     <span class="cicada-nymph-fetch-local-variable-2">::wild-integer-string</span> empty-string? not
     and <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-bool">true</span>
     <span class="cicada-nymph-syntax-key-word">else</span>
       <span class="cicada-nymph-bool">false</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">test,base#wild-integer-string?</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"#"</span> base#wild-integer-string? . <span class="cicada-nymph-comment">&lt;&lt; 0 &gt;&gt;</span>
     <span class="cicada-nymph-string">"##"</span> base#wild-integer-string? . <span class="cicada-nymph-comment">&lt;&lt; 0 &gt;&gt;</span>
     <span class="cicada-nymph-string">"#___#"</span> base#wild-integer-string? . <span class="cicada-nymph-comment">&lt;&lt; 0 &gt;&gt;</span>
     <span class="cicada-nymph-string">"   "</span> base#wild-integer-string? . <span class="cicada-nymph-comment">&lt;&lt; 0 &gt;&gt;</span>
     <span class="cicada-nymph-string">"______#__1______"</span> base#wild-integer-string? . <span class="cicada-nymph-comment">&lt;&lt; 0 &gt;&gt;</span>
     <span class="cicada-nymph-string">"___2___#__1___c29bf210019___&#28450;&#23383;"</span> base#wild-integer-string? . <span class="cicada-nymph-comment">&lt;&lt; 0 &gt;&gt;</span>
     .l
     <span class="cicada-nymph-string">"1#1"</span> base#wild-integer-string? . <span class="cicada-nymph-comment">&lt;&lt; 1 &gt;&gt;</span>
     <span class="cicada-nymph-string">"123#1c29bf219g42"</span> base#wild-integer-string? . <span class="cicada-nymph-comment">&lt;&lt; 1 &gt;&gt;</span>
     <span class="cicada-nymph-string">"___2___#__1___c29bf210019___g42"</span> base#wild-integer-string? . <span class="cicada-nymph-comment">&lt;&lt; 1 &gt;&gt;</span>
     .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
   <span class="cicada-nymph-title">test</span>,base#wild-integer-string?
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** base#wild-integer-string-&gt;base-string</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">base#wild-integer-string-&gt;base-string</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- string[address, length] &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:address</span>
     <span class="cicada-nymph-fetch-local-variable-1">:address</span>
     <span class="cicada-nymph-fetch-local-variable-1">:length</span>
     <span class="cicada-nymph-string">"#"</span> <span class="cicada-nymph-title">string-head</span>,char
     <span class="cicada-nymph-title">string</span>,find-char <span class="cicada-nymph-syntax-key-word">if</span>
     <span class="cicada-nymph-syntax-key-word">else</span>
       <span class="cicada-nymph-string">"* (base#wild-integer-string-&gt;base-string)"</span> .s .l
       <span class="cicada-nymph-string">"  the argument must be a base#wild-integer-string"</span> .s .l
       <span class="cicada-nymph-string">"  but the following string does not even have a '#' in it :"</span> .s .l
       <span class="cicada-nymph-string">"  "</span> .s
       <span class="cicada-nymph-fetch-local-variable-1">:address</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span> .s .l
       <span class="cicada-nymph-comment">&lt;&lt; to balance the argument-stack or not ??? &gt;&gt;</span>
       <span class="cicada-nymph-comment">&lt;&lt; :address :length &gt;&gt;</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:address-of-#</span>
     <span class="cicada-nymph-fetch-local-variable-1">:address</span>
     <span class="cicada-nymph-fetch-local-variable-1">:address-of-#</span> <span class="cicada-nymph-fetch-local-variable-1">:address</span> sub
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** base#wild-integer-string-&gt;wild-integer-string</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">base#wild-integer-string-&gt;wild-integer-string</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- string[address, length] &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:address</span>
     <span class="cicada-nymph-fetch-local-variable-1">:address</span>
     <span class="cicada-nymph-fetch-local-variable-1">:length</span>
     <span class="cicada-nymph-string">"#"</span> <span class="cicada-nymph-title">string-head</span>,char
     <span class="cicada-nymph-title">string</span>,find-char <span class="cicada-nymph-syntax-key-word">if</span>
     <span class="cicada-nymph-syntax-key-word">else</span>
       <span class="cicada-nymph-string">"* (base#wild-integer-string-&gt;wild-integer-string)"</span> .s .l
       <span class="cicada-nymph-string">"  the argument must be a base#wild-integer-string"</span> .s .l
       <span class="cicada-nymph-string">"  but the following string does not even have a '#' in it :"</span> .s .l
       <span class="cicada-nymph-string">"  "</span> .s
       <span class="cicada-nymph-fetch-local-variable-1">:address</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span> .s .l
       <span class="cicada-nymph-comment">&lt;&lt; to balance the argument-stack or not ??? &gt;&gt;</span>
       <span class="cicada-nymph-comment">&lt;&lt; :address :length &gt;&gt;</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:address-of-#</span>
     <span class="cicada-nymph-fetch-local-variable-1">:address-of-#</span> add1
     <span class="cicada-nymph-fetch-local-variable-1">:address-of-#</span> <span class="cicada-nymph-fetch-local-variable-1">:address</span> sub add1
     <span class="cicada-nymph-fetch-local-variable-1">:length</span> swap sub
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">test,base#wild-integer-string-&gt;base-string</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"___2___ __1___c29bf210019___&#28450;&#23383;"</span> base#wild-integer-string-&gt;base-string
     .l
     <span class="cicada-nymph-string">"1#1"</span> base#wild-integer-string-&gt;base-string .s .l <span class="cicada-nymph-comment">&lt;&lt; 1 &gt;&gt;</span>
     <span class="cicada-nymph-string">"123#1c29bf219g42"</span> base#wild-integer-string-&gt;base-string .s .l <span class="cicada-nymph-comment">&lt;&lt; 123 &gt;&gt;</span>
     <span class="cicada-nymph-string">"___2___#__1___c29bf210019___g42"</span> base#wild-integer-string-&gt;base-string .s .l <span class="cicada-nymph-comment">&lt;&lt; ___2___ &gt;&gt;</span>
     .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
   <span class="cicada-nymph-title">test</span>,base#wild-integer-string-&gt;base-string

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">test,base#wild-integer-string-&gt;wild-integer-string</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"___2___ __1___c29bf210019___&#28450;&#23383;"</span> base#wild-integer-string-&gt;wild-integer-string
     .l
     <span class="cicada-nymph-string">"1#1"</span> base#wild-integer-string-&gt;wild-integer-string .s .l <span class="cicada-nymph-comment">&lt;&lt; 1 &gt;&gt;</span>
     <span class="cicada-nymph-string">"123#1c29bf219g42"</span> base#wild-integer-string-&gt;wild-integer-string .s .l <span class="cicada-nymph-comment">&lt;&lt; 1c29bf219g42 &gt;&gt;</span>
     <span class="cicada-nymph-string">"___2___#__1___c29bf210019___g42"</span> base#wild-integer-string-&gt;wild-integer-string .s .l <span class="cicada-nymph-comment">&lt;&lt; __1___c29bf210019___g42 &gt;&gt;</span>
     .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
   <span class="cicada-nymph-title">test</span>,base#wild-integer-string-&gt;wild-integer-string
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** wild-integer-string-&gt;integer,with-base</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">wild-integer-string-&gt;integer,with-base,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length], base, sum, counter -- integer &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:counter</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:sum</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:base</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:address</span>
     <span class="cicada-nymph-fetch-local-variable-1">:length</span> zero? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-fetch-local-variable-1">:sum</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-1">:address</span> fetch-byte <span class="cicada-nymph-save-local-variable-1">&gt;:char</span>
     <span class="cicada-nymph-fetch-local-variable-1">:char</span> digit-char? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-fetch-local-variable-1">:char</span> digit-char-&gt;number
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-1">:char</span> latin-char? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-fetch-local-variable-1">:char</span> latin-char-&gt;number
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-1">:base</span> <span class="cicada-nymph-fetch-local-variable-1">:counter</span> power
     mul
     <span class="cicada-nymph-fetch-local-variable-1">:sum</span> add
     <span class="cicada-nymph-save-local-variable-1">&gt;:sum</span>
     <span class="cicada-nymph-fetch-local-variable-1">:address</span> add1
     <span class="cicada-nymph-fetch-local-variable-1">:length</span> sub1
     <span class="cicada-nymph-fetch-local-variable-1">:base</span>
     <span class="cicada-nymph-fetch-local-variable-1">:sum</span>
     <span class="cicada-nymph-fetch-local-variable-1">:counter</span> add1
     <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">wild-integer-string-&gt;integer</span>,with-base,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">wild-integer-string-&gt;integer,with-base</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length], base -- integer &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:base</span>
     dup zero? <span class="cicada-nymph-syntax-key-word">if</span>
       drop2
       <span class="cicada-nymph-number">0</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     dup2 <span class="cicada-nymph-title">string-head</span>,char
     <span class="cicada-nymph-string">"-"</span> <span class="cicada-nymph-title">string-head</span>,char
     equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-title">string-tail</span>,char
       <span class="cicada-nymph-number">-1</span> <span class="cicada-nymph-save-local-variable-1">&gt;:sign</span>
     <span class="cicada-nymph-syntax-key-word">else</span>
       <span class="cicada-nymph-number">1</span> <span class="cicada-nymph-save-local-variable-1">&gt;:sign</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-save-local-variable-2">&gt;::string</span>
     <span class="cicada-nymph-fetch-local-variable-2">::string</span> string-reverse!
     <span class="cicada-nymph-fetch-local-variable-1">:base</span>
     <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-title">wild-integer-string-&gt;integer</span>,with-base,loop
     <span class="cicada-nymph-fetch-local-variable-1">:sign</span> mul
     <span class="cicada-nymph-fetch-local-variable-2">::string</span> string-reverse!
     drop2
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** base#wild-integer-string-&gt;integer</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">base#wild-integer-string-&gt;integer</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- integer &gt;&gt;</span>
     <span class="cicada-nymph-number">128</span> <span class="cicada-nymph-allocate">allocate-local-memory</span>
       <span class="cicada-nymph-save-local-variable-1">&gt;:address</span>
     tuck <span class="cicada-nymph-fetch-local-variable-1">:address</span> string-&gt;buffer!
       <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>
     <span class="cicada-nymph-fetch-local-variable-1">:address</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span>
     <span class="cicada-nymph-string">"_"</span> <span class="cicada-nymph-title">string-head</span>,char remove-char!
       <span class="cicada-nymph-save-local-variable-2">&gt;::string</span>
     <span class="cicada-nymph-fetch-local-variable-2">::string</span>
     base#wild-integer-string-&gt;base-string
       <span class="cicada-nymph-save-local-variable-2">&gt;::base-string</span>
     <span class="cicada-nymph-fetch-local-variable-2">::string</span>
     base#wild-integer-string-&gt;wild-integer-string
       <span class="cicada-nymph-save-local-variable-2">&gt;::wild-integer-string</span>
     <span class="cicada-nymph-fetch-local-variable-2">::base-string</span>
     digit-string-&gt;number
       <span class="cicada-nymph-save-local-variable-1">&gt;:base</span>
     <span class="cicada-nymph-fetch-local-variable-2">::wild-integer-string</span>
     <span class="cicada-nymph-fetch-local-variable-1">:base</span>
     <span class="cicada-nymph-title">wild-integer-string-&gt;integer</span>,with-base
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">test,base#wild-integer-string-&gt;integer</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"0#111"</span> base#wild-integer-string-&gt;integer .
     <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-number">0</span> power <span class="cicada-nymph-number">1</span> mul
     <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-number">1</span> power <span class="cicada-nymph-number">1</span> mul add
     <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-number">2</span> power <span class="cicada-nymph-number">1</span> mul add .
     .l
     <span class="cicada-nymph-string">"1#111"</span> base#wild-integer-string-&gt;integer .
     <span class="cicada-nymph-number">1</span> <span class="cicada-nymph-number">0</span> power <span class="cicada-nymph-number">1</span> mul
     <span class="cicada-nymph-number">1</span> <span class="cicada-nymph-number">1</span> power <span class="cicada-nymph-number">1</span> mul add
     <span class="cicada-nymph-number">1</span> <span class="cicada-nymph-number">2</span> power <span class="cicada-nymph-number">1</span> mul add .
     .l
     <span class="cicada-nymph-string">"10#123"</span> base#wild-integer-string-&gt;integer .
     <span class="cicada-nymph-string">"_1_0__#_1__2_3_"</span> base#wild-integer-string-&gt;integer .
     <span class="cicada-nymph-number">10</span> <span class="cicada-nymph-number">0</span> power <span class="cicada-nymph-number">3</span> mul
     <span class="cicada-nymph-number">10</span> <span class="cicada-nymph-number">1</span> power <span class="cicada-nymph-number">2</span> mul add
     <span class="cicada-nymph-number">10</span> <span class="cicada-nymph-number">2</span> power <span class="cicada-nymph-number">1</span> mul add .
     .l
     <span class="cicada-nymph-string">"2#1000"</span> base#wild-integer-string-&gt;integer .
     <span class="cicada-nymph-string">"2#_1000_"</span> base#wild-integer-string-&gt;integer .
     <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">0</span> power <span class="cicada-nymph-number">0</span> mul
     <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">1</span> power <span class="cicada-nymph-number">0</span> mul add
     <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">2</span> power <span class="cicada-nymph-number">0</span> mul add
     <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">3</span> power <span class="cicada-nymph-number">1</span> mul add .
     .l
     <span class="cicada-nymph-string">"2#1111_1111"</span> base#wild-integer-string-&gt;integer .
     <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">0</span> power <span class="cicada-nymph-number">1</span> mul
     <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">1</span> power <span class="cicada-nymph-number">1</span> mul add
     <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">2</span> power <span class="cicada-nymph-number">1</span> mul add
     <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">3</span> power <span class="cicada-nymph-number">1</span> mul add
     <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">4</span> power <span class="cicada-nymph-number">1</span> mul add
     <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">5</span> power <span class="cicada-nymph-number">1</span> mul add
     <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">6</span> power <span class="cicada-nymph-number">1</span> mul add
     <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">7</span> power <span class="cicada-nymph-number">1</span> mul add .
     <span class="cicada-nymph-string">"16#f_f"</span> base#wild-integer-string-&gt;integer .
     <span class="cicada-nymph-number">16</span> <span class="cicada-nymph-number">0</span> power <span class="cicada-nymph-number">15</span> mul
     <span class="cicada-nymph-number">16</span> <span class="cicada-nymph-number">1</span> power <span class="cicada-nymph-number">15</span> mul add .
     .l
     <span class="cicada-nymph-string">"100#111"</span> base#wild-integer-string-&gt;integer .
     <span class="cicada-nymph-number">100</span> <span class="cicada-nymph-number">0</span> power <span class="cicada-nymph-number">1</span> mul
     <span class="cicada-nymph-number">100</span> <span class="cicada-nymph-number">1</span> power <span class="cicada-nymph-number">1</span> mul add
     <span class="cicada-nymph-number">100</span> <span class="cicada-nymph-number">2</span> power <span class="cicada-nymph-number">1</span> mul add .
     .l
     <span class="cicada-nymph-string">"64#zzz"</span> base#wild-integer-string-&gt;integer .
     <span class="cicada-nymph-number">64</span> <span class="cicada-nymph-number">0</span> power <span class="cicada-nymph-number">35</span> mul
     <span class="cicada-nymph-number">64</span> <span class="cicada-nymph-number">1</span> power <span class="cicada-nymph-number">35</span> mul add
     <span class="cicada-nymph-number">64</span> <span class="cicada-nymph-number">2</span> power <span class="cicada-nymph-number">35</span> mul add .
     .l
     <span class="cicada-nymph-string">"36#zzzz"</span> base#wild-integer-string-&gt;integer .
     <span class="cicada-nymph-number">36</span> <span class="cicada-nymph-number">0</span> power <span class="cicada-nymph-number">35</span> mul
     <span class="cicada-nymph-number">36</span> <span class="cicada-nymph-number">1</span> power <span class="cicada-nymph-number">35</span> mul add
     <span class="cicada-nymph-number">36</span> <span class="cicada-nymph-number">2</span> power <span class="cicada-nymph-number">35</span> mul add
     <span class="cicada-nymph-number">36</span> <span class="cicada-nymph-number">3</span> power <span class="cicada-nymph-number">35</span> mul add .
     .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
   <span class="cicada-nymph-title">test</span>,base#wild-integer-string-&gt;integer
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-todo">note</span><span class="org-level-2"> writers</span>
   * a general function
     and three special ones
   * they all writer integer
   * I will implemented them by syntax when needed
<span class="org-level-2">** .#</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">.#,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; number, base, cursor -- cursor &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:base</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:number</span>
     <span class="cicada-nymph-fetch-local-variable-1">:number</span> zero? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-fetch-local-variable-1">:cursor</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-1">:number</span>
     <span class="cicada-nymph-fetch-local-variable-1">:base</span>
     divmod <span class="cicada-nymph-save-local-variable-1">&gt;:mod</span> <span class="cicada-nymph-save-local-variable-1">&gt;:div</span>
     <span class="cicada-nymph-fetch-local-variable-1">:mod</span> <span class="cicada-nymph-number">10</span> less-than? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-fetch-local-variable-1">:mod</span> number-&gt;digit-char
     <span class="cicada-nymph-syntax-key-word">else</span>
       <span class="cicada-nymph-fetch-local-variable-1">:mod</span> number-&gt;latin-char
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span>
     save-byte
     <span class="cicada-nymph-fetch-local-variable-1">:div</span>
     <span class="cicada-nymph-fetch-local-variable-1">:base</span>
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> add1
     <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">.#</span>,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">.#</span>
     <span class="cicada-nymph-comment">&lt;&lt; integer, base -- &gt;&gt;</span>
     over zero? <span class="cicada-nymph-syntax-key-word">if</span>
       drop .i
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">36</span> greater-than?
     over <span class="cicada-nymph-number">2</span> less-than?
     or <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-string">"* (.#) the base "</span> .s .i <span class="cicada-nymph-string">" is not valid to write a number"</span> .s .l
       <span class="cicada-nymph-string">"  a base should in between 2 and 36 includingly"</span> .s .l
       <span class="cicada-nymph-string">"  the integer to be written is "</span> .s .i .l
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     dup .i
     <span class="cicada-nymph-string">"#"</span> .s
     over negative? <span class="cicada-nymph-syntax-key-word">if</span>
       swap negate swap
       <span class="cicada-nymph-string">"-"</span> .s
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-number">128</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:buffer</span>
     <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
     <span class="cicada-nymph-title">.#</span>,loop <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
     <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> sub
     string-reverse! .s
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** .#2 .#8 .#16</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">.#2</span>  <span class="cicada-nymph-number">2</span>  .# <span class="cicada-nymph-string">" "</span> .s <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">.#8</span>  <span class="cicada-nymph-number">8</span>  .# <span class="cicada-nymph-string">" "</span> .s <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">.#16</span> <span class="cicada-nymph-number">16</span> .# <span class="cicada-nymph-string">" "</span> .s <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-number">0</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">111</span>        <span class="cicada-nymph-number">0</span>  .#
   <span class="cicada-nymph-number">1</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">111</span>        <span class="cicada-nymph-number">1</span>  .#
   <span class="cicada-nymph-number">10</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">123</span>       <span class="cicada-nymph-number">10</span> .#
   <span class="cicada-nymph-number">10</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">0</span>         <span class="cicada-nymph-number">10</span> .#
   <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">1000</span>       <span class="cicada-nymph-number">2</span>  .#
   <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">1111_1111</span>  <span class="cicada-nymph-number">2</span>  .#
   <span class="cicada-nymph-number">16</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">f_f</span>       <span class="cicada-nymph-number">16</span> .#
   <span class="cicada-nymph-number">36</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">zzzz</span>      <span class="cicada-nymph-number">36</span> .#

   <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">1111_1111</span>  .#2
   <span class="cicada-nymph-number">8</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">123</span>        .#8
   <span class="cicada-nymph-number">16</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">fff</span>       .#16
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-todo">&#35352;</span><span class="org-level-2"> bit-xor</span>
   * &#23565; bit-xor &#30340;&#35299;&#37323;
     1. &#23565;&#31281;&#22320;&#30475;
        diff
     2. &#38750;&#23565;&#31281;&#22320;&#30475;
        &#24460;&#32773;&#26159; 1 &#21063; &#27714; invert
     &#32080;&#27083;&#19978; &#23565;&#26044;&#21516;&#27171;&#30340;&#25277;&#35937;&#20989;&#25976;
     &#35469;&#35672;&#19978; &#21487;&#20197;&#26377;&#19981;&#21516;&#30340;&#29702;&#35299;&#26041;&#24335;
<span class="org-level-2">** </span><span class="org-todo">&#35352;</span><span class="org-level-2"> gamber</span>
   * gray code &#24456;&#26377;&#36259;
     &#23588;&#20854;&#26159;&#20854;&#29983;&#25104;&#26041;&#24335;
     &#21363; &#20808;&#21462;&#23565;&#31281; &#20877;&#21152;&#21069;&#32180;
     &#26159;&#21033;&#29992; &#23565;&#31281;&#24615; &#21644; &#19981;&#35722;&#37327;[&#19981;&#35722;&#24615;] &#30340;&#20856;&#22411;&#20363;&#23376;
   * &#21516;&#27171;&#30340;&#19968;&#20491; 0 1 &#23383;&#31526;&#20018;
     &#27604;&#22914; "100"
     &#25226;&#23427;&#20570;&#29234;&#33258;&#28982;&#32232;&#30908;&#30340;&#20108;&#36914;&#21046;&#25976; &#20854;&#20540;&#29234; 4 &#36889;&#20491;&#26159; number
     &#25226;&#23427;&#20570;&#29234; gray code &#32232;&#30908;&#30340;&#20108;&#36914;&#21046;&#25976; &#20854;&#20540;&#29234; 7 &#36889;&#20491;&#25105;&#31281;&#20043;&#29234; gamber
   * &#36889;&#27171; &#25105;&#20497;&#23601;&#26377;&#22914;&#19979;&#20841;&#20491;&#20989;&#25976;
     string-&gt;number
     string-&gt;gamber
     &#21516;&#26178;&#36889;&#20841;&#20491;&#20989;&#25976;&#36996;&#24341;&#20986;&#20102;&#19979;&#38754;&#20841;&#20491;&#20989;&#25976;
     number-&gt;gamber
     gamber-&gt;number
   * &#19979;&#38754;&#30340;&#30340;&#31639;&#27861;&#26159;&#36890;&#36942;&#25226;&#25976;&#23383;&#21015;&#34920;&#20043;&#24460;
     &#36880; bit &#35264;&#23519;&#27599;&#21015;&#30340;&#25509;&#36899; bit &#20540;&#30340;&#35215;&#21063;&#32780;&#24471;&#20358;&#30340;
     &#27604;&#22914;
     &#20197;&#29983;&#25104;&#35215;&#21063;&#29234;&#23450;&#32681;
     &#28982;&#24460;&#32317;&#32080;&#19968;&#19979;&#25152;&#30332;&#29694;&#30340;&#27599;&#19968;&#21015;&#30340;&#35215;&#24459;
     &#23601;&#21487;&#20197;&#24471;&#21040;&#23565;&#19979;&#38754;&#30340;&#31639;&#27861;&#30340;&#26377;&#25928;&#24615;&#30340;&#22196;&#26684;&#35657;&#26126;
   * &#27880;&#24847;
     &#20841;&#20491;&#26041;&#21521;&#30340;&#36939;&#31639;&#36837;&#28982;&#19981;&#21516;
     &#36996;&#26159;&#35201;&#20197;&#29983;&#25104;&#26041;&#24335;&#29234;&#26680;&#24515;&#20358;&#29702;&#35299;&#36889;&#19968;&#40670;
     &#21482;&#35201;&#25226;&#29983;&#25104;&#36942;&#31243;&#20013;
     &#27599;&#27425;&#22312;&#20570;&#23436;&#23565;&#31281;&#24460;
     &#25152;&#28155;&#21152;&#30340; &#19968;&#20018;&#21069;&#32180; 1 &#30475;&#25104;&#26159;&#19968;&#20491;&#25972;&#39636;
     &#23601;&#33021;&#29702;&#35299;&#20102;
     &#21487;&#20197;&#25226;&#27599;&#27425;&#30340; &#19968;&#20018;&#21069;&#32180; 1 &#30475;&#25104;&#26159;&#19968;&#26681;&#26829;&#23376;
     &#19968;&#26681;&#26829;&#23376; &#19968;&#26681;&#26829;&#23376; &#22320; &#20358;&#35264;&#23519;&#25152;&#29983;&#25104;&#30340;&#21015;&#34920; &#23601;&#34892;&#20102;
     &#21487;&#20197;&#30332;&#29694;
     &#26829;&#23376; &#20854;&#23526;&#23601;&#26159; &#33258;&#28982;&#32232;&#30908;&#26178;
     &#36880; bit &#35264;&#23519;&#21015;&#34920;&#26178;&#30340; &#25509;&#36899; bit &#20540;
     &#37027;&#40636;&#23601;&#33021;&#29702;&#35299;&#21040;
     &#29234;&#20160;&#40636; number-&gt;gamber &#27604; gamber-&gt;number &#23481;&#26131;&#35336;&#31639;&#20102;
   * &#21478;&#22806;&#36996;&#35201;&#27880;&#24847;
     &#24478;&#26368;&#39640;&#20301;&#21521;&#26368;&#20302;&#20301;&#21435;&#35336;&#31639;
     &#26159;&#29234;&#20102;&#36880;&#27493;&#30906;&#23450;&#25976;&#22312;&#24207;&#38364;&#20418;&#20013;&#30340;&#20301;&#32622;
<span class="org-level-2">** number-&gt;gamber</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">number-&gt;gamber</span>
     <span class="cicada-nymph-comment">&lt;&lt; number -- gamber &gt;&gt;</span>
     dup <span class="cicada-nymph-number">1</span> bit-right
     bit-xor
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** gamber-&gt;number</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">gamber-&gt;number,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; gamber, number, cursor -- number &gt;&gt;</span>
     dup negative? <span class="cicada-nymph-syntax-key-word">if</span>
       drop
       swap drop
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:number</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:gamber</span>
     <span class="cicada-nymph-fetch-local-variable-1">:gamber</span> <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> get-bit
     <span class="cicada-nymph-fetch-local-variable-1">:number</span> <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> add1 get-bit
     xor <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-fetch-local-variable-1">:number</span> <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> set-bit <span class="cicada-nymph-save-local-variable-1">&gt;:number</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-1">:gamber</span>
     <span class="cicada-nymph-fetch-local-variable-1">:number</span>
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> sub1
     <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">gamber-&gt;number</span>,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">gamber-&gt;number</span>
     <span class="cicada-nymph-comment">&lt;&lt; gamber -- number &gt;&gt;</span>
     dup find-highest-set-bit
     dup negative? <span class="cicada-nymph-syntax-key-word">if</span>
       drop
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-number">0</span> over set-bit
     swap sub1
     <span class="cicada-nymph-title">gamber-&gt;number</span>,loop
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">test,gamber</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">0000</span> number-&gt;gamber .#2 .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">0001</span> number-&gt;gamber .#2 .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">0010</span> number-&gt;gamber .#2 .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">0011</span> number-&gt;gamber .#2 .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">0100</span> number-&gt;gamber .#2 .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">0101</span> number-&gt;gamber .#2 .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">0110</span> number-&gt;gamber .#2 .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">0111</span> number-&gt;gamber .#2 .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">1000</span> number-&gt;gamber .#2 .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">1001</span> number-&gt;gamber .#2 .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">1010</span> number-&gt;gamber .#2 .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">1011</span> number-&gt;gamber .#2 .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">1100</span> number-&gt;gamber .#2 .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">1101</span> number-&gt;gamber .#2 .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">1110</span> number-&gt;gamber .#2 .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">1111</span> number-&gt;gamber .#2 .l
     .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">0000</span> number-&gt;gamber gamber-&gt;number .#2 .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">0001</span> number-&gt;gamber gamber-&gt;number .#2 .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">0010</span> number-&gt;gamber gamber-&gt;number .#2 .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">0011</span> number-&gt;gamber gamber-&gt;number .#2 .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">0100</span> number-&gt;gamber gamber-&gt;number .#2 .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">0101</span> number-&gt;gamber gamber-&gt;number .#2 .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">0110</span> number-&gt;gamber gamber-&gt;number .#2 .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">0111</span> number-&gt;gamber gamber-&gt;number .#2 .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">1000</span> number-&gt;gamber gamber-&gt;number .#2 .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">1001</span> number-&gt;gamber gamber-&gt;number .#2 .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">1010</span> number-&gt;gamber gamber-&gt;number .#2 .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">1011</span> number-&gt;gamber gamber-&gt;number .#2 .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">1100</span> number-&gt;gamber gamber-&gt;number .#2 .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">1101</span> number-&gt;gamber gamber-&gt;number .#2 .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">1110</span> number-&gt;gamber gamber-&gt;number .#2 .l
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">1111</span> number-&gt;gamber gamber-&gt;number .#2 .l
     .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
   <span class="cicada-nymph-title">test</span>,gamber
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* </span><span class="org-level-1"><span class="bold">*rule-set,make-jojo*</span></span><span class="org-level-1"> : number with base</span>
<span class="org-level-2">** syntax,base#wild-integer-string,make-jojo</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">syntax,base#wild-integer-string,make-jojo</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length], word[address, length] --
        string[address, length] &gt;&gt;</span>
     <span class="cicada-nymph-variable">*literal*</span> <span class="cicada-nymph-title">save-into</span>,jo-area
     base#wild-integer-string-&gt;integer
     <span class="cicada-nymph-title">save-into</span>,jo-area
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** more,rule-set,make-jojo</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">more,rule-set,make-jojo</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-syntax-key-word">jo</span> base#wild-integer-string?
     <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">syntax</span>,base#wild-integer-string,make-jojo
     <span class="cicada-nymph-variable">*rule-set,make-jojo*</span> add-rule
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-title">more</span>,rule-set,make-jojo
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">test,syntax,base#wild-integer-string,make-jojo</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-number">0</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">111</span>
     <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-number">0</span> power <span class="cicada-nymph-number">1</span> mul
     <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-number">1</span> power <span class="cicada-nymph-number">1</span> mul add
     <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-number">2</span> power <span class="cicada-nymph-number">1</span> mul add
     . . .l

     <span class="cicada-nymph-number">1</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">111</span>
     <span class="cicada-nymph-number">1</span> <span class="cicada-nymph-number">0</span> power <span class="cicada-nymph-number">1</span> mul
     <span class="cicada-nymph-number">1</span> <span class="cicada-nymph-number">1</span> power <span class="cicada-nymph-number">1</span> mul add
     <span class="cicada-nymph-number">1</span> <span class="cicada-nymph-number">2</span> power <span class="cicada-nymph-number">1</span> mul add
     . . .l

     <span class="cicada-nymph-number">10</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">123</span>
     _1_0__#_1__2_3_
     <span class="cicada-nymph-number">10</span> <span class="cicada-nymph-number">0</span> power <span class="cicada-nymph-number">3</span> mul
     <span class="cicada-nymph-number">10</span> <span class="cicada-nymph-number">1</span> power <span class="cicada-nymph-number">2</span> mul add
     <span class="cicada-nymph-number">10</span> <span class="cicada-nymph-number">2</span> power <span class="cicada-nymph-number">1</span> mul add
     . . .l .

     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">1000</span>
     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">_1000_</span>
     <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">0</span> power <span class="cicada-nymph-number">0</span> mul
     <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">1</span> power <span class="cicada-nymph-number">0</span> mul add
     <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">2</span> power <span class="cicada-nymph-number">0</span> mul add
     <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">3</span> power <span class="cicada-nymph-number">1</span> mul add
     . . .l .

     <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">1111_1111</span>
     <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">0</span> power <span class="cicada-nymph-number">1</span> mul
     <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">1</span> power <span class="cicada-nymph-number">1</span> mul add
     <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">2</span> power <span class="cicada-nymph-number">1</span> mul add
     <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">3</span> power <span class="cicada-nymph-number">1</span> mul add
     <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">4</span> power <span class="cicada-nymph-number">1</span> mul add
     <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">5</span> power <span class="cicada-nymph-number">1</span> mul add
     <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">6</span> power <span class="cicada-nymph-number">1</span> mul add
     <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">7</span> power <span class="cicada-nymph-number">1</span> mul add
     . . .l

     <span class="cicada-nymph-number">16</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">f_f</span>
     <span class="cicada-nymph-number">16</span> <span class="cicada-nymph-number">0</span> power <span class="cicada-nymph-number">15</span> mul
     <span class="cicada-nymph-number">16</span> <span class="cicada-nymph-number">1</span> power <span class="cicada-nymph-number">15</span> mul add
     . . .l

     <span class="cicada-nymph-number">100</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">111</span>
     <span class="cicada-nymph-number">100</span> <span class="cicada-nymph-number">0</span> power <span class="cicada-nymph-number">1</span> mul
     <span class="cicada-nymph-number">100</span> <span class="cicada-nymph-number">1</span> power <span class="cicada-nymph-number">1</span> mul add
     <span class="cicada-nymph-number">100</span> <span class="cicada-nymph-number">2</span> power <span class="cicada-nymph-number">1</span> mul add
     . . .l

     <span class="cicada-nymph-number">64</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">zzz</span>
     <span class="cicada-nymph-number">64</span> <span class="cicada-nymph-number">0</span> power <span class="cicada-nymph-number">35</span> mul
     <span class="cicada-nymph-number">64</span> <span class="cicada-nymph-number">1</span> power <span class="cicada-nymph-number">35</span> mul add
     <span class="cicada-nymph-number">64</span> <span class="cicada-nymph-number">2</span> power <span class="cicada-nymph-number">35</span> mul add
     . . .l

     <span class="cicada-nymph-number">36</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">zzzz</span>
     <span class="cicada-nymph-number">36</span> <span class="cicada-nymph-number">0</span> power <span class="cicada-nymph-number">35</span> mul
     <span class="cicada-nymph-number">36</span> <span class="cicada-nymph-number">1</span> power <span class="cicada-nymph-number">35</span> mul add
     <span class="cicada-nymph-number">36</span> <span class="cicada-nymph-number">2</span> power <span class="cicada-nymph-number">35</span> mul add
     <span class="cicada-nymph-number">36</span> <span class="cicada-nymph-number">3</span> power <span class="cicada-nymph-number">35</span> mul add
     . . .l

     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-title">test</span>,syntax,base#wild-integer-string,make-jojo
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* basic-REPL                          </span><span class="org-level-1"><span class="org-tag">:redefine:</span></span>
<span class="org-level-2">** </span><span class="org-level-2"><span class="bold">*rule-set,basic-REPL*</span></span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-number">1024</span> <span class="cicada-nymph-variable">*jo-size*</span> mul
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*size,rule-set,basic-REPL*</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>

   <span class="cicada-nymph-comment">&lt;&lt; for cursor &gt;&gt;</span>
   <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-allocate">allocate-memory</span> drop

   <span class="cicada-nymph-variable">*size,rule-set,basic-REPL*</span>
   <span class="cicada-nymph-allocate">allocate-memory</span>
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*rule-set,basic-REPL*</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>

   <span class="cicada-nymph-variable">*rule-set,basic-REPL*</span>
   <span class="cicada-nymph-variable">*rule-set,basic-REPL*</span> <span class="cicada-nymph-variable">*jo-size*</span> sub
   save
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** execute-word</span>
   * to protect exception-jo from be called from basic-REPL
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">execute-word</span>
     <span class="cicada-nymph-comment">&lt;&lt; word[address, length] -- unknown &gt;&gt;</span>
     dup2
     <span class="cicada-nymph-title">find-jo</span>,through-jo-link <span class="cicada-nymph-syntax-key-word">if</span>
       dup exception-jo? <span class="cicada-nymph-syntax-key-word">if</span>
         drop
         <span class="cicada-nymph-string">"* (execute-word) can not execute exception directly : "</span> .s
         .s .l
         <span class="cicada-nymph-end">end</span>
       <span class="cicada-nymph-syntax-key-word">then</span>
       <span class="cicada-nymph-comment">&lt;&lt; function &amp; primitive-function &amp; variable &gt;&gt;</span>
       xx|swap|x drop2
       execute-jo
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">else</span>
     <span class="cicada-nymph-string">"* (execute-word) meets undefined word : "</span> .s
     .s .l
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** word:bye?</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">word:bye?</span>
     <span class="cicada-nymph-comment">&lt;&lt; word[address, length] -- bool &gt;&gt;</span>
     <span class="cicada-nymph-string">"bye"</span> string-equal?
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** !bye,basic-REPL</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">!bye,basic-REPL</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     drop-syntax-stack
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-exception</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** syntax,bye,basic-REPL</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">syntax,bye,basic-REPL</span>
     <span class="cicada-nymph-comment">&lt;&lt; word:bye -- &gt;&gt;</span>
     drop2
     <span class="cicada-nymph-exception">!bye,basic-REPL</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** word:jo?</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">word:jo?</span>
     <span class="cicada-nymph-comment">&lt;&lt; word[address, length] -- bool &gt;&gt;</span>
     <span class="cicada-nymph-string">"jo"</span> string-equal?
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** syntax,jo,basic-REPL</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">syntax,jo,basic-REPL</span>
     <span class="cicada-nymph-comment">&lt;&lt; word:jo -- &gt;&gt;</span>
     drop2
     read-word-for-REPL
     <span class="cicada-nymph-save-local-variable-2">&gt;::word</span>
     <span class="cicada-nymph-comment">&lt;&lt; ::word find-jo if &gt;&gt;</span>
     <span class="cicada-nymph-fetch-local-variable-2">::word</span> <span class="cicada-nymph-title">find-jo</span>,through-jo-link <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-string">"* (syntax,jo,basic-REPL) meet undefined word after jo : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::word</span> .s .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** init,rule-set,basic-REPL</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">init,rule-set,basic-REPL</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-syntax-key-word">jo</span> integer-string? <span class="cicada-nymph-syntax-key-word">jo</span> string-&gt;integer       <span class="cicada-nymph-variable">*rule-set,basic-REPL*</span> add-rule
     <span class="cicada-nymph-syntax-key-word">jo</span> word:bye?       <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">syntax</span>,bye,basic-REPL <span class="cicada-nymph-variable">*rule-set,basic-REPL*</span> add-rule
     <span class="cicada-nymph-syntax-key-word">jo</span> word:jo?        <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">syntax</span>,jo,basic-REPL  <span class="cicada-nymph-variable">*rule-set,basic-REPL*</span> add-rule
     <span class="cicada-nymph-syntax-key-word">jo</span> base#wild-integer-string? <span class="cicada-nymph-syntax-key-word">jo</span> base#wild-integer-string-&gt;integer <span class="cicada-nymph-variable">*rule-set,basic-REPL*</span> add-rule
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-title">init</span>,rule-set,basic-REPL
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** basic-REPL</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">basic-REPL,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; unknown -- unknown &gt;&gt;</span>
     read-word-for-REPL
     dup2 find-syntax <span class="cicada-nymph-syntax-key-word">if</span>
       execute-jo
     <span class="cicada-nymph-syntax-key-word">else</span>
       execute-word
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">basic-REPL</span>,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">basic-REPL</span>
     <span class="cicada-nymph-comment">&lt;&lt; unknown -- unknown &gt;&gt;</span>
     prepare-for
       <span class="cicada-nymph-exception">!bye,basic-REPL</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-variable">*rule-set,basic-REPL*</span> push-syntax-stack
     <span class="cicada-nymph-title">basic-REPL</span>,loop
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   basic-REPL
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-number">0</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">111</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-number">0</span> power <span class="cicada-nymph-number">1</span> mul
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-number">1</span> power <span class="cicada-nymph-number">1</span> mul add
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-number">2</span> power <span class="cicada-nymph-number">1</span> mul add
   . .

   <span class="cicada-nymph-number">1</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">111</span>
   <span class="cicada-nymph-number">1</span> <span class="cicada-nymph-number">0</span> power <span class="cicada-nymph-number">1</span> mul
   <span class="cicada-nymph-number">1</span> <span class="cicada-nymph-number">1</span> power <span class="cicada-nymph-number">1</span> mul add
   <span class="cicada-nymph-number">1</span> <span class="cicada-nymph-number">2</span> power <span class="cicada-nymph-number">1</span> mul add
   . .

   <span class="cicada-nymph-number">10</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">123</span>
   _1_0__#_1__2_3_
   <span class="cicada-nymph-number">10</span> <span class="cicada-nymph-number">0</span> power <span class="cicada-nymph-number">3</span> mul
   <span class="cicada-nymph-number">10</span> <span class="cicada-nymph-number">1</span> power <span class="cicada-nymph-number">2</span> mul add
   <span class="cicada-nymph-number">10</span> <span class="cicada-nymph-number">2</span> power <span class="cicada-nymph-number">1</span> mul add
   . . .

   <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">1000</span>
   <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">_1000_</span>
   <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">0</span> power <span class="cicada-nymph-number">0</span> mul
   <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">1</span> power <span class="cicada-nymph-number">0</span> mul add
   <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">2</span> power <span class="cicada-nymph-number">0</span> mul add
   <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">3</span> power <span class="cicada-nymph-number">1</span> mul add
   . . .

   <span class="cicada-nymph-number">2</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">1111_1111</span>
   <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">0</span> power <span class="cicada-nymph-number">1</span> mul
   <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">1</span> power <span class="cicada-nymph-number">1</span> mul add
   <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">2</span> power <span class="cicada-nymph-number">1</span> mul add
   <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">3</span> power <span class="cicada-nymph-number">1</span> mul add
   <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">4</span> power <span class="cicada-nymph-number">1</span> mul add
   <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">5</span> power <span class="cicada-nymph-number">1</span> mul add
   <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">6</span> power <span class="cicada-nymph-number">1</span> mul add
   <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">7</span> power <span class="cicada-nymph-number">1</span> mul add
   . .

   <span class="cicada-nymph-number">16</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">f_f</span>
   <span class="cicada-nymph-number">16</span> <span class="cicada-nymph-number">0</span> power <span class="cicada-nymph-number">15</span> mul
   <span class="cicada-nymph-number">16</span> <span class="cicada-nymph-number">1</span> power <span class="cicada-nymph-number">15</span> mul add
   . .

   <span class="cicada-nymph-number">100</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">111</span>
   <span class="cicada-nymph-number">100</span> <span class="cicada-nymph-number">0</span> power <span class="cicada-nymph-number">1</span> mul
   <span class="cicada-nymph-number">100</span> <span class="cicada-nymph-number">1</span> power <span class="cicada-nymph-number">1</span> mul add
   <span class="cicada-nymph-number">100</span> <span class="cicada-nymph-number">2</span> power <span class="cicada-nymph-number">1</span> mul add
   . .

   <span class="cicada-nymph-number">64</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">zzz</span>
   <span class="cicada-nymph-number">64</span> <span class="cicada-nymph-number">0</span> power <span class="cicada-nymph-number">35</span> mul
   <span class="cicada-nymph-number">64</span> <span class="cicada-nymph-number">1</span> power <span class="cicada-nymph-number">35</span> mul add
   <span class="cicada-nymph-number">64</span> <span class="cicada-nymph-number">2</span> power <span class="cicada-nymph-number">35</span> mul add
   . .

   <span class="cicada-nymph-number">36</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">zzzz</span>
   <span class="cicada-nymph-number">36</span> <span class="cicada-nymph-number">0</span> power <span class="cicada-nymph-number">35</span> mul
   <span class="cicada-nymph-number">36</span> <span class="cicada-nymph-number">1</span> power <span class="cicada-nymph-number">35</span> mul add
   <span class="cicada-nymph-number">36</span> <span class="cicada-nymph-number">2</span> power <span class="cicada-nymph-number">35</span> mul add
   <span class="cicada-nymph-number">36</span> <span class="cicada-nymph-number">3</span> power <span class="cicada-nymph-number">35</span> mul add
   . .
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* </span><span class="org-level-1"><span class="bold">*rule-set,basic-REPL*</span></span><span class="org-level-1"> : if &amp; else &amp; then</span>
<span class="org-level-2">** </span><span class="org-todo">note</span><span class="org-level-2"> ending jo</span>
   * you do not need to use ending jo
     in code blocks formed by if else then
     because in a REPL
     things are different from function body
     and there is no such thing as
     the end of a function body in the REPL
<span class="org-level-2">** syntax,if,basic-REPL,meet-true</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">syntax,if,basic-REPL,meet-true,else</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     read-word-for-REPL
     <span class="cicada-nymph-string">"then"</span> string-equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">syntax</span>,if,basic-REPL,meet-true,else
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">syntax,if,basic-REPL,meet-true</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     read-word-for-REPL
     dup2 <span class="cicada-nymph-string">"then"</span> string-equal? <span class="cicada-nymph-syntax-key-word">if</span>
       drop2
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     dup2 <span class="cicada-nymph-string">"else"</span> string-equal? <span class="cicada-nymph-syntax-key-word">if</span>
       drop2
       <span class="cicada-nymph-title">syntax</span>,if,basic-REPL,meet-true,else
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     dup2 find-syntax <span class="cicada-nymph-syntax-key-word">if</span>
       execute-jo
     <span class="cicada-nymph-syntax-key-word">else</span>
       execute-word
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">syntax</span>,if,basic-REPL,meet-true
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** syntax,if,basic-REPL,meet-false</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">syntax,if,basic-REPL,meet-false,else</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     read-word-for-REPL
     dup2 <span class="cicada-nymph-string">"then"</span> string-equal? <span class="cicada-nymph-syntax-key-word">if</span>
       drop2
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     dup2 find-syntax <span class="cicada-nymph-syntax-key-word">if</span>
       execute-jo
     <span class="cicada-nymph-syntax-key-word">else</span>
       execute-word
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">syntax</span>,if,basic-REPL,meet-false,else
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">syntax,if,basic-REPL,meet-false</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     read-word-for-REPL
     dup2 <span class="cicada-nymph-string">"then"</span> string-equal? <span class="cicada-nymph-syntax-key-word">if</span>
       drop2
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     dup2 <span class="cicada-nymph-string">"else"</span> string-equal? <span class="cicada-nymph-syntax-key-word">if</span>
       drop2
       <span class="cicada-nymph-title">syntax</span>,if,basic-REPL,meet-false,else
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     drop2
     <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">syntax</span>,if,basic-REPL,meet-false
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** syntax,if,basic-REPL</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">syntax,if,basic-REPL</span>
     <span class="cicada-nymph-comment">&lt;&lt; bool, word:if -- &gt;&gt;</span>
     drop2 <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-title">syntax</span>,if,basic-REPL,meet-true
     <span class="cicada-nymph-syntax-key-word">else</span>
       <span class="cicada-nymph-title">syntax</span>,if,basic-REPL,meet-false
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** add-rule to </span><span class="org-level-2"><span class="bold">*rule-set,basic-REPL*</span></span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-syntax-key-word">jo</span> word:if? <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">syntax</span>,if,basic-REPL <span class="cicada-nymph-variable">*rule-set,basic-REPL*</span> add-rule
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   one? <span class="cicada-nymph-syntax-key-word">if</span>
     <span class="cicada-nymph-number">111</span> . .l
   <span class="cicada-nymph-syntax-key-word">then</span>

   one? <span class="cicada-nymph-syntax-key-word">if</span>
     <span class="cicada-nymph-number">111</span> . .l
   <span class="cicada-nymph-syntax-key-word">else</span>
     <span class="cicada-nymph-number">666</span> . .l
   <span class="cicada-nymph-syntax-key-word">then</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* </span><span class="org-level-1"><span class="bold">*rule-set,basic-REPL*</span></span><span class="org-level-1"> : double-quote</span>
<span class="org-level-2">** </span><span class="org-level-2"><span class="bold">*circular-string-area*</span></span>
   * no length in the area anymore
     [not like the primitive-string-area]
   * and ending each string here with a 0
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-number">1024</span> <span class="cicada-nymph-number">1024</span> mul
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*circular-string-area,size*</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>


   <span class="cicada-nymph-variable">*circular-string-area,size*</span> <span class="cicada-nymph-allocate">allocate-memory</span>
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*circular-string-area*</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>

   <span class="cicada-nymph-variable">*circular-string-area*</span>
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*current-free-address,circular-string-area*</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** save-into,circular-string-area</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">save-into,circular-string-area</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- &gt;&gt;</span>
     dup <span class="cicada-nymph-variable">*current-free-address,circular-string-area*</span> add
     <span class="cicada-nymph-variable">*circular-string-area,size*</span> <span class="cicada-nymph-variable">*circular-string-area*</span> add
     greater-or-equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-variable">*circular-string-area*</span>
       <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*current-free-address,circular-string-area*</span>
       save
     <span class="cicada-nymph-syntax-key-word">then</span>
     tuck
     <span class="cicada-nymph-variable">*current-free-address,circular-string-area*</span>
     string-&gt;buffer!
     <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*current-free-address,circular-string-area*</span>
     add-save
     <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-variable">*current-free-address,circular-string-area*</span>
     save-byte
     <span class="cicada-nymph-number">1</span> <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*current-free-address,circular-string-area*</span>
     add-save
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** syntax,double-quote,basic-REPL</span>
   * in ASCII encode double-quote is 34
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">syntax,double-quote,basic-REPL,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; cursor -- cursor &gt;&gt;</span>
     read-byte
     dup <span class="cicada-nymph-number">34</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
       drop
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     over save-byte
     add1
     <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">syntax</span>,double-quote,basic-REPL,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">syntax,double-quote,basic-REPL</span>
     <span class="cicada-nymph-comment">&lt;&lt; word:double-quote -- string[address, length] &gt;&gt;</span>
     drop2
     <span class="cicada-nymph-number">1024</span> <span class="cicada-nymph-number">2</span> mul <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:buffer</span>
     <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
     <span class="cicada-nymph-title">syntax</span>,double-quote,basic-REPL,loop
     <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
     <span class="cicada-nymph-variable">*current-free-address,circular-string-area*</span> <span class="cicada-nymph-save-local-variable-1">&gt;:address</span>
     <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> sub dup <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>
     <span class="cicada-nymph-title">save-into</span>,circular-string-area
     <span class="cicada-nymph-fetch-local-variable-1">:address</span>
     <span class="cicada-nymph-fetch-local-variable-1">:length</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** add-rule to </span><span class="org-level-2"><span class="bold">*rule-set,basic-REPL*</span></span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-syntax-key-word">jo</span> word:double-quote? <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">syntax</span>,double-quote,basic-REPL <span class="cicada-nymph-variable">*rule-set,basic-REPL*</span> add-rule
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   one? <span class="cicada-nymph-syntax-key-word">if</span>
     <span class="cicada-nymph-string">"111"</span> .s .l
   <span class="cicada-nymph-syntax-key-word">then</span>

   one? <span class="cicada-nymph-syntax-key-word">if</span>
     <span class="cicada-nymph-string">"111"</span> .s .l
   <span class="cicada-nymph-syntax-key-word">else</span>
     <span class="cicada-nymph-string">"___"</span> .s .l
   <span class="cicada-nymph-syntax-key-word">then</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* </span><span class="org-level-1"><span class="bold">*rule-set,basic-REPL*</span></span><span class="org-level-1"> : address</span>
<span class="org-level-2">** syntax,address,basic-REPL</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-number">0</span>
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*syntax,address,basic-REPL,stack-balancer*</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">syntax,address,basic-REPL</span>
     <span class="cicada-nymph-comment">&lt;&lt; word:address -- address &gt;&gt;</span>
     drop2
     read-word-for-REPL
     <span class="cicada-nymph-save-local-variable-2">&gt;::word</span>
     <span class="cicada-nymph-comment">&lt;&lt; ::word find-jo if &gt;&gt;</span>
     <span class="cicada-nymph-fetch-local-variable-2">::word</span> <span class="cicada-nymph-title">find-jo</span>,through-jo-link <span class="cicada-nymph-syntax-key-word">if</span>
     <span class="cicada-nymph-syntax-key-word">else</span>
       <span class="cicada-nymph-string">"* (syntax,address,basic-REPL) meet undefined word : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::word</span> .s .l
       <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*syntax,address,basic-REPL,stack-balancer*</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:jo</span>
     <span class="cicada-nymph-fetch-local-variable-1">:jo</span> variable-jo? <span class="cicada-nymph-syntax-key-word">if</span>
     <span class="cicada-nymph-syntax-key-word">else</span>
       <span class="cicada-nymph-string">"* (syntax,address,basic-REPL) meet a not variable-jo : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::word</span> .s .l
       <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*syntax,address,basic-REPL,stack-balancer*</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-1">:jo</span> <span class="cicada-nymph-variable">*jo-size*</span> add
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** add-rule to </span><span class="org-level-2"><span class="bold">*rule-set,basic-REPL*</span></span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-syntax-key-word">jo</span> word:address? <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">syntax</span>,address,basic-REPL <span class="cicada-nymph-variable">*rule-set,basic-REPL*</span> add-rule
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-number">666</span>
   <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*syntax,address,basic-REPL,stack-balancer*</span> save
   <span class="cicada-nymph-variable">*syntax,address,basic-REPL,stack-balancer*</span>

   <span class="cicada-nymph-syntax-key-word">address</span> kkk
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* stack-REPL</span>
<span class="org-level-2">** </span><span class="org-todo">note</span>
   * print argument-stack in every loop
<span class="org-level-2">** print-argument-stack</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">print-argument-stack,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; address, counter -- &gt;&gt;</span>
     dup zero? <span class="cicada-nymph-syntax-key-word">if</span>
       drop2
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     sub1 swap
       dup fetch .
     <span class="cicada-nymph-variable">*jo-size*</span> add
     swap
     <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">print-argument-stack</span>,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">print-argument-stack</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     snapshot-the-stack-pointer
     <span class="cicada-nymph-variable">*the-stack-pointer-snapshot*</span>
     <span class="cicada-nymph-variable">*the-stack*</span> greater-or-equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-variable">*the-stack*</span>   <span class="cicada-nymph-comment">&lt;&lt; address as return value &gt;&gt;</span>
       <span class="cicada-nymph-variable">*the-stack-pointer-snapshot*</span> <span class="cicada-nymph-variable">*the-stack*</span> sub
       <span class="cicada-nymph-variable">*jo-size*</span> div <span class="cicada-nymph-comment">&lt;&lt; counter as return value &gt;&gt;</span>
       <span class="cicada-nymph-title">print-argument-stack</span>,loop
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-string">"below the stack "</span> .s
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** print-argument-stack,pretty</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">print-argument-stack,pretty</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     snapshot-the-stack-pointer
     .l
     <span class="cicada-nymph-string">"  * "</span> .s
        <span class="cicada-nymph-variable">*the-stack-pointer-snapshot*</span>
        <span class="cicada-nymph-variable">*the-stack*</span> sub
        <span class="cicada-nymph-comment">&lt;&lt; ad hoc for the BUG of div &gt;&gt;</span>
        dup negative? <span class="cicada-nymph-syntax-key-word">if</span>
          negate
          <span class="cicada-nymph-variable">*jo-size*</span> div
          negate
        <span class="cicada-nymph-syntax-key-word">else</span>
          <span class="cicada-nymph-variable">*jo-size*</span> div
        <span class="cicada-nymph-syntax-key-word">then</span>
        .i
     <span class="cicada-nymph-string">" * "</span> .s
     <span class="cicada-nymph-string">" -- "</span> .s
       print-argument-stack
     <span class="cicada-nymph-string">"--"</span> .s
     .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** stack-REPL</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">stack-REPL,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; unknown -- unknown &gt;&gt;</span>
     read-word-for-REPL
     dup2 find-syntax <span class="cicada-nymph-syntax-key-word">if</span>
       execute-jo
     <span class="cicada-nymph-syntax-key-word">else</span>
       execute-word
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-title">print-argument-stack</span>,pretty
     <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">stack-REPL</span>,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">stack-REPL</span>
     <span class="cicada-nymph-comment">&lt;&lt; unknown -- unknown &gt;&gt;</span>
     prepare-for
       <span class="cicada-nymph-exception">!bye,basic-REPL</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-variable">*rule-set,basic-REPL*</span> push-syntax-stack
     <span class="cicada-nymph-title">stack-REPL</span>,loop
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">     #+end_src
</span><span class="org-level-1">* -----------------------------------</span>
<span class="org-level-1">* </span><span class="org-done">test</span><span class="org-level-1"> endianness of n-fetch &amp; n-save</span>
  * big-endian is used
    in memory
    <span class="org-table">| value-1 |</span>
    <span class="org-table">| value-2 |</span>
    <span class="org-table">| value-3 |</span>
    on stack
    &lt;&lt; value-1, value-2, value-3 &gt;&gt;
<span class="org-block-begin-line">  #+begin_src cicada-nymph
</span>  <span class="cicada-nymph-number">3</span> <span class="cicada-nymph-variable">*jo-size*</span> mul <span class="cicada-nymph-allocate">allocate-memory</span>
  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*t*</span>
  <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>

  <span class="cicada-nymph-number">1</span> <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">3</span> <span class="cicada-nymph-variable">*t*</span> <span class="cicada-nymph-number">3</span> n-save

  <span class="cicada-nymph-comment">&lt;&lt; re-occur when fetching through &gt;&gt;</span>
  <span class="cicada-nymph-variable">*t*</span> fetch .
  <span class="cicada-nymph-variable">*t*</span> <span class="cicada-nymph-variable">*jo-size*</span> add fetch .
  <span class="cicada-nymph-variable">*t*</span> <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">2</span> mul add fetch .

  <span class="cicada-nymph-variable">*t*</span> <span class="cicada-nymph-number">3</span> n-fetch
<span class="org-block-end-line">  #+end_src
</span><span class="org-level-1">* rule-set</span>
<span class="org-level-2">** list-rule</span>
   * &#26368;&#24460;&#23531;&#21040;&#35215;&#21063;&#38598;&#21512;&#35023;&#30340; &#34987;&#26368;&#20808;&#25171;&#21360;&#20986;&#20358;
   * &#19979;&#38754;&#30340;&#25171;&#21360;&#26041;&#24335; &#30475;&#20284;&#26377;&#20123;&#19981;&#31777;&#28500;
     &#26159;&#22240;&#29234; &#25105;&#36996;&#27794;&#26377; integer-&gt;string &#36889;&#27171;&#30340;&#20989;&#25976;
     [&#22240;&#29234; &#27794;&#26377;&#23565;&#23383;&#31526;&#20018;&#30340;&#21205;&#24907;&#20839;&#23384;&#31649;&#29702;]
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">list-rule,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; rule-set, cursor, counter -- &gt;&gt;</span>
     xx|over|x equal? <span class="cicada-nymph-syntax-key-word">if</span>
       drop drop2
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-string">"  * "</span> .s
     <span class="cicada-nymph-string">"("</span> .s
     add1 dup .i
     <span class="cicada-nymph-string">")"</span> .s .l
     swap
       dup cursor-&gt;predicate
       <span class="cicada-nymph-string">"    "</span> .s jo-&gt;name .s .l
       dup cursor-&gt;function
       <span class="cicada-nymph-string">"    "</span> .s jo-&gt;name .s .l
       <span class="cicada-nymph-variable">*jo-size*</span> sub <span class="cicada-nymph-variable">*jo-size*</span> sub
     swap
     <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">list-rule</span>,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">list-rule</span>
     <span class="cicada-nymph-comment">&lt;&lt; rule-set -- &gt;&gt;</span>
     dup <span class="cicada-nymph-title">rule-set</span>,fetch-border
     <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-title">list-rule</span>,loop
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** sub-rule</span>
   * firstly
     in (sub-rule,loop)
     cursor move from border down to address of rule-set
     secondly
     in (sub-rule,move)
     cursor move from founded place up to border
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">sub-rule,move-one</span>
     <span class="cicada-nymph-comment">&lt;&lt; cursor -- &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-number">2</span> n-fetch
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">2</span> mul sub
     <span class="cicada-nymph-number">2</span> n-save
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">sub-rule,move</span>
     <span class="cicada-nymph-comment">&lt;&lt; rule-set, cursor -- &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:rule-set</span>
     <span class="cicada-nymph-fetch-local-variable-1">:rule-set</span> <span class="cicada-nymph-title">rule-set</span>,fetch-border <span class="cicada-nymph-save-local-variable-1">&gt;:border</span>
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:border</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-fetch-local-variable-1">:border</span> <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">2</span> mul sub
       <span class="cicada-nymph-fetch-local-variable-1">:rule-set</span>
       <span class="cicada-nymph-title">rule-set</span>,save-border
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-title">sub-rule</span>,move-one
     <span class="cicada-nymph-fetch-local-variable-1">:rule-set</span>
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">2</span> mul add
     <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">sub-rule</span>,move
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">sub-rule,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; rule[predicate, function], rule-set, cursor -- &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:rule-set</span>
     <span class="cicada-nymph-save-local-variable-2">&gt;::rule</span>
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:rule-set</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-2">::rule</span> <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> cursor-&gt;rule equal2? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-fetch-local-variable-1">:rule-set</span> <span class="cicada-nymph-fetch-local-variable-1">:cursor</span>
       <span class="cicada-nymph-title">sub-rule</span>,move
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-2">::rule</span>
     <span class="cicada-nymph-fetch-local-variable-1">:rule-set</span>
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">2</span> mul sub
     <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">sub-rule</span>,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">sub-rule</span>
     <span class="cicada-nymph-comment">&lt;&lt; rule[predicate, function], rule-set -- &gt;&gt;</span>
     dup <span class="cicada-nymph-title">rule-set</span>,fetch-border
     <span class="cicada-nymph-title">sub-rule</span>,loop
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-variable">*rule-set,basic-REPL*</span> list-rule

   <span class="cicada-nymph-syntax-key-word">jo</span> word:address?
   <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">syntax</span>,address,basic-REPL
   <span class="cicada-nymph-variable">*rule-set,basic-REPL*</span> add-rule
   <span class="cicada-nymph-syntax-key-word">jo</span> word:double-quote?
   <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">syntax</span>,double-quote,basic-REPL
   <span class="cicada-nymph-variable">*rule-set,basic-REPL*</span> add-rule
   <span class="cicada-nymph-variable">*rule-set,basic-REPL*</span> list-rule

   <span class="cicada-nymph-syntax-key-word">jo</span> word:address?
   <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">syntax</span>,address,basic-REPL
   <span class="cicada-nymph-variable">*rule-set,basic-REPL*</span> sub-rule
   <span class="cicada-nymph-variable">*rule-set,basic-REPL*</span> list-rule

   <span class="cicada-nymph-syntax-key-word">jo</span> word:double-quote?
   <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">syntax</span>,double-quote,basic-REPL
   <span class="cicada-nymph-variable">*rule-set,basic-REPL*</span> sub-rule
   <span class="cicada-nymph-variable">*rule-set,basic-REPL*</span> list-rule
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* -----------------------------------</span>
<span class="org-level-1">* eval-string</span>
<span class="org-level-2">** </span><span class="org-todo">note</span>
   * eval-string is implemented by doing side-effect on reading-stack
     this is because syntax extension system is implemented by reader-macro
   * by implementing eval-string this way
     i can easily change the syntax be used to eval a string
<span class="org-level-2">** eval-string</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">eval-string,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; unknown -- unknown &gt;&gt;</span>
     tos-reading-stack space-string? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     read-word-for-REPL
     dup2 find-syntax <span class="cicada-nymph-syntax-key-word">if</span>
       execute-jo
     <span class="cicada-nymph-syntax-key-word">else</span>
       execute-word
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">eval-string</span>,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">eval-string</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- unknown &gt;&gt;</span>
     push-reading-stack
     <span class="cicada-nymph-title">eval-string</span>,loop
     drop-reading-stack
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-string">"1 2 3 add add . "</span> eval-string
   <span class="cicada-nymph-string">"1 2 3 add add ."</span> eval-string
   <span class="cicada-nymph-string">": k 1 2 3 add add . end ; define-function k"</span> eval-string
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* define-variable</span>
<span class="org-level-2">** syntax,double-quote,define-variable</span>
   * in ASCII encode double-quote is 34
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">syntax,double-quote,define-variable,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; cursor -- cursor &gt;&gt;</span>
     read-byte
     dup <span class="cicada-nymph-number">34</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
       drop
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     over save-byte
     add1
     <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">syntax</span>,double-quote,define-variable,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">syntax,double-quote,define-variable</span>
     <span class="cicada-nymph-comment">&lt;&lt; word:double-quote -- string[address, length] &gt;&gt;</span>
     drop2
     <span class="cicada-nymph-number">1024</span> <span class="cicada-nymph-number">2</span> mul <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:buffer</span>
     <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
     <span class="cicada-nymph-title">syntax</span>,double-quote,define-variable,loop
     <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
     <span class="cicada-nymph-variable">*current-free-address,primitive-string-area*</span> add2 <span class="cicada-nymph-save-local-variable-1">&gt;:address</span>
     <span class="cicada-nymph-fetch-local-variable-1">:buffer</span>
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:buffer</span> sub dup <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>
     <span class="cicada-nymph-title">save-into</span>,primitive-string-area
     <span class="cicada-nymph-fetch-local-variable-1">:address</span>
     <span class="cicada-nymph-fetch-local-variable-1">:length</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** define-variable</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">define-variable</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-2">&gt;::string</span>
     <span class="cicada-nymph-fetch-local-variable-2">::string</span> <span class="cicada-nymph-title">string-head</span>,word <span class="cicada-nymph-save-local-variable-2">&gt;::variable-name</span>
     <span class="cicada-nymph-fetch-local-variable-2">::string</span> <span class="cicada-nymph-title">string-tail</span>,word <span class="cicada-nymph-save-local-variable-2">&gt;::variable-body</span>

     snapshot-the-stack-pointer
     <span class="cicada-nymph-variable">*the-stack-pointer-snapshot*</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:old-snapshot</span>
     <span class="cicada-nymph-syntax-key-word">jo</span> word:double-quote? <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">syntax</span>,double-quote,define-variable <span class="cicada-nymph-variable">*rule-set,basic-REPL*</span> add-rule
     <span class="cicada-nymph-fetch-local-variable-2">::variable-body</span> eval-string
     <span class="cicada-nymph-syntax-key-word">jo</span> word:double-quote? <span class="cicada-nymph-syntax-key-word">jo</span> <span class="cicada-nymph-title">syntax</span>,double-quote,define-variable <span class="cicada-nymph-variable">*rule-set,basic-REPL*</span> sub-rule

     snapshot-the-stack-pointer
     <span class="cicada-nymph-variable">*the-stack-pointer-snapshot*</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:new-snapshot</span>

     <span class="cicada-nymph-fetch-local-variable-1">:new-snapshot</span> <span class="cicada-nymph-fetch-local-variable-1">:old-snapshot</span> sub

     dup negative? <span class="cicada-nymph-syntax-key-word">if</span>
       negate <span class="cicada-nymph-variable">*jo-size*</span> div
       <span class="cicada-nymph-string">"* (define-variable) fail to define variable : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::variable-name</span> .s .l
       <span class="cicada-nymph-string">"  because after eval the following variable-body"</span> .s .l
       <span class="cicada-nymph-string">"  the stack is "</span> .s .i <span class="cicada-nymph-string">" below what it use to be"</span> .s .l
       <span class="cicada-nymph-fetch-local-variable-2">::variable-body</span> .s .l
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     dup zero? <span class="cicada-nymph-syntax-key-word">if</span>
       drop
       <span class="cicada-nymph-string">"* (define-variable) fail to define variable : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::variable-name</span> .s .l
       <span class="cicada-nymph-string">"  because after eval the following variable-body"</span> .s .l
       <span class="cicada-nymph-string">"  the stack is still where it use to be"</span> .s .l
       <span class="cicada-nymph-fetch-local-variable-2">::variable-body</span> .s .l
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>

     <span class="cicada-nymph-variable">*jo-size*</span> div <span class="cicada-nymph-save-local-variable-1">&gt;:variable-length</span>

     <span class="cicada-nymph-fetch-local-variable-1">:variable-length</span>
       <span class="cicada-nymph-title">save-into</span>,jo-area

     <span class="cicada-nymph-variable">*current-free-address,primitive-string-area*</span>
       <span class="cicada-nymph-title">save-into</span>,jo-area
     <span class="cicada-nymph-fetch-local-variable-2">::variable-name</span>
       <span class="cicada-nymph-title">save-into</span>,primitive-string-area

     <span class="cicada-nymph-variable">*first-jo-in-jotionary*</span>
     jo-&gt;link
       <span class="cicada-nymph-title">save-into</span>,jo-area

     <span class="cicada-nymph-variable">*current-free-address,jo-area*</span>
     dup <span class="cicada-nymph-title">jo</span>,save-into,name-hash-table
     <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*first-jo-in-jotionary*</span> save

     <span class="cicada-nymph-variable">*explainer,variable*</span>
       <span class="cicada-nymph-title">save-into</span>,jo-area

     <span class="cicada-nymph-variable">*current-free-address,jo-area*</span>
     <span class="cicada-nymph-fetch-local-variable-1">:variable-length</span>
     n-save

     <span class="cicada-nymph-fetch-local-variable-1">:variable-length</span> <span class="cicada-nymph-variable">*jo-size*</span> mul
     <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*current-free-address,jo-area*</span>
     add-save

     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*numbers:define-variable*</span>
     <span class="cicada-nymph-number">1</span> <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">3</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>
   <span class="cicada-nymph-variable">*numbers:define-variable*</span> . . .
   <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*numbers:define-variable*</span> fetch .

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*string:define-variable*</span>
     <span class="cicada-nymph-string">"define-variable"</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>
   <span class="cicada-nymph-variable">*string:define-variable*</span> .s

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">kkk</span>
     <span class="cicada-nymph-number">1</span> . <span class="cicada-nymph-number">2</span> . <span class="cicada-nymph-number">3</span> .
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>

   <span class="cicada-nymph-number">1</span> <span class="cicada-nymph-number">2</span> <span class="cicada-nymph-number">3</span>
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">kkk</span>
     . . .
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* -----------------------------------</span>
<span class="org-level-1">* constant for linux                  </span><span class="org-level-1"><span class="org-tag">:linux:</span></span>
<span class="org-level-2">** init-syscall-number                </span><span class="org-level-2"><span class="org-tag">:32bit:</span></span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">4</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
     <span class="cicada-nymph-number">5</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,open:</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
     <span class="cicada-nymph-number">6</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,close:</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
     <span class="cicada-nymph-number">3</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,read:</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
     <span class="cicada-nymph-number">4</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,write:</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
     <span class="cicada-nymph-number">9</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,link:</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
     <span class="cicada-nymph-number">10</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,unlink:</span>     <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
     <span class="cicada-nymph-number">39</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,mkdir:</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
     <span class="cicada-nymph-number">40</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,rmdir:</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
     <span class="cicada-nymph-number">141</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,getdents:</span>   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
     <span class="cicada-nymph-number">220</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,getdents64:</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
     <span class="cicada-nymph-number">106</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,stat:</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
     <span class="cicada-nymph-number">1</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,exit:</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
     <span class="cicada-nymph-number">43</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,times:</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
     <span class="cicada-nymph-number">20</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,getpid:</span>     <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
     <span class="cicada-nymph-number">183</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,getcwd:</span>     <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
     <span class="cicada-nymph-number">12</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,chdir:</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
   <span class="cicada-nymph-syntax-key-word">then</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** init-syscall-number                </span><span class="org-level-2"><span class="org-tag">:64bit:</span></span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">8</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
     <span class="cicada-nymph-number">2</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,open:</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
     <span class="cicada-nymph-number">3</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,close:</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
     <span class="cicada-nymph-number">0</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,read:</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
     <span class="cicada-nymph-number">1</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,write:</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
     <span class="cicada-nymph-number">86</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,link:</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
     <span class="cicada-nymph-number">87</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,unlink:</span>     <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
     <span class="cicada-nymph-number">83</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,mkdir:</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
     <span class="cicada-nymph-number">84</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,rmdir:</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
     <span class="cicada-nymph-number">78</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,getdents:</span>   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
     <span class="cicada-nymph-number">217</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,getdents64:</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
     <span class="cicada-nymph-number">4</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,stat:</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
     <span class="cicada-nymph-number">60</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,exit:</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
     <span class="cicada-nymph-number">100</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,times:</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
     <span class="cicada-nymph-number">39</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,getpid:</span>     <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
     <span class="cicada-nymph-number">79</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,getcwd:</span>     <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
     <span class="cicada-nymph-number">80</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">:syscall-number,chdir:</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
   <span class="cicada-nymph-syntax-key-word">then</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** error-code-&gt;string</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">error-code-&gt;string</span>
     <span class="cicada-nymph-comment">&lt;&lt; error-code -- string[address, length] &gt;&gt;</span>
     dup <span class="cicada-nymph-number">-1</span>  equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EPERM   &gt;&gt;</span>   <span class="cicada-nymph-string">"Operation not permitted "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-2</span>  equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; ENOENT  &gt;&gt;</span>   <span class="cicada-nymph-string">"No such file or directory "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-3</span>  equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; ESRCH   &gt;&gt;</span>   <span class="cicada-nymph-string">"No such process "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-4</span>  equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EINTR   &gt;&gt;</span>   <span class="cicada-nymph-string">"Interrupted system call "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-5</span>  equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EIO     &gt;&gt;</span>   <span class="cicada-nymph-string">"I/O error "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-6</span>  equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; ENXIO   &gt;&gt;</span>   <span class="cicada-nymph-string">"No such device or address "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-7</span>  equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; E2BIG   &gt;&gt;</span>   <span class="cicada-nymph-string">"Argument list too long "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-8</span>  equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; ENOEXEC &gt;&gt;</span>   <span class="cicada-nymph-string">"Exec format error "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-9</span>  equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EBADF   &gt;&gt;</span>   <span class="cicada-nymph-string">"Bad file number "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-10</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; ECHILD  &gt;&gt;</span>   <span class="cicada-nymph-string">"No child processes "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-11</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EAGAIN  &gt;&gt;</span>   <span class="cicada-nymph-string">"Try again "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-12</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; ENOMEM  &gt;&gt;</span>   <span class="cicada-nymph-string">"Out of memory "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-13</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EACCES  &gt;&gt;</span>   <span class="cicada-nymph-string">"Permission denied "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-14</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EFAULT  &gt;&gt;</span>   <span class="cicada-nymph-string">"Bad address "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-15</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; ENOTBLK &gt;&gt;</span>   <span class="cicada-nymph-string">"Block device required "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-16</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EBUSY   &gt;&gt;</span>   <span class="cicada-nymph-string">"Device or resource busy "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-17</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EEXIST  &gt;&gt;</span>   <span class="cicada-nymph-string">"File exists "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-18</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EXDEV   &gt;&gt;</span>   <span class="cicada-nymph-string">"Cross-device link "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-19</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; ENODEV  &gt;&gt;</span>   <span class="cicada-nymph-string">"No such device "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-20</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; ENOTDIR &gt;&gt;</span>   <span class="cicada-nymph-string">"Not a directory "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-21</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EISDIR  &gt;&gt;</span>   <span class="cicada-nymph-string">"Is a directory "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-22</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EINVAL  &gt;&gt;</span>   <span class="cicada-nymph-string">"Invalid argument "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-23</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; ENFILE  &gt;&gt;</span>   <span class="cicada-nymph-string">"File table overflow "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-24</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EMFILE  &gt;&gt;</span>   <span class="cicada-nymph-string">"Too many open files "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-25</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; ENOTTY  &gt;&gt;</span>   <span class="cicada-nymph-string">"Not a typewriter "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-26</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; ETXTBSY &gt;&gt;</span>   <span class="cicada-nymph-string">"Text file busy "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-27</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EFBIG   &gt;&gt;</span>   <span class="cicada-nymph-string">"File too large "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-28</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; ENOSPC  &gt;&gt;</span>   <span class="cicada-nymph-string">"No space left on device "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-29</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; ESPIPE  &gt;&gt;</span>   <span class="cicada-nymph-string">"Illegal seek "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-30</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EROFS   &gt;&gt;</span>   <span class="cicada-nymph-string">"Read-only file system "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-31</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EMLINK  &gt;&gt;</span>   <span class="cicada-nymph-string">"Too many links "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-32</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EPIPE   &gt;&gt;</span>   <span class="cicada-nymph-string">"Broken pipe "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-33</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; EDOM    &gt;&gt;</span>   <span class="cicada-nymph-string">"Math argument out of domain of func "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">-34</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop  <span class="cicada-nymph-comment">&lt;&lt; ERANGE  &gt;&gt;</span>   <span class="cicada-nymph-string">"Math result not representable "</span> <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-string">"unknow error-code : "</span> .s .i .l
     <span class="cicada-nymph-string">"* (error-code-&gt;string) fail"</span> <span class="cicada-nymph-comment">&lt;&lt; to balance the argument-stack &gt;&gt;</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** file-type-code-&gt;string</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">file-type-code-&gt;string</span>
     <span class="cicada-nymph-comment">&lt;&lt; file-type-code -- string[address, length] &gt;&gt;</span>
     dup <span class="cicada-nymph-number">1</span>  equal?  <span class="cicada-nymph-comment">&lt;&lt; DT_FIFO  &gt;&gt;</span>  <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"named pipe i.e. FIFO"</span>  <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">2</span>  equal?  <span class="cicada-nymph-comment">&lt;&lt; DT_CHR   &gt;&gt;</span>  <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"character device"</span>      <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">4</span>  equal?  <span class="cicada-nymph-comment">&lt;&lt; DT_DIR   &gt;&gt;</span>  <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"directory"</span>             <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">6</span>  equal?  <span class="cicada-nymph-comment">&lt;&lt; DT_BLK   &gt;&gt;</span>  <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"block device"</span>          <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">8</span>  equal?  <span class="cicada-nymph-comment">&lt;&lt; DT_REG   &gt;&gt;</span>  <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"regular file"</span>          <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">10</span> equal?  <span class="cicada-nymph-comment">&lt;&lt; DT_LNK   &gt;&gt;</span>  <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"symbolic link"</span>         <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">12</span> equal?  <span class="cicada-nymph-comment">&lt;&lt; DT_SOCK  &gt;&gt;</span>  <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"UNIX domain socket"</span>    <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     drop
     <span class="cicada-nymph-string">"unknow file type"</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* -----------------------------------</span>
<span class="org-level-1">* jotionary</span>
<span class="org-level-2">** jotionary,list-by-jo-predicate</span>
   * &#26368;&#24460;&#23531;&#21040;&#29664;&#20856;&#35023;&#30340; &#34987;&#26368;&#20808;&#25171;&#21360;&#20986;&#20358;
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">jotionary,list-by-jo-predicate,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; jo-predicate, counter, jo -- total &gt;&gt;</span>
     dup zero? <span class="cicada-nymph-syntax-key-word">if</span>
       drop
       swap drop
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     dup x|over|xxx execute-jo false? <span class="cicada-nymph-syntax-key-word">if</span>
       jo-&gt;pre-jo
       <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">jotionary</span>,list-by-jo-predicate,loop
     <span class="cicada-nymph-syntax-key-word">then</span>
     swap
       <span class="cicada-nymph-string">"  "</span> .s
       add1 dup .i <span class="cicada-nymph-string">". "</span> .s
     swap
     dup jo-&gt;name
     dup2 space-string? <span class="cicada-nymph-syntax-key-word">if</span>
       drop2
       <span class="cicada-nymph-string">"  unnamed"</span> .s .l
     <span class="cicada-nymph-syntax-key-word">else</span>
       .s .l
     <span class="cicada-nymph-syntax-key-word">then</span>
     jo-&gt;pre-jo
     <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">jotionary</span>,list-by-jo-predicate,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">jotionary,list-by-jo-predicate</span>
     <span class="cicada-nymph-comment">&lt;&lt; jo-predicate -- total &gt;&gt;</span>
     <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-variable">*first-jo-in-jotionary*</span>
     <span class="cicada-nymph-title">jotionary</span>,list-by-jo-predicate,loop
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">test,jotionary,list-by-jo-predicate</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-syntax-key-word">jo</span> primitive-function-jo? <span class="cicada-nymph-title">jotionary</span>,list-by-jo-predicate
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
   <span class="cicada-nymph-title">test</span>,jotionary,list-by-jo-predicate
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** jotionary,report</span>
   * different types of words in jotionary
     are showed separately
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">jotionary,report</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"* all primitive-function in jotionary :"</span> .s .l
     <span class="cicada-nymph-syntax-key-word">jo</span> primitive-function-jo?
     <span class="cicada-nymph-title">jotionary</span>,list-by-jo-predicate
     <span class="cicada-nymph-string">"* all function in jotionary :"</span> .s .l
     <span class="cicada-nymph-syntax-key-word">jo</span> function-jo?
     <span class="cicada-nymph-title">jotionary</span>,list-by-jo-predicate add
     <span class="cicada-nymph-string">"* all exception in jotionary :"</span> .s .l
     <span class="cicada-nymph-syntax-key-word">jo</span> exception-jo?
     <span class="cicada-nymph-title">jotionary</span>,list-by-jo-predicate add
     <span class="cicada-nymph-string">"* all variable in jotionary :"</span> .s .l
     <span class="cicada-nymph-syntax-key-word">jo</span> variable-jo?
     <span class="cicada-nymph-title">jotionary</span>,list-by-jo-predicate add
     <span class="cicada-nymph-string">"* totally : "</span> .s
     .i .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* -----------------------------------</span>
<span class="org-level-1">* port</span>
<span class="org-level-2">** </span><span class="org-todo">note</span><span class="org-level-2"> syscall with string arguments</span>
   * for syscall the arguments in stack look like
     &lt;&lt; ..., arg3, arg2, arg1 &gt;&gt;
     so
     for read(port, buffer, size)
     we need
     &lt;&lt; size, buffer, port &gt;&gt;
     but the interface (port,read) in cicada-nymph is
     &lt;&lt; buffer, size, port &gt;&gt;
     thus we need a swap here
     and
     we should be careful
     for other interface functions in cicada-nymph
<span class="org-level-2">** </span><span class="org-todo">note</span><span class="org-level-2"> linux header</span>
   * 8 base number :
     O_ACCMODE          0003
     O_RDONLY             00
     O_WRONLY             01
     O_RDWR               02
     O_CREAT            0100  Not fcntl
     O_EXCL             0200  Not fcntl
     O_NOCTTY           0400  Not fcntl
     O_TRUNC           01000  Not fcntl
     O_APPEND          02000
     O_NONBLOCK        04000
     O_NDELAY     O_NONBLOCK
     O_SYNC         04010000
     O_FSYNC          O_SYNC
     O_ASYNC          020000
     O_LARGEFILE     0100000
     O_DIRECTORY     0200000
     O_NOFOLLOW      0400000
     O_CLOEXEC      02000000
     O_DIRECT         040000
     O_NOATIME      01000000
     O_PATH        010000000
     O_DSYNC          010000
     O_TMPFILE     020200000
<span class="org-level-2">** </span><span class="org-todo">&#35352;</span><span class="org-level-2"> &#38364;&#26044;&#36664;&#20837;&#36664;&#20986;</span>
   * &#25509;&#21475;&#35373;&#35336;&#20998;&#20841;&#20491;&#23652;&#27425;
     1. &#24213;&#23652;&#30340;&#20197; port &#29234;&#22522;&#30990;&#30340;&#25509;&#21475;
        &#36889;&#35023;&#25033;&#35442;&#22914;&#20309;&#35373;&#35336;&#36996;&#19981;&#30906;&#23450;
        &#21487;&#33021;&#26371;&#27169;&#20223;&#25805;&#20316;&#31995;&#32113;&#25152;&#25552;&#20379;&#30340;&#25509;&#21475;
     2. &#39640;&#23652;&#30340;&#20197; path &#29234;&#22522;&#30990;&#30340;&#25509;&#21475;
        &#36889;&#35023;&#23559;&#25277;&#35937;&#25481; port &#36889;&#20491;&#27010;&#24565;
        &#20063;&#23601;&#26159;&#27599;&#27425;&#31777;&#21934;&#30340;&#35712;&#23531;&#37117;&#20276;&#38568;&#20841;&#20491;&#23565; port &#30340;&#25805;&#20316;
        &#36889;&#27171;&#25509;&#21475;&#23601;&#24456;&#31777;&#21934; &#20294;&#26159;&#36895;&#24230;&#21487;&#33021;&#26371;&#38750;&#24120;&#24930;
<span class="org-level-2">** input-port,open</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">input-port,open</span>
     <span class="cicada-nymph-comment">&lt;&lt; path[address, length]
        -- port, true
        -- error-code, false &gt;&gt;</span>
     string-&gt;syscall-string
     <span class="cicada-nymph-save-local-variable-1">&gt;:syscall-path</span>
     <span class="cicada-nymph-number">0</span>
     <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-comment">&lt;&lt;
     O_RDONLY
     &gt;&gt;</span>
     <span class="cicada-nymph-fetch-local-variable-1">:syscall-path</span>
     <span class="cicada-nymph-constant">:syscall-number,open:</span>
     <span class="cicada-nymph-number">3</span> syscall
     dup
     negative? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-bool">true</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** output-port,[creat|update]</span>
   * interface
     <span class="org-table">|--------+-----------------------|</span>
     <span class="org-table">| creat  | fail if already exist |</span>
     <span class="org-table">| update | fail if nor exist     |</span>
     <span class="org-table">|--------+-----------------------|</span>
   * one should always know if a file exist or not
     when open it as output-port
     predicates are provided to help you to do so
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">output-port,creat</span>
     <span class="cicada-nymph-comment">&lt;&lt; path[address, length]
        -- port, true
        -- error-code, false &gt;&gt;</span>
     string-&gt;syscall-string
     <span class="cicada-nymph-save-local-variable-1">&gt;:syscall-path</span>
     <span class="cicada-nymph-number">8</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">644</span> <span class="cicada-nymph-comment">&lt;&lt;
     2#110100100
     &gt;&gt;</span>
     <span class="cicada-nymph-number">8</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">1102</span> <span class="cicada-nymph-comment">&lt;&lt;
     O_RDWR   0002
     O_CREAT  0100
     O_TRUNC  1000
     &gt;&gt;</span>
     <span class="cicada-nymph-fetch-local-variable-1">:syscall-path</span>
     <span class="cicada-nymph-constant">:syscall-number,open:</span>
     <span class="cicada-nymph-number">3</span> syscall
     dup
     negative? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-bool">true</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">output-port,update</span>
     <span class="cicada-nymph-comment">&lt;&lt; path[address, length]
        -- port, true
        -- error-code, false &gt;&gt;</span>
     string-&gt;syscall-string
     <span class="cicada-nymph-save-local-variable-1">&gt;:syscall-path</span>
     <span class="cicada-nymph-number">8</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">644</span> <span class="cicada-nymph-comment">&lt;&lt;
     110100100b
     &gt;&gt;</span>
     <span class="cicada-nymph-number">8</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">1002</span> <span class="cicada-nymph-comment">&lt;&lt;
     O_RDWR   0002
     O_TRUNC  1000
     &gt;&gt;</span>
     <span class="cicada-nymph-fetch-local-variable-1">:syscall-path</span>
     <span class="cicada-nymph-constant">:syscall-number,open:</span>
     <span class="cicada-nymph-number">3</span> syscall
     dup
     negative? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-bool">true</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** port,close</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">port,close</span>
     <span class="cicada-nymph-comment">&lt;&lt; port
        -- true
        -- error-code, false &gt;&gt;</span>
     <span class="cicada-nymph-constant">:syscall-number,close:</span>
     <span class="cicada-nymph-number">1</span> syscall
     dup
     negative? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     drop <span class="cicada-nymph-bool">true</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">test,output-port,creat</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"kkk~"</span> <span class="cicada-nymph-title">output-port</span>,creat <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-title">port</span>,close <span class="cicada-nymph-syntax-key-word">if</span>
         <span class="cicada-nymph-end">end</span>
       <span class="cicada-nymph-syntax-key-word">then</span> error-code-&gt;string .s .l <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span> error-code-&gt;string .s .l <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
   <span class="cicada-nymph-title">test</span>,output-port,creat

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">test,output-port,update</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"kkk~"</span> <span class="cicada-nymph-title">output-port</span>,update <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-title">port</span>,close <span class="cicada-nymph-syntax-key-word">if</span>
         <span class="cicada-nymph-end">end</span>
       <span class="cicada-nymph-syntax-key-word">then</span> error-code-&gt;string .s .l <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span> error-code-&gt;string .s .l <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
   <span class="cicada-nymph-title">test</span>,output-port,update
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** port,read</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">port,read</span>
     <span class="cicada-nymph-comment">&lt;&lt; buffer, max-size, port
        -- counter, true
        -- error-code, false &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:port</span>
     swap
     <span class="cicada-nymph-fetch-local-variable-1">:port</span>
     <span class="cicada-nymph-constant">:syscall-number,read:</span>
     <span class="cicada-nymph-number">3</span> syscall
     dup
     negative? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-bool">true</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** port,write</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">port,write</span>
     <span class="cicada-nymph-comment">&lt;&lt; buffer, max-size, port
        -- counter, true
        -- error-code, false &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:port</span>
     swap
     <span class="cicada-nymph-fetch-local-variable-1">:port</span>
     <span class="cicada-nymph-constant">:syscall-number,write:</span>
     <span class="cicada-nymph-number">3</span> syscall
     dup
     negative? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-bool">true</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">test,port,read</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-number">64</span> <span class="cicada-nymph-allocate">allocate-local-memory</span>
     dup
     <span class="cicada-nymph-string">"kkk~"</span> <span class="cicada-nymph-title">input-port</span>,open <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-number">64</span> swap <span class="cicada-nymph-title">port</span>,read <span class="cicada-nymph-syntax-key-word">if</span>
         .s .l
         <span class="cicada-nymph-end">end</span>
       <span class="cicada-nymph-syntax-key-word">then</span> error-code-&gt;string .s .l <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span> error-code-&gt;string .s .l <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
   <span class="cicada-nymph-title">test</span>,port,read
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* file-tree</span>
<span class="org-level-2">** </span><span class="org-todo">note</span><span class="org-level-2"> interface</span>
   * file-tree
     two types of nodes
     1. file
     2. directory
     a leaf must be a file
   * the following interface is provided
     * they use path as an argument
     * they print error message on error
       instead of return error info
       or rise exception
     * the concept of port is
       completely removed from the interface
     --------------------------------
     * file
       1. file,creat
       2. file,update
       3. file,remove
     * jotionary
       1. directory,creat
       2. directory,remove
       3. empty-directory?
     * list
       1. directory,list-file
       2. directory,list-directory
     * find
       1. directory,find-file
       2. directory,find-directory
<span class="org-level-2">** </span><span class="org-todo">&#35352;</span><span class="org-level-2"> &#37679;&#35492;&#34389;&#29702;</span>
   * &#20841;&#31278;&#39080;&#26684;
     IO &#30456;&#38364;&#30340;&#20989;&#25976;&#22312;&#20986;&#37679;&#26178;
     1. &#31435;&#21363;&#22577;&#37679;
     2. &#36820;&#22238;&#20986;&#37679;&#20449;&#24687;
   * &#31532;&#19968;&#31278;&#24456;&#31777;&#21934;
     &#23427;&#20551;&#35373;&#20102;&#25152;&#26377;&#30340;&#37679;&#35492;&#37117;&#26159;&#19981;&#21487;&#24573;&#30053;&#30340;
<span class="org-level-2">** </span><span class="org-todo">&#35352;</span><span class="org-level-2"> &#20803;&#25976;&#25818;</span>
   * &#35370;&#21839;&#31649;&#29702;
     1. &#35504;&#26377;&#27402;&#35370;&#21839;&#36889;&#20491;&#25991;&#20214;
     2. &#20182;&#30340;&#27402;&#21033;&#26159;&#20160;&#40636;
   * &#25991;&#20214;&#39006;&#22411;
     [linux &#27794;&#26377;]
   * &#25991;&#20214;&#22823;&#23567;
   * &#25991;&#20214;&#20351;&#29992;&#35387;&#37323;
     [linux &#27794;&#26377;]
<span class="org-level-2">** file,creat</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">file,creat</span>
     <span class="cicada-nymph-comment">&lt;&lt; path[address, length] -- &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-2">&gt;::path</span>
     <span class="cicada-nymph-fetch-local-variable-2">::path</span>
     string-&gt;syscall-string
     <span class="cicada-nymph-save-local-variable-1">&gt;:syscall-path</span>
     <span class="cicada-nymph-number">8</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">644</span> <span class="cicada-nymph-comment">&lt;&lt;
     2#110100100
     &gt;&gt;</span>
     <span class="cicada-nymph-number">8</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">0200</span>
     <span class="cicada-nymph-number">8</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">0100</span> bit-or <span class="cicada-nymph-comment">&lt;&lt;
     O_EXCL   0200
     O_CREAT  0100
     &gt;&gt;</span>
     <span class="cicada-nymph-fetch-local-variable-1">:syscall-path</span>
     <span class="cicada-nymph-constant">:syscall-number,open:</span>
     <span class="cicada-nymph-number">3</span> syscall
     dup
     negative? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-string">"* (file,creat) fail to open port for the following path :"</span> .s .l
       <span class="cicada-nymph-string">"  "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
       <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-title">port</span>,close <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-string">"* (file,creat) fail to close port for the following path :"</span> .s .l
     <span class="cicada-nymph-string">"  "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
     <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** file,update</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">file,update</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length], path[address, length] -- &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-2">&gt;::path</span>
     <span class="cicada-nymph-save-local-variable-2">&gt;::string</span>
     <span class="cicada-nymph-fetch-local-variable-2">::path</span>
     string-&gt;syscall-string
     <span class="cicada-nymph-save-local-variable-1">&gt;:syscall-path</span>
     <span class="cicada-nymph-number">8</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">644</span> <span class="cicada-nymph-comment">&lt;&lt;
     2#110100100
     &gt;&gt;</span>
     <span class="cicada-nymph-number">8</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">1002</span> <span class="cicada-nymph-comment">&lt;&lt;
     O_RDWR   0002
     O_TRUNC  1000
     &gt;&gt;</span>
     <span class="cicada-nymph-fetch-local-variable-1">:syscall-path</span>
     <span class="cicada-nymph-constant">:syscall-number,open:</span>
     <span class="cicada-nymph-number">3</span> syscall
     dup
     negative? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-string">"* (file,update) fail to open port for the following path :"</span> .s .l
       <span class="cicada-nymph-string">"  "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
       <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:port</span>
     <span class="cicada-nymph-fetch-local-variable-2">::string</span> swap
     <span class="cicada-nymph-fetch-local-variable-1">:port</span>
     <span class="cicada-nymph-constant">:syscall-number,write:</span>
     <span class="cicada-nymph-number">3</span> syscall
     dup
     negative? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-string">"* (file,update) fail to write port for the following path :"</span> .s .l
       <span class="cicada-nymph-string">"  "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
       <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:counter</span> <span class="cicada-nymph-comment">&lt;&lt; bytes been written &gt;&gt;</span>
     <span class="cicada-nymph-fetch-local-variable-1">:port</span>
     <span class="cicada-nymph-title">port</span>,close <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-string">"* (file,update) fail to close port for the following path : "</span> .s .l
     <span class="cicada-nymph-string">"  "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
     <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** file,remove</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">file,remove</span>
     <span class="cicada-nymph-comment">&lt;&lt; path[address, length] -- &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-2">&gt;::path</span>
     <span class="cicada-nymph-fetch-local-variable-2">::path</span>
     string-&gt;syscall-string
     <span class="cicada-nymph-save-local-variable-1">&gt;:syscall-path</span>
     <span class="cicada-nymph-fetch-local-variable-1">:syscall-path</span>
     <span class="cicada-nymph-constant">:syscall-number,unlink:</span>
     <span class="cicada-nymph-number">1</span> syscall
     dup
     negative? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-string">"* (file,remove) fail for the following path :"</span> .s .l
       <span class="cicada-nymph-string">"  "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
       <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     drop
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">test,file,creat</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"kkk~"</span> <span class="cicada-nymph-title">file</span>,creat
     <span class="cicada-nymph-string">"core"</span> <span class="cicada-nymph-title">file</span>,creat
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
   <span class="cicada-nymph-title">test</span>,file,creat

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">test,file,update</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"kkk~"</span> <span class="cicada-nymph-title">file</span>,creat
     <span class="cicada-nymph-string">"kkk took my baby away !!!"</span> <span class="cicada-nymph-string">"kkk~"</span> <span class="cicada-nymph-title">file</span>,update
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
   <span class="cicada-nymph-title">test</span>,file,update

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">test,file,remove</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"kkk~"</span> <span class="cicada-nymph-title">file</span>,remove
     <span class="cicada-nymph-string">"play"</span> <span class="cicada-nymph-title">file</span>,remove
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
   <span class="cicada-nymph-title">test</span>,file,remove
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** directory,creat</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">directory,creat</span>
     <span class="cicada-nymph-comment">&lt;&lt; path[address, length] -- &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-2">&gt;::path</span>
     <span class="cicada-nymph-fetch-local-variable-2">::path</span>
     string-&gt;syscall-string
     <span class="cicada-nymph-save-local-variable-1">&gt;:syscall-path</span>
     <span class="cicada-nymph-number">8</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">755</span> <span class="cicada-nymph-comment">&lt;&lt;
     2#111101101
     &gt;&gt;</span>
     <span class="cicada-nymph-fetch-local-variable-1">:syscall-path</span>
     <span class="cicada-nymph-constant">:syscall-number,mkdir:</span>
     <span class="cicada-nymph-number">2</span> syscall
     dup
     negative? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-string">"* (directory,creat) fail for the following path :"</span> .s .l
       <span class="cicada-nymph-string">"  "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
       <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     drop
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** directory,remove</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">directory,remove</span>
     <span class="cicada-nymph-comment">&lt;&lt; path[address, length] -- &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-2">&gt;::path</span>
     <span class="cicada-nymph-fetch-local-variable-2">::path</span>
     string-&gt;syscall-string
     <span class="cicada-nymph-save-local-variable-1">&gt;:syscall-path</span>
     <span class="cicada-nymph-fetch-local-variable-1">:syscall-path</span>
     <span class="cicada-nymph-constant">:syscall-number,rmdir:</span>
     <span class="cicada-nymph-number">1</span> syscall
     dup
     negative? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-string">"* (directory,remove) fail for the following path :"</span> .s .l
       <span class="cicada-nymph-string">"  "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
       <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     drop
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">test,directory,creat</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"play"</span> <span class="cicada-nymph-title">directory</span>,creat
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
   <span class="cicada-nymph-title">test</span>,directory,creat

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">test,directory,remove</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"play"</span> <span class="cicada-nymph-title">directory</span>,remove
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
   <span class="cicada-nymph-title">test</span>,directory,remove
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** getdents64 structure</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+getdents64,d_ino+</span>        <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+getdents64,d_off+</span>        <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+getdents64,d_reclen+</span>     <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+getdents64,d_type+</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+getdents64,d_name+</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+getdents64,end+</span>          <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">init,getdents64</span>
     <span class="cicada-nymph-comment">&lt;&lt; offset -- &gt;&gt;</span>
     <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">4</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+getdents64,d_ino+</span>       save <span class="cicada-nymph-number">8</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+getdents64,d_off+</span>       save <span class="cicada-nymph-number">8</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+getdents64,d_reclen+</span>    save <span class="cicada-nymph-number">2</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+getdents64,d_type+</span>      save <span class="cicada-nymph-number">1</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+getdents64,d_name+</span>      save <span class="cicada-nymph-number">256</span> add
           <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+getdents64,end+</span>           save
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">8</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+getdents64,d_ino+</span>       save <span class="cicada-nymph-number">8</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+getdents64,d_off+</span>       save <span class="cicada-nymph-number">8</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+getdents64,d_reclen+</span>    save <span class="cicada-nymph-number">2</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+getdents64,d_type+</span>      save <span class="cicada-nymph-number">1</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+getdents64,d_name+</span>      save <span class="cicada-nymph-number">256</span> add
           <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+getdents64,end+</span>           save
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-title">init</span>,getdents64
   <span class="cicada-nymph-constant">+getdents64,end+</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+getdents64,length+</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">test,getdents64,print</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"+getdents64,d_ino+ : "</span>    .s <span class="cicada-nymph-constant">+getdents64,d_ino+</span>     fetch . .l
     <span class="cicada-nymph-string">"+getdents64,d_off+ : "</span>    .s <span class="cicada-nymph-constant">+getdents64,d_off+</span>     fetch . .l
     <span class="cicada-nymph-string">"+getdents64,d_reclen+ : "</span> .s <span class="cicada-nymph-constant">+getdents64,d_reclen+</span>  fetch-two-bytes . .l
     <span class="cicada-nymph-string">"+getdents64,d_type+ : "</span>   .s
     <span class="cicada-nymph-constant">+getdents64,d_type+</span>
     fetch-byte file-type-code-&gt;string .s .l
     <span class="cicada-nymph-string">"+getdents64,d_name+ : "</span>   .s
     <span class="cicada-nymph-constant">+getdents64,d_name+</span>
     dup <span class="cicada-nymph-number">256</span>
     <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-title">string</span>,find-char
     drop  <span class="cicada-nymph-comment">&lt;&lt; drop 0 &gt;&gt;</span>
     over sub .s .l
     .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">test,getdents64,loop,structure</span>
     <span class="cicada-nymph-comment">&lt;&lt; end, cursor -- &gt;&gt;</span>
     dup2 less-or-equal? <span class="cicada-nymph-syntax-key-word">if</span>
       drop2
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-title">init</span>,getdents64
     <span class="cicada-nymph-title">test</span>,getdents64,print
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-constant">+getdents64,d_reclen+</span> fetch-two-bytes add
     <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">test</span>,getdents64,loop,structure
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">test,getdents64,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; port -- &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:port</span>
     <span class="cicada-nymph-number">1024</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:getdents64-structure-list</span>
     <span class="cicada-nymph-number">1024</span>
     <span class="cicada-nymph-fetch-local-variable-1">:getdents64-structure-list</span>
     <span class="cicada-nymph-fetch-local-variable-1">:port</span>
     <span class="cicada-nymph-constant">:syscall-number,getdents64:</span>
     <span class="cicada-nymph-number">3</span> syscall
     <span class="cicada-nymph-string">"* syscall returns : "</span> .s dup .i .l
     dup negative? <span class="cicada-nymph-syntax-key-word">if</span>
       error-code-&gt;string .s .l
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     dup zero? <span class="cicada-nymph-syntax-key-word">if</span>
       drop
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-1">:getdents64-structure-list</span> add
     <span class="cicada-nymph-fetch-local-variable-1">:getdents64-structure-list</span>
     <span class="cicada-nymph-title">test</span>,getdents64,loop,structure
     <span class="cicada-nymph-fetch-local-variable-1">:port</span>
     <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">test</span>,getdents64,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">test,getdents64</span>
     <span class="cicada-nymph-comment">&lt;&lt; path[address, length] -- &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-2">&gt;::path</span>
     <span class="cicada-nymph-fetch-local-variable-2">::path</span> <span class="cicada-nymph-title">input-port</span>,open <span class="cicada-nymph-syntax-key-word">if</span>
     <span class="cicada-nymph-syntax-key-word">else</span>
       <span class="cicada-nymph-string">"* (test,getdents64) fail to open : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
       <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:port</span>
     <span class="cicada-nymph-fetch-local-variable-1">:port</span> <span class="cicada-nymph-title">test</span>,getdents64,loop
     <span class="cicada-nymph-fetch-local-variable-1">:port</span> <span class="cicada-nymph-title">port</span>,close <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-string">"* (test,getdents64) fail to close : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
     <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-string">"play"</span> <span class="cicada-nymph-title">test</span>,getdents64
   <span class="cicada-nymph-string">"play/kkk"</span> <span class="cicada-nymph-title">test</span>,getdents64
   <span class="cicada-nymph-string">"."</span> <span class="cicada-nymph-title">test</span>,getdents64
   <span class="cicada-nymph-string">"/"</span> <span class="cicada-nymph-title">test</span>,getdents64
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** empty-directory?</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">empty-directory?</span>
     <span class="cicada-nymph-comment">&lt;&lt; path[address, length] -- bool &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-2">&gt;::path</span>
     <span class="cicada-nymph-fetch-local-variable-2">::path</span> <span class="cicada-nymph-title">input-port</span>,open <span class="cicada-nymph-syntax-key-word">if</span>
     <span class="cicada-nymph-syntax-key-word">else</span>
       <span class="cicada-nymph-string">"* (empty-directory?) fail to open : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
       <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
       <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:port</span>
     <span class="cicada-nymph-number">128</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:getdents64-structure-list</span>
     <span class="cicada-nymph-number">128</span>
     <span class="cicada-nymph-fetch-local-variable-1">:getdents64-structure-list</span>
     <span class="cicada-nymph-fetch-local-variable-1">:port</span>
     <span class="cicada-nymph-constant">:syscall-number,getdents64:</span>
     <span class="cicada-nymph-number">3</span> syscall
     <span class="cicada-nymph-number">48</span> equal? <span class="cicada-nymph-comment">&lt;&lt; this call to equal? returns the needed bool &gt;&gt;</span>
     <span class="cicada-nymph-fetch-local-variable-1">:port</span> <span class="cicada-nymph-title">port</span>,close <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-string">"* (empty-directory?) fail to close : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
     <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
     <span class="cicada-nymph-bool">false</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-string">"play"</span> empty-directory? . .l
   <span class="cicada-nymph-string">"play/kkk"</span> empty-directory? . .l
   <span class="cicada-nymph-string">"play/aaa"</span> empty-directory? . .l
   <span class="cicada-nymph-string">"."</span> empty-directory? . .l
   <span class="cicada-nymph-string">"/"</span> empty-directory? . .l
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** directory,list-by-file-type-code</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">directory,list-by-file-type-code,loop,print</span>
     <span class="cicada-nymph-comment">&lt;&lt; end, cursor, file-type-code -- &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:file-type-code</span>
     dup2 less-or-equal? <span class="cicada-nymph-syntax-key-word">if</span>
       drop2
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-title">init</span>,getdents64
     <span class="cicada-nymph-constant">+getdents64,d_type+</span> fetch-byte
     <span class="cicada-nymph-fetch-local-variable-1">:file-type-code</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-string">"  "</span> .s
       <span class="cicada-nymph-constant">+getdents64,d_name+</span>
       dup <span class="cicada-nymph-number">256</span>
       <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-title">string</span>,find-char
       drop  <span class="cicada-nymph-comment">&lt;&lt; drop 0 &gt;&gt;</span>
       over sub .s .l
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span>
     <span class="cicada-nymph-constant">+getdents64,d_reclen+</span> fetch-two-bytes
     add
     <span class="cicada-nymph-fetch-local-variable-1">:file-type-code</span>
     <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">directory</span>,list-by-file-type-code,loop,print
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">directory,list-by-file-type-code,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; port, file-type-code -- &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:file-type-code</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:port</span>
     <span class="cicada-nymph-number">1024</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:getdents64-structure-list</span>
     <span class="cicada-nymph-number">1024</span>
     <span class="cicada-nymph-fetch-local-variable-1">:getdents64-structure-list</span>
     <span class="cicada-nymph-fetch-local-variable-1">:port</span>
     <span class="cicada-nymph-constant">:syscall-number,getdents64:</span>
     <span class="cicada-nymph-number">3</span> syscall
     dup negative? <span class="cicada-nymph-syntax-key-word">if</span>
       error-code-&gt;string .s .l
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     dup zero? <span class="cicada-nymph-syntax-key-word">if</span>
       drop
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-1">:getdents64-structure-list</span> add
     <span class="cicada-nymph-fetch-local-variable-1">:getdents64-structure-list</span>
     <span class="cicada-nymph-fetch-local-variable-1">:file-type-code</span>
     <span class="cicada-nymph-title">directory</span>,list-by-file-type-code,loop,print
     <span class="cicada-nymph-fetch-local-variable-1">:port</span>
     <span class="cicada-nymph-fetch-local-variable-1">:file-type-code</span>
     <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">directory</span>,list-by-file-type-code,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">directory,list-by-file-type-code</span>
     <span class="cicada-nymph-comment">&lt;&lt; directory-path[address, length], file-type-code -- &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:file-type-code</span>
     <span class="cicada-nymph-save-local-variable-2">&gt;::path</span>
     <span class="cicada-nymph-fetch-local-variable-2">::path</span> <span class="cicada-nymph-title">input-port</span>,open <span class="cicada-nymph-syntax-key-word">if</span>
     <span class="cicada-nymph-syntax-key-word">else</span>
       <span class="cicada-nymph-string">"* (directory,list-by-file-type-code) fail to open : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
       <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:port</span>
     <span class="cicada-nymph-fetch-local-variable-1">:port</span> <span class="cicada-nymph-fetch-local-variable-1">:file-type-code</span> <span class="cicada-nymph-title">directory</span>,list-by-file-type-code,loop
     <span class="cicada-nymph-fetch-local-variable-1">:port</span> <span class="cicada-nymph-title">port</span>,close <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-string">"* (directory,list-by-file-type-code) fail to close : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
     <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** directory,list-file</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">directory,list-file</span>
     <span class="cicada-nymph-comment">&lt;&lt; directory-path[address, length] -- &gt;&gt;</span>
     <span class="cicada-nymph-number">8</span> <span class="cicada-nymph-title">directory</span>,list-by-file-type-code
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** directory,list-directory</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">directory,list-directory</span>
     <span class="cicada-nymph-comment">&lt;&lt; directory-path[address, length] -- &gt;&gt;</span>
     <span class="cicada-nymph-number">4</span> <span class="cicada-nymph-title">directory</span>,list-by-file-type-code
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-string">"play"</span> dup2
   <span class="cicada-nymph-title">directory</span>,list-file
   <span class="cicada-nymph-title">directory</span>,list-directory

   <span class="cicada-nymph-string">"play/kkk"</span> dup2
   <span class="cicada-nymph-title">directory</span>,list-file
   <span class="cicada-nymph-title">directory</span>,list-directory

   <span class="cicada-nymph-string">"."</span> dup2
   <span class="cicada-nymph-title">directory</span>,list-file
   <span class="cicada-nymph-title">directory</span>,list-directory

   <span class="cicada-nymph-string">"/"</span> dup2
   <span class="cicada-nymph-title">irectory</span>,list-file
   <span class="cicada-nymph-title">directory</span>,list-directory
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** directory,find-by-file-type-code</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">directory,find-by-file-type-code,loop,find</span>
     <span class="cicada-nymph-comment">&lt;&lt; end, cursor, file-name[address, length], file-type-code -- bool &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:file-type-code</span>
     <span class="cicada-nymph-save-local-variable-2">&gt;::file-name</span>
     dup2 less-or-equal? <span class="cicada-nymph-syntax-key-word">if</span>
       drop2
       <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:end</span>
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-title">init</span>,getdents64
     <span class="cicada-nymph-constant">+getdents64,d_type+</span> fetch-byte <span class="cicada-nymph-fetch-local-variable-1">:file-type-code</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-fetch-local-variable-2">::file-name</span> <span class="cicada-nymph-constant">+getdents64,d_name+</span>
       dup2 add fetch-byte zero? <span class="cicada-nymph-syntax-key-word">if</span>
         over string-equal? <span class="cicada-nymph-syntax-key-word">if</span>
           <span class="cicada-nymph-bool">true</span>
           <span class="cicada-nymph-end">end</span>
         <span class="cicada-nymph-syntax-key-word">then</span>
       <span class="cicada-nymph-syntax-key-word">else</span>
         drop drop2
       <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-1">:end</span>
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-constant">+getdents64,d_reclen+</span> fetch-two-bytes add
     <span class="cicada-nymph-fetch-local-variable-2">::file-name</span>
     <span class="cicada-nymph-fetch-local-variable-1">:file-type-code</span>
     <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">directory</span>,find-by-file-type-code,loop,find
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">directory,find-by-file-type-code,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; port, file-name[address, length], file-type-code -- bool &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:file-type-code</span>
     <span class="cicada-nymph-save-local-variable-2">&gt;::file-name</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:port</span>
     <span class="cicada-nymph-number">1024</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:getdents64-structure-list</span>
     <span class="cicada-nymph-number">1024</span>
     <span class="cicada-nymph-fetch-local-variable-1">:getdents64-structure-list</span>
     <span class="cicada-nymph-fetch-local-variable-1">:port</span>
     <span class="cicada-nymph-constant">:syscall-number,getdents64:</span>
     <span class="cicada-nymph-number">3</span> syscall
     dup negative? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-string">"* (directory,find-by-file-type-code,loop) syscall fail"</span> .s .l
       <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
       <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     dup zero? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-comment">&lt;&lt; zero as false &gt;&gt;</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-1">:getdents64-structure-list</span> add
     <span class="cicada-nymph-fetch-local-variable-1">:getdents64-structure-list</span>
     <span class="cicada-nymph-fetch-local-variable-2">::file-name</span>
     <span class="cicada-nymph-fetch-local-variable-1">:file-type-code</span>
     <span class="cicada-nymph-title">directory</span>,find-by-file-type-code,loop,find <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-bool">true</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-1">:port</span>
     <span class="cicada-nymph-fetch-local-variable-2">::file-name</span>
     <span class="cicada-nymph-fetch-local-variable-1">:file-type-code</span>
     <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">directory</span>,find-by-file-type-code,loop
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">directory,find-by-file-type-code</span>
     <span class="cicada-nymph-comment">&lt;&lt; directory-path[address, length],
        file-name[address, length],
        file-type-code
        -- true
        -- false &gt;&gt;</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:file-type-code</span>
     <span class="cicada-nymph-save-local-variable-2">&gt;::file-name</span>
     <span class="cicada-nymph-save-local-variable-2">&gt;::directory-path</span>
     <span class="cicada-nymph-fetch-local-variable-2">::directory-path</span> <span class="cicada-nymph-title">input-port</span>,open <span class="cicada-nymph-syntax-key-word">if</span>
     <span class="cicada-nymph-syntax-key-word">else</span>
       <span class="cicada-nymph-string">"* (directory,find-by-file-type-code) fail to open : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::directory-path</span> .s .l
       <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
       <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:port</span>
     <span class="cicada-nymph-fetch-local-variable-1">:port</span> <span class="cicada-nymph-fetch-local-variable-2">::file-name</span> <span class="cicada-nymph-fetch-local-variable-1">:file-type-code</span> <span class="cicada-nymph-title">directory</span>,find-by-file-type-code,loop
     <span class="cicada-nymph-fetch-local-variable-1">:port</span> <span class="cicada-nymph-title">port</span>,close <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-string">"* (directory,find-by-file-type-code) fail to close : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::directory-path</span> .s .l
     <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** directory,find-file</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">directory,find-file</span>
     <span class="cicada-nymph-comment">&lt;&lt; directory-path[address, length],
        file-name[address, length]
        -- true
        -- false &gt;&gt;</span>
     <span class="cicada-nymph-number">8</span> <span class="cicada-nymph-title">directory</span>,find-by-file-type-code
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** directory,find-directory</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">directory,find-directory</span>
     <span class="cicada-nymph-comment">&lt;&lt; directory-path[address, length],
        file-name[address, length]
        -- true
        -- false &gt;&gt;</span>
     <span class="cicada-nymph-number">4</span> <span class="cicada-nymph-title">directory</span>,find-by-file-type-code
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">test,directory,find-file</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"play"</span> <span class="cicada-nymph-string">"cn"</span> <span class="cicada-nymph-title">directory</span>,find-file .
     <span class="cicada-nymph-string">"play"</span> <span class="cicada-nymph-string">"kkk"</span> <span class="cicada-nymph-title">directory</span>,find-file .
     <span class="cicada-nymph-string">"play"</span> <span class="cicada-nymph-string">"no"</span> <span class="cicada-nymph-title">directory</span>,find-file .
     .l
     <span class="cicada-nymph-string">"playlay"</span> <span class="cicada-nymph-string">"no"</span> <span class="cicada-nymph-title">directory</span>,find-file .
     .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
   <span class="cicada-nymph-title">test</span>,directory,find-file

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">test,directory,find-directory</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"play"</span> <span class="cicada-nymph-string">"cn"</span> <span class="cicada-nymph-title">directory</span>,find-directory .
     <span class="cicada-nymph-string">"play"</span> <span class="cicada-nymph-string">"kkk"</span> <span class="cicada-nymph-title">directory</span>,find-directory .
     <span class="cicada-nymph-string">"play"</span> <span class="cicada-nymph-string">"no"</span> <span class="cicada-nymph-title">directory</span>,find-directory .
     .l
     <span class="cicada-nymph-string">"playlay"</span> <span class="cicada-nymph-string">"no"</span> <span class="cicada-nymph-title">directory</span>,find-directory .
     .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
   <span class="cicada-nymph-title">test</span>,directory,find-directory
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* system environment                  </span><span class="org-level-1"><span class="org-tag">:linux:</span></span>
<span class="org-level-2">** </span><span class="org-todo">note</span><span class="org-level-2"> two directories</span>
   * all files about cicada
     are stored in two directories only
     1. user :
        "<span class="italic">/home/&lt;user&gt;/</span>.cicada"
     2. system :
        "/etc/cicada"
   * note that
     the convention of linux is not followed
     "/share" and "/include" are not used
<span class="org-level-2">** </span><span class="org-todo">note</span><span class="org-level-2"> linux system environment</span>
   * pid is the key to all the linux system environment
   * command-line
     /proc/&lt;pid&gt;/cmdline
   * environment-string-variable-list
     /proc/&lt;pid&gt;/environ
<span class="org-level-2">** [init|get]-pid</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*pid*</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">init-pid</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-constant">:syscall-number,getpid:</span>
     <span class="cicada-nymph-number">0</span> syscall
     <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*pid*</span> save
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">get-pid</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- pid &gt;&gt;</span>
     <span class="cicada-nymph-variable">*pid*</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** [init|get]-command-line</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-memory</span>
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*address,command-line*</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>

   <span class="cicada-nymph-number">512</span>
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*length,command-line*</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">init-command-line</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-number">64</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:path-buffer</span>
     <span class="cicada-nymph-fetch-local-variable-1">:path-buffer</span> <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>

     get-pid <span class="cicada-nymph-title">write-number</span>,fill-buffer <span class="cicada-nymph-save-local-variable-2">&gt;::pid-string</span>

     <span class="cicada-nymph-string">"/proc/"</span> dup <span class="cicada-nymph-save-local-variable-1">&gt;:add-to-cursor</span>
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> string-&gt;buffer!
     <span class="cicada-nymph-fetch-local-variable-1">:add-to-cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> add <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>

     <span class="cicada-nymph-fetch-local-variable-2">::pid-string</span> dup <span class="cicada-nymph-save-local-variable-1">&gt;:add-to-cursor</span>
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> string-&gt;buffer!
     <span class="cicada-nymph-fetch-local-variable-1">:add-to-cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> add <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>

     <span class="cicada-nymph-string">"/cmdline"</span> dup <span class="cicada-nymph-save-local-variable-1">&gt;:add-to-cursor</span>
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> string-&gt;buffer!
     <span class="cicada-nymph-fetch-local-variable-1">:add-to-cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> add <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>

     <span class="cicada-nymph-fetch-local-variable-1">:path-buffer</span>
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:path-buffer</span> sub dup2 <span class="cicada-nymph-save-local-variable-2">&gt;::path</span>
     <span class="cicada-nymph-title">input-port</span>,open <span class="cicada-nymph-syntax-key-word">if</span>
     <span class="cicada-nymph-syntax-key-word">else</span>
       <span class="cicada-nymph-string">"* (init-command-line) fail to open : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:port</span>

     <span class="cicada-nymph-variable">*address,command-line*</span>
     <span class="cicada-nymph-variable">*length,command-line*</span>
     <span class="cicada-nymph-fetch-local-variable-1">:port</span>
     <span class="cicada-nymph-title">port</span>,read <span class="cicada-nymph-syntax-key-word">if</span>
     <span class="cicada-nymph-syntax-key-word">else</span>
       <span class="cicada-nymph-string">"* (init-command-line) fail to read : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*length,command-line*</span> save
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">get-command-line</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- string[address, length] &gt;&gt;</span>
     <span class="cicada-nymph-variable">*address,command-line*</span> <span class="cicada-nymph-variable">*length,command-line*</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** [init|get]-environment-string-variable-list</span>
   * the size of /proc/&lt;pid&gt;/environ is limited to 4k
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-number">1024</span> <span class="cicada-nymph-number">4</span> mul <span class="cicada-nymph-allocate">allocate-memory</span>
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*address,environment-string-variable-list*</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>

   <span class="cicada-nymph-number">1024</span> <span class="cicada-nymph-number">4</span> mul
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*length,environment-string-variable-list*</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">init-environment-string-variable-list</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-number">64</span> <span class="cicada-nymph-allocate">allocate-local-memory</span> <span class="cicada-nymph-save-local-variable-1">&gt;:path-buffer</span>
     <span class="cicada-nymph-fetch-local-variable-1">:path-buffer</span> <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>

     get-pid <span class="cicada-nymph-title">write-number</span>,fill-buffer <span class="cicada-nymph-save-local-variable-2">&gt;::pid-string</span>

     <span class="cicada-nymph-string">"/proc/"</span> dup <span class="cicada-nymph-save-local-variable-1">&gt;:add-to-cursor</span>
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> string-&gt;buffer!
     <span class="cicada-nymph-fetch-local-variable-1">:add-to-cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> add <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>

     <span class="cicada-nymph-fetch-local-variable-2">::pid-string</span> dup <span class="cicada-nymph-save-local-variable-1">&gt;:add-to-cursor</span>
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> string-&gt;buffer!
     <span class="cicada-nymph-fetch-local-variable-1">:add-to-cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> add <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>

     <span class="cicada-nymph-string">"/environ"</span> dup <span class="cicada-nymph-save-local-variable-1">&gt;:add-to-cursor</span>
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> string-&gt;buffer!
     <span class="cicada-nymph-fetch-local-variable-1">:add-to-cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> add <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>

     <span class="cicada-nymph-fetch-local-variable-1">:path-buffer</span>
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:path-buffer</span> sub dup2 <span class="cicada-nymph-save-local-variable-2">&gt;::path</span>
     <span class="cicada-nymph-title">input-port</span>,open <span class="cicada-nymph-syntax-key-word">if</span>
     <span class="cicada-nymph-syntax-key-word">else</span>
       <span class="cicada-nymph-string">"* (init-environment-string-variable-list) fail to open : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:port</span>

     <span class="cicada-nymph-variable">*address,environment-string-variable-list*</span>
     <span class="cicada-nymph-variable">*length,environment-string-variable-list*</span>
     <span class="cicada-nymph-fetch-local-variable-1">:port</span>
     <span class="cicada-nymph-title">port</span>,read <span class="cicada-nymph-syntax-key-word">if</span>
     <span class="cicada-nymph-syntax-key-word">else</span>
       <span class="cicada-nymph-string">"* (init-environment-string-variable-list) fail to read : "</span> .s <span class="cicada-nymph-fetch-local-variable-2">::path</span> .s .l
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-variable">*length,environment-string-variable-list*</span> save
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">get-environment-string-variable-list</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- string[address, length] &gt;&gt;</span>
     <span class="cicada-nymph-variable">*address,environment-string-variable-list*</span> <span class="cicada-nymph-variable">*length,environment-string-variable-list*</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** find-environment-string-variable</span>
   * the string used to find an environment-string-variable
     can not contain "="
     no error handling on this
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">find-environment-string-variable,loop</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length], cursor
        -- string[address, length], true
        -- false &gt;&gt;</span>
     dup
     get-environment-string-variable-list add
     greater-than? <span class="cicada-nymph-syntax-key-word">if</span>
       drop drop2
       <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:cursor</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:length</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:address</span>
     <span class="cicada-nymph-fetch-local-variable-1">:address</span> <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span>
     compare-buffer not <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-fetch-local-variable-1">:address</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span>
       <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-number">0</span> cursor-&gt;next-matching-byte
       <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">find-environment-string-variable</span>,loop
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span> fetch-byte
     <span class="cicada-nymph-string">"="</span> <span class="cicada-nymph-title">string-head</span>,char
     equal? not <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-fetch-local-variable-1">:address</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span>
       <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-number">0</span> cursor-&gt;next-matching-byte
       <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">find-environment-string-variable</span>,loop
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-1">:cursor</span> <span class="cicada-nymph-fetch-local-variable-1">:length</span> add
     add1 <span class="cicada-nymph-save-local-variable-1">&gt;:find-address</span>
     <span class="cicada-nymph-fetch-local-variable-1">:find-address</span>
     <span class="cicada-nymph-number">0</span> cursor-&gt;next-matching-byte
     <span class="cicada-nymph-fetch-local-variable-1">:find-address</span> sub
     <span class="cicada-nymph-save-local-variable-1">&gt;:find-length</span>
     <span class="cicada-nymph-fetch-local-variable-1">:find-address</span>
     <span class="cicada-nymph-fetch-local-variable-1">:find-length</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">find-environment-string-variable</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length]
        -- string[address, length], true
        -- false &gt;&gt;</span>
     get-environment-string-variable-list drop
     <span class="cicada-nymph-title">find-environment-string-variable</span>,loop
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** initialize system environment</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   init-pid
   init-command-line
   init-environment-string-variable-list
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* working-directory</span>
<span class="org-level-2">** get-working-directory</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-number">512</span> <span class="cicada-nymph-allocate">allocate-memory</span>
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*buffer,working-directory*</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">get-working-directory</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- directory[address, length] &gt;&gt;</span>
     <span class="cicada-nymph-number">512</span>
     <span class="cicada-nymph-variable">*buffer,working-directory*</span>
     <span class="cicada-nymph-constant">:syscall-number,getcwd:</span>
     <span class="cicada-nymph-number">2</span> syscall
     dup negative? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-string">"* (get-working-directory) fail"</span> .s .l
       <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-variable">*buffer,working-directory*</span>
     swap
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** change-working-directory</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">change-working-directory</span>
     <span class="cicada-nymph-comment">&lt;&lt; directory-path[address, length] -- &gt;&gt;</span>
     string-&gt;syscall-string
     <span class="cicada-nymph-constant">:syscall-number,chdir:</span>
     <span class="cicada-nymph-number">1</span> syscall
     dup negative? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-string">"* (change-working-directory) fail"</span> .s .l
       <span class="cicada-nymph-string">"  "</span> .s error-code-&gt;string .s .l
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     drop
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   get-working-directory .s
   <span class="cicada-nymph-string">"/home"</span> change-working-directory
   get-working-directory .s
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* </span><span class="org-todo">&gt;&lt;</span><span class="org-level-1"> path</span>
<span class="org-level-2">** stat structure</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_dev+</span>        <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_ino+</span>        <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_mode+</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_nlink+</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_uid+</span>        <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_gid+</span>        <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_rdev+</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_size+</span>       <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_blksize+</span>    <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_blocks+</span>     <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_atime+</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_atime_nsec+</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_mtime+</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_mtime_nsec+</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_ctime+</span>      <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,st_ctime_nsec+</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,__unused4+</span>     <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,__unused5+</span>     <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,end+</span>           <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">init,stat</span>
     <span class="cicada-nymph-comment">&lt;&lt; offset -- &gt;&gt;</span>
     <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">4</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_dev+</span>        save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_ino+</span>        save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_mode+</span>       save <span class="cicada-nymph-number">2</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_nlink+</span>      save <span class="cicada-nymph-number">2</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_uid+</span>        save <span class="cicada-nymph-number">2</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_gid+</span>        save <span class="cicada-nymph-number">2</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_rdev+</span>       save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_size+</span>       save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_blksize+</span>    save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_blocks+</span>     save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_atime+</span>      save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_atime_nsec+</span> save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_mtime+</span>      save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_mtime_nsec+</span> save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_ctime+</span>      save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_ctime_nsec+</span> save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,__unused4+</span>     save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,__unused5+</span>     save <span class="cicada-nymph-variable">*jo-size*</span> add
           <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,end+</span>           save
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">8</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_dev+</span>        save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_ino+</span>        save <span class="cicada-nymph-variable">*jo-size*</span> add
       <span class="cicada-nymph-comment">&lt;&lt;
       note the following order changing
       this is linux' bad
       &gt;&gt;</span>
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_nlink+</span>      save <span class="cicada-nymph-number">8</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_mode+</span>       save <span class="cicada-nymph-number">4</span> add

       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_uid+</span>        save <span class="cicada-nymph-number">4</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_gid+</span>        save <span class="cicada-nymph-number">4</span> add
                                             <span class="cicada-nymph-number">4</span> add <span class="cicada-nymph-comment">&lt;&lt; padding &gt;&gt;</span>
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_rdev+</span>       save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_size+</span>       save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_blksize+</span>    save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_blocks+</span>     save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_atime+</span>      save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_atime_nsec+</span> save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_mtime+</span>      save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_mtime_nsec+</span> save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_ctime+</span>      save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,st_ctime_nsec+</span> save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,__unused4+</span>     save <span class="cicada-nymph-variable">*jo-size*</span> add
       dup <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,__unused5+</span>     save <span class="cicada-nymph-variable">*jo-size*</span> add
           <span class="cicada-nymph-syntax-key-word">address</span> <span class="cicada-nymph-constant">+stat,end+</span>           save
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-title">init</span>,stat
   <span class="cicada-nymph-constant">+stat,end+</span> <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">+stat,length+</span> <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">test,stat</span>
     <span class="cicada-nymph-comment">&lt;&lt; path[address, length] -- &gt;&gt;</span>
     string-&gt;syscall-string
     <span class="cicada-nymph-save-local-variable-1">&gt;:syscall-path</span>
     <span class="cicada-nymph-constant">+stat,length+</span> <span class="cicada-nymph-allocate">allocate-local-memory</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:stat-structure</span>
     <span class="cicada-nymph-fetch-local-variable-1">:stat-structure</span>
     <span class="cicada-nymph-fetch-local-variable-1">:syscall-path</span>
     <span class="cicada-nymph-constant">:syscall-number,stat:</span>
     <span class="cicada-nymph-number">2</span> syscall
     dup
     negative? <span class="cicada-nymph-syntax-key-word">if</span>
       dup .
       error-code-&gt;string .s .l
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     drop
     <span class="cicada-nymph-fetch-local-variable-1">:stat-structure</span> <span class="cicada-nymph-title">init</span>,stat
     <span class="cicada-nymph-string">"+stat,st_dev+ : "</span> .s <span class="cicada-nymph-constant">+stat,st_dev+</span>        fetch . .l
     <span class="cicada-nymph-string">"+stat,st_ino+ : "</span> .s <span class="cicada-nymph-constant">+stat,st_ino+</span>        fetch . .l
     <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">4</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
     <span class="cicada-nymph-string">"+stat,st_mode+ : "</span> .s <span class="cicada-nymph-constant">+stat,st_mode+</span>       fetch-two-bytes  . .l
     <span class="cicada-nymph-string">"+stat,st_nlink+ : "</span> .s <span class="cicada-nymph-constant">+stat,st_nlink+</span>      fetch-two-bytes  . .l
     <span class="cicada-nymph-string">"+stat,st_uid+ : "</span> .s <span class="cicada-nymph-constant">+stat,st_uid+</span>        fetch-two-bytes  . .l
     <span class="cicada-nymph-string">"+stat,st_gid+ : "</span> .s <span class="cicada-nymph-constant">+stat,st_gid+</span>        fetch-two-bytes  . .l
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">8</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
     <span class="cicada-nymph-string">"+stat,st_nlink+ : "</span> .s <span class="cicada-nymph-constant">+stat,st_nlink+</span>      fetch  . .l
     <span class="cicada-nymph-string">"+stat,st_mode+ : "</span> .s <span class="cicada-nymph-constant">+stat,st_mode+</span>       fetch-four-bytes  . .l
     <span class="cicada-nymph-string">"+stat,st_uid+ : "</span> .s <span class="cicada-nymph-constant">+stat,st_uid+</span>        fetch-four-bytes  . .l
     <span class="cicada-nymph-string">"+stat,st_gid+ : "</span> .s <span class="cicada-nymph-constant">+stat,st_gid+</span>        fetch-four-bytes  . .l
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-string">"+stat,st_rdev+ : "</span> .s <span class="cicada-nymph-constant">+stat,st_rdev+</span>       fetch . .l
     <span class="cicada-nymph-string">"+stat,st_size+ : "</span> .s <span class="cicada-nymph-constant">+stat,st_size+</span>       fetch . .l
     <span class="cicada-nymph-string">"+stat,st_blksize+ : "</span> .s <span class="cicada-nymph-constant">+stat,st_blksize+</span>    fetch . .l
     <span class="cicada-nymph-string">"+stat,st_blocks+ : "</span> .s <span class="cicada-nymph-constant">+stat,st_blocks+</span>     fetch . .l
     <span class="cicada-nymph-string">"+stat,st_atime+ : "</span> .s <span class="cicada-nymph-constant">+stat,st_atime+</span>      fetch . .l
     <span class="cicada-nymph-string">"+stat,st_atime_nsec+ : "</span> .s <span class="cicada-nymph-constant">+stat,st_atime_nsec+</span> fetch . .l
     <span class="cicada-nymph-string">"+stat,st_mtime+ : "</span> .s <span class="cicada-nymph-constant">+stat,st_mtime+</span>      fetch . .l
     <span class="cicada-nymph-string">"+stat,st_mtime_nsec+ : "</span> .s <span class="cicada-nymph-constant">+stat,st_mtime_nsec+</span> fetch . .l
     <span class="cicada-nymph-string">"+stat,st_ctime+ : "</span> .s <span class="cicada-nymph-constant">+stat,st_ctime+</span>      fetch . .l
     <span class="cicada-nymph-string">"+stat,st_ctime_nsec+ : "</span> .s <span class="cicada-nymph-constant">+stat,st_ctime_nsec+</span> fetch . .l
     <span class="cicada-nymph-string">"+stat,__unused4+ : "</span> .s <span class="cicada-nymph-constant">+stat,__unused4+</span>     fetch . .l
     <span class="cicada-nymph-string">"+stat,__unused5+ : "</span> .s <span class="cicada-nymph-constant">+stat,__unused5+</span>     fetch . .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-string">"cn"</span> <span class="cicada-nymph-title">test</span>,stat
   <span class="cicada-nymph-string">"no"</span> <span class="cicada-nymph-title">test</span>,stat
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-todo">note</span><span class="org-level-2"> predicate</span>
   * to use predicate to know more about the file-tree
     before calling a function that makes action on the file-tree
<span class="org-level-2">** path,nothing?</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">path,nothing?</span>
     <span class="cicada-nymph-comment">&lt;&lt; path[address, length] -- bool &gt;&gt;</span>
     string-&gt;syscall-string
     <span class="cicada-nymph-save-local-variable-1">&gt;:syscall-path</span>
     <span class="cicada-nymph-constant">+stat,length+</span> <span class="cicada-nymph-allocate">allocate-local-memory</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:stat-structure</span>
     <span class="cicada-nymph-fetch-local-variable-1">:stat-structure</span>
     <span class="cicada-nymph-fetch-local-variable-1">:syscall-path</span>
     <span class="cicada-nymph-constant">:syscall-number,stat:</span>
     <span class="cicada-nymph-number">2</span> syscall
     <span class="cicada-nymph-number">-2</span> equal?
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** path,file?</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">path,file?</span>
     <span class="cicada-nymph-comment">&lt;&lt; path[address, length] -- bool &gt;&gt;</span>
     string-&gt;syscall-string
     <span class="cicada-nymph-save-local-variable-1">&gt;:syscall-path</span>
     <span class="cicada-nymph-constant">+stat,length+</span> <span class="cicada-nymph-allocate">allocate-local-memory</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:stat-structure</span>
     <span class="cicada-nymph-fetch-local-variable-1">:stat-structure</span>
     <span class="cicada-nymph-fetch-local-variable-1">:syscall-path</span>
     <span class="cicada-nymph-constant">:syscall-number,stat:</span>
     <span class="cicada-nymph-number">2</span> syscall
     dup
     negative? <span class="cicada-nymph-syntax-key-word">if</span>
       drop
       <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     drop
     <span class="cicada-nymph-fetch-local-variable-1">:stat-structure</span> <span class="cicada-nymph-title">init</span>,stat
     <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">4</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-constant">+stat,st_mode+</span>
       fetch-two-bytes
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">8</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-constant">+stat,st_mode+</span>
       fetch-four-bytes
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-number">12</span> bit-right
     <span class="cicada-nymph-number">8</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">0010</span>
     equal?
     <span class="cicada-nymph-comment">&lt;&lt;
     0170000
     S_IFDIR       0040000 /* Directory.  */
     S_IFCHR       0020000 /* Character device.  */
     S_IFBLK       0060000 /* Block device.  */
     S_IFREG       0100000 /* Regular file.  */
     S_IFIFO       0010000 /* FIFO.  */
     S_IFLNK       0120000 /* Symbolic link.  */
     S_IFSOCK      0140000 /* Socket.  */
     &gt;&gt;</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** path,directory?</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">path,directory?</span>
     <span class="cicada-nymph-comment">&lt;&lt; path[address, length] -- bool &gt;&gt;</span>
     string-&gt;syscall-string
     <span class="cicada-nymph-save-local-variable-1">&gt;:syscall-path</span>
     <span class="cicada-nymph-constant">+stat,length+</span> <span class="cicada-nymph-allocate">allocate-local-memory</span>
     <span class="cicada-nymph-save-local-variable-1">&gt;:stat-structure</span>
     <span class="cicada-nymph-fetch-local-variable-1">:stat-structure</span>
     <span class="cicada-nymph-fetch-local-variable-1">:syscall-path</span>
     <span class="cicada-nymph-constant">:syscall-number,stat:</span>
     <span class="cicada-nymph-number">2</span> syscall
     dup
     negative? <span class="cicada-nymph-syntax-key-word">if</span>
       drop
       <span class="cicada-nymph-bool">false</span>
       <span class="cicada-nymph-end">end</span>
     <span class="cicada-nymph-syntax-key-word">then</span>
     drop
     <span class="cicada-nymph-fetch-local-variable-1">:stat-structure</span> <span class="cicada-nymph-title">init</span>,stat
     <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">4</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-constant">+stat,st_mode+</span>
       fetch-two-bytes
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">8</span> equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-constant">+stat,st_mode+</span>
       fetch-four-bytes
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-number">12</span> bit-right
     <span class="cicada-nymph-number">8</span><span class="cicada-nymph-number-light">#</span><span class="cicada-nymph-number">0004</span>
     equal?
     <span class="cicada-nymph-comment">&lt;&lt;
     0170000
     S_IFDIR       00040000 /* Directory.  */
     S_IFCHR       00020000 /* Character device.  */
     S_IFBLK       00060000 /* Block device.  */
     S_IFREG       00100000 /* Regular file.  */
     S_IFIFO       00010000 /* FIFO.  */
     S_IFLNK       00120000 /* Symbolic link.  */
     S_IFSOCK      00140000 /* Socket.  */
     &gt;&gt;</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-done">test</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-string">"cn"</span> <span class="cicada-nymph-title">path</span>,nothing? . <span class="cicada-nymph-comment">&lt;&lt; 0 &gt;&gt;</span>
   <span class="cicada-nymph-string">"core"</span> <span class="cicada-nymph-title">path</span>,nothing? . <span class="cicada-nymph-comment">&lt;&lt; 0 &gt;&gt;</span>
   <span class="cicada-nymph-string">"ai"</span> <span class="cicada-nymph-title">path</span>,nothing? . <span class="cicada-nymph-comment">&lt;&lt; 1 &gt;&gt;</span>

   <span class="cicada-nymph-string">"cn"</span> <span class="cicada-nymph-title">path</span>,file? . <span class="cicada-nymph-comment">&lt;&lt; 1 &gt;&gt;</span>
   <span class="cicada-nymph-string">"core"</span> <span class="cicada-nymph-title">path</span>,file? . <span class="cicada-nymph-comment">&lt;&lt; 0 &gt;&gt;</span>
   <span class="cicada-nymph-string">"ai"</span> <span class="cicada-nymph-title">path</span>,file? . <span class="cicada-nymph-comment">&lt;&lt; 0 &gt;&gt;</span>

   <span class="cicada-nymph-string">"cn"</span> <span class="cicada-nymph-title">path</span>,directory? . <span class="cicada-nymph-comment">&lt;&lt; 0 &gt;&gt;</span>
   <span class="cicada-nymph-string">"core"</span> <span class="cicada-nymph-title">path</span>,directory? . <span class="cicada-nymph-comment">&lt;&lt; 1 &gt;&gt;</span>
   <span class="cicada-nymph-string">"ai"</span> <span class="cicada-nymph-title">path</span>,directory? . <span class="cicada-nymph-comment">&lt;&lt; 0 &gt;&gt;</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-todo">&gt;&lt;</span><span class="org-level-2"> relative-path?</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">relative-path?</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- bool &gt;&gt;</span>

     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-todo">&gt;&lt;</span><span class="org-level-2"> full-path?</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">full-path?</span>
     <span class="cicada-nymph-comment">&lt;&lt; string[address, length] -- bool &gt;&gt;</span>

     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** </span><span class="org-todo">&gt;&lt;</span><span class="org-level-2"> relative-path-&gt;full-path</span>
   * note that
     this function is using circular-string-area
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">relative-path-&gt;full-path</span>
     <span class="cicada-nymph-comment">&lt;&lt; relative-path[address, length] -- full-path[address, length] &gt;&gt;</span>

     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* </span><span class="org-todo">&gt;&lt;</span><span class="org-level-1"> poi</span>
<span class="org-level-2">** </span><span class="org-todo">note</span>
   * poi denotes path-organizer
     it can give a name to a path
     one path one name
   * a path as a string must not contain any space chars
<span class="org-level-2">** </span><span class="org-todo">note</span><span class="org-level-2"> two directories</span>
   * two directories to store the name path record
     1. user :
        "<span class="italic">/home/&lt;user&gt;/</span>.cicada/poi"
     2. system :
        "/etc/cicada/poi"
   * note that
     these two directories are viewed as one by poi
     no such things like
     user overriding system will happen
     one name can only exist in one of the two directories
     more on this in the following note
<span class="org-level-2">** </span><span class="org-todo">note</span><span class="org-level-2"> interface for command-line-function</span>
   * cn poi add  &lt;name&gt; &lt;relative-path&gt;
   * cn poi sub  &lt;name&gt;
   * cn poi up   &lt;name&gt; &lt;relative-path&gt;
   * cn poi show &lt;name&gt;
   * cn poi list
   * &lt;relative-path&gt; is converted to &lt;full-path&gt;
     with the help of working-directory
   * &lt;relative-path&gt; is in the format of
     "./directory/file"
     "./directory/directory"
     note that
     for a &lt;relative-path&gt; of directory
     not tailing "/" should be added
<span class="org-level-2">** poi,add</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">poi,add</span>
     <span class="cicada-nymph-comment">&lt;&lt; name[address, length], relative-path[address, length] -- &gt;&gt;</span>

     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** poi,sub</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">poi,sub</span>
     <span class="cicada-nymph-comment">&lt;&lt; name[address, length] -- &gt;&gt;</span>

     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** poi,up</span>
   * up denotes update
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">poi,up</span>
     <span class="cicada-nymph-comment">&lt;&lt; name[address, length], relative-path[address, length] -- &gt;&gt;</span>

     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** poi,list</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">poi,list</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>

     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** poi,show</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">poi,show</span>
     <span class="cicada-nymph-comment">&lt;&lt; name[address, length] -- &gt;&gt;</span>

     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** poi,help</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">poi,help</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>

     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* </span><span class="org-todo">&gt;&lt;</span><span class="org-level-1"> path syntax</span>
<span class="org-level-2">** </span><span class="org-todo">&#35352;</span><span class="org-level-2"> syntax about path</span>
   * &#21033;&#29992;&#20102;&#31995;&#32113;&#30340;&#36335;&#24465;&#26684;&#24335;
     &#21516;&#26178;&#21448;&#25226;&#31995;&#32113;&#30340;&#36335;&#24465;&#26684;&#24335;&#25277;&#35937;&#25481;&#20102;
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   <span class="cicada-nymph-wody">path:</span> home xyh cicada core.cn <span class="cicada-nymph-sentence-reader">;</span>
   <span class="cicada-nymph-string">"/home/xyh/cicada/core.cn"</span>

   <span class="cicada-nymph-wody">path:</span> home xyh cicada <span class="cicada-nymph-sentence-reader">;</span>
   <span class="cicada-nymph-string">"/home/xyh/cicada"</span>

   <span class="cicada-nymph-wody">path:</span> <span class="cicada-nymph-constant">+working+</span> core.cn <span class="cicada-nymph-sentence-reader">;</span>
   <span class="cicada-nymph-string">"./core.cn"</span>

   <span class="cicada-nymph-wody">path:</span> <span class="cicada-nymph-constant">+parent+</span> cicada core.cn <span class="cicada-nymph-sentence-reader">;</span>
   <span class="cicada-nymph-string">"../cicada/core.cn"</span>

   <span class="cicada-nymph-wody">path:</span> <span class="cicada-nymph-constant">+library+</span> kkk main.cn <span class="cicada-nymph-sentence-reader">;</span>
   <span class="cicada-nymph-string">"/home/xyh/.cicada/library/kkk/main.cn"</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* -----------------------------------</span>
<span class="org-level-1">* module</span>
  * a erlang like module system
    &#20294;&#26159;
    &#26044; erlang &#20043;&#38291;&#30340;&#37325;&#35201;&#21312;&#21029;&#22312;&#26044;
    * cicada-nymph &#26159;&#32020;&#31929;&#35299;&#37323;&#22411;&#30340;&#35486;&#35328;
      &#20006;&#19981;&#38656;&#35201;&#32232;&#35695;&#25991;&#20214;
  * &#19968;&#20491; module &#23601;&#26159;&#19968;&#20491; &#20445;&#23384;&#28304;&#20195;&#30908;&#30340;&#25991;&#20214;
    &#20854;&#20013;&#24517;&#38920;&#21253;&#21547;&#22266;&#23450;&#26684;&#24335;&#30340;&#20803;&#25976;&#25818;
  * &#20803;&#25976;&#25818;&#20013;&#21253;&#21547;
    1. &#22914;&#20309;&#25197;&#26354; jotionary
       &#20063;&#23601;&#26159;&#35498; &#30906;&#23526;&#26159;&#22312;&#25197;&#26354; jotionary
       &#20294;&#26159;&#25197;&#26354;&#30340;&#26041;&#24335;&#21487;&#20197;&#38750;&#24120;&#38728;&#27963;
<span class="org-level-1">* load-file</span>
<span class="org-level-2">** </span><span class="org-todo">&#35352;</span><span class="org-level-2"> &#20803;&#25976;&#25818;</span>
   * &#34987;&#21152;&#36617;&#30340;&#25991;&#20214;&#30340;&#38283;&#38957;&#25033;&#35442;&#26377;&#20803;&#25976;&#25818;
<span class="org-level-1">* -----------------------------------</span>
<span class="org-level-1">* report</span>
<span class="org-level-2">** report-memory</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">report-memory</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"* *un-initialized-memory*"</span> .s .l
     <span class="cicada-nymph-string">"  * size : "</span> .s
          <span class="cicada-nymph-variable">*size,un-initialized-memory*</span>
          . .l
     <span class="cicada-nymph-string">"  * used : "</span> .s
          <span class="cicada-nymph-variable">*current-free-address,un-initialized-memory*</span>
          <span class="cicada-nymph-variable">*un-initialized-memory*</span>
          sub . .l
     <span class="cicada-nymph-string">"  * free : "</span> .s
          <span class="cicada-nymph-variable">*size,un-initialized-memory*</span>
          <span class="cicada-nymph-variable">*current-free-address,un-initialized-memory*</span>
          <span class="cicada-nymph-variable">*un-initialized-memory*</span>
          sub sub . .l
     <span class="cicada-nymph-string">"* *primitive-string-area*"</span> .s .l
     <span class="cicada-nymph-string">"  * size : "</span> .s
          <span class="cicada-nymph-variable">*size,primitive-string-area*</span>
          . .l
     <span class="cicada-nymph-string">"  * used : "</span> .s
          <span class="cicada-nymph-variable">*current-free-address,primitive-string-area*</span>
          <span class="cicada-nymph-variable">*primitive-string-area*</span>
          sub . .l
     <span class="cicada-nymph-string">"  * free : "</span> .s
          <span class="cicada-nymph-variable">*size,primitive-string-area*</span>
          <span class="cicada-nymph-variable">*current-free-address,primitive-string-area*</span>
          <span class="cicada-nymph-variable">*primitive-string-area*</span>
          sub sub . .l
     <span class="cicada-nymph-string">"* *jo-area*"</span> .s .l
     <span class="cicada-nymph-string">"  * size : "</span> .s
          <span class="cicada-nymph-variable">*size,jo-area*</span> . .l
     <span class="cicada-nymph-string">"  * used : "</span> .s
          <span class="cicada-nymph-variable">*current-free-address,jo-area*</span>
          <span class="cicada-nymph-variable">*jo-area*</span>
          sub . .l
     <span class="cicada-nymph-string">"  * free : "</span> .s
          <span class="cicada-nymph-variable">*size,jo-area*</span>
          <span class="cicada-nymph-variable">*current-free-address,jo-area*</span>
          <span class="cicada-nymph-variable">*jo-area*</span>
          sub sub . .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** report-platform</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">report-platform</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"* platform : "</span> .s
     platform .s
     .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** report-jo-size</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">report-jo-size</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"* jo-size : "</span> .s
     <span class="cicada-nymph-variable">*jo-size*</span> write-number
     <span class="cicada-nymph-string">" bytes"</span> .s
     .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** report-machine-word-size</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">report-machine-word-size</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"* machine-word-size : "</span> .s
     <span class="cicada-nymph-variable">*jo-size*</span> <span class="cicada-nymph-number">8</span> mul write-number
     <span class="cicada-nymph-string">" bits"</span> .s
     .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** report-syntax</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">report-syntax</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"* *rule-set,make-jojo* :"</span> .s .l
      <span class="cicada-nymph-variable">*rule-set,make-jojo*</span> list-rule
     <span class="cicada-nymph-string">"* *rule-set,basic-REPL* :"</span> .s .l
      <span class="cicada-nymph-variable">*rule-set,basic-REPL*</span> list-rule
     <span class="cicada-nymph-string">"* tos-syntax-stack :"</span> .s .l
      tos-syntax-stack list-rule
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** initial-report</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">initial-report</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"* initial-report : "</span> .s .l
     <span class="cicada-nymph-string">"  "</span> .s report-platform
     <span class="cicada-nymph-string">"  "</span> .s report-machine-word-size
     <span class="cicada-nymph-string">"  "</span> .s report-jo-size
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* hi</span>
<span class="org-level-2">** welcome</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">welcome</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"* welcome to cicada-nymph"</span> .s .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** hi</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-number">0</span>
   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">*hi,random-base*</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-variable,with-tos</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">hi,random</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- random-number &gt;&gt;</span>
     <span class="cicada-nymph-number">0</span> <span class="cicada-nymph-constant">:syscall-number,times:</span>
     <span class="cicada-nymph-number">1</span> syscall
     <span class="cicada-nymph-number">9</span> mod
     <span class="cicada-nymph-comment">&lt;&lt;
      *hi,random-base*
      *hi,random-base* add1 13 mod
      address *hi,random-base* save
     &gt;&gt;</span>
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">hi,say</span>
     <span class="cicada-nymph-comment">&lt;&lt; number -- &gt;&gt;</span>
     dup <span class="cicada-nymph-number">0</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"  cica cica da yaya !!!"</span> .s .l <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">1</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"  hi ^-^"</span> .s .l <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">2</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"  hello :)"</span> .s .l <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">3</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"  hey *^-^*"</span> .s .l <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">4</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"  hiya \^o^/"</span> .s .l <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">5</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"  I wish you a lovely day"</span> .s .l <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">6</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"  I wish you a lovely day { or night :P }"</span> .s .l <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
     dup <span class="cicada-nymph-number">7</span> equal? <span class="cicada-nymph-syntax-key-word">if</span> drop <span class="cicada-nymph-string">"  o.o"</span> .s .l <span class="cicada-nymph-end">end</span> <span class="cicada-nymph-syntax-key-word">then</span>
                     drop <span class="cicada-nymph-string">"  lovely ^3^"</span> .s .l <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">hi</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-title">hi</span>,random
     <span class="cicada-nymph-title">hi</span>,say
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** help</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">help</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"* helpful documentations will be written soon"</span> .s .l
     <span class="cicada-nymph-string">"  please wait ^-^"</span> .s .l
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* command-line-interface</span>
<span class="org-level-2">** </span><span class="org-todo">note</span>
<span class="org-level-2">** command-line,unknow-function</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">command-line,unknow-function</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"* (cicada-nymph) unknow command-line-function : "</span> .s
     get-command-line
     <span class="cicada-nymph-title">string-tail</span>,word
     <span class="cicada-nymph-title">string-head</span>,word .s .l
     <span class="cicada-nymph-string">"  good bye ^-^/"</span> .s .l
     bye
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** command-line,stack-REPL</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">command-line,stack-REPL</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     welcome
     hi
     initial-report
     <span class="cicada-nymph-string">"* you are in the (stack-REPL)"</span> .s .l
     <span class="cicada-nymph-string">"  every time after a word is executed"</span> .s .l
     <span class="cicada-nymph-string">"  the argument-stack get printed"</span> .s .l
     <span class="cicada-nymph-title">print-argument-stack</span>,pretty
     <span class="cicada-nymph-syntax-key-word">jo</span> stack-REPL
     reset-top-level-REPL
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** command-line,basic-REPL</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">command-line,basic-REPL</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     welcome
     hi
     initial-report
     <span class="cicada-nymph-string">"* you are in the (basic-REPL)"</span> .s .l
     <span class="cicada-nymph-string">"  this REPL does not print any thing automaticly"</span> .s .l
     <span class="cicada-nymph-syntax-key-word">jo</span> basic-REPL
     reset-top-level-REPL
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** command-line,poi</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">command-line,poi</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-string">"* poi byebye"</span> .s .l
     bye
     <span class="cicada-nymph-end">end</span>
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** command-line,no-function</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">command-line,no-function</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">command-line</span>,stack-REPL
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-2">** command-line-dispatcher</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph :tangle core.cn
</span>   <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">command-line-dispatcher</span>
     <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
     get-command-line
     <span class="cicada-nymph-title">string-tail</span>,word
     dup2 space-string? <span class="cicada-nymph-syntax-key-word">if</span>
       drop2
       <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">command-line</span>,no-function
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-title">string-head</span>,word
     <span class="cicada-nymph-save-local-variable-2">&gt;::1st-word</span>
     <span class="cicada-nymph-fetch-local-variable-2">::1st-word</span> <span class="cicada-nymph-string">"basic-REPL"</span> string-equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">command-line</span>,basic-REPL
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-2">::1st-word</span> <span class="cicada-nymph-string">"stack-REPL"</span> string-equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">command-line</span>,stack-REPL
     <span class="cicada-nymph-syntax-key-word">then</span>
     <span class="cicada-nymph-fetch-local-variable-2">::1st-word</span> <span class="cicada-nymph-string">"poi"</span> string-equal? <span class="cicada-nymph-syntax-key-word">if</span>
       <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">command-line</span>,poi
     <span class="cicada-nymph-syntax-key-word">then</span>
       <span class="cicada-nymph-end">&lt;&gt;</span> <span class="cicada-nymph-title">command-line</span>,unknow-function
   <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* </span><span class="org-level-1"><span class="bold">*the-story-begin*</span></span>
<span class="org-block-begin-line">  #+begin_src cicada-nymph :tangle core.cn
</span>  <span class="cicada-nymph-sentence-reader">:</span> <span class="cicada-nymph-word-to-define">the-story-begin</span>
    <span class="cicada-nymph-comment">&lt;&lt; -- &gt;&gt;</span>
    <span class="cicada-nymph-end">&lt;&gt;</span> command-line-dispatcher
  <span class="cicada-nymph-sentence-reader">;</span> <span class="cicada-nymph-lexicographer">define-function</span>

  the-story-begin
<span class="org-block-end-line">  #+end_src
</span><span class="org-level-1">* ===================================</span>
<span class="org-level-1">* </span><span class="org-done">test</span>
<span class="org-level-2">** report</span>
<span class="org-block-begin-line">   #+begin_src cicada-nymph
</span>   report-memory
   report-syntax
   <span class="cicada-nymph-title">jotionary</span>,report
<span class="org-block-end-line">   #+end_src
</span><span class="org-level-1">* ===================================</span>
</pre>
  </body>
</html>
